
<!DOCTYPE html>
<html lang="zh-Hans">


<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="theme-color" content="#202020">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="google-site-verification" content="9GY-OrjvdT8TkXuLJFSJcJqolHfXKJ5NVYKRUv8mCRM">
  
    <meta name="keywords" content="Interview,经典面试题整理">
  

  
    <meta name="description" content="钟宇鹏的博客,钟宇鹏,个人博客">
  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <link rel="icon" type="image/x-icon" href="/logo.png">
  
    <title>经典面试题整理</title>
  
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/pure.min.css">
    
      <link rel="stylesheet" href="/css/simple.css">
    
  
</head>


<body>
  <nav class="home-menu pure-menu pure-menu-horizontal pure-menu-fixed">
  <ul class="pure-menu-list float-r clearfix">
    
      <!-- <li class="pure-menu-item toc-menu pure-menu-has-children pure-menu-allow-hover">
        <a id="menu-main-post" class="pure-menu-link" href="javascript:;">
          <img class="menu-icon" src="/logo.png" alt="MENU">
        </a>
      </li> -->
      <li class="pure-menu-item pure-menu-has-children pure-menu-allow-hover">
        <a id="menu-main" class="pure-menu-link" href="javascript:;">
          <img class="menu-icon" src="/logo.png" alt="MENU">
        </a>
        <ul class="pure-menu-children">
        
          
            <li class="pure-menu-item"><a href="/" class="pure-menu-link">首页</a></li>
          
          
          
            <li class="pure-menu-item"><a href="/photographer" class="pure-menu-link">摄影</a></li>
          
          
          
            <li class="pure-menu-item"><a href="/tags" class="pure-menu-link">标签</a></li>
          
          
          
            <li class="pure-menu-item"><a href="/search" class="pure-menu-link">搜索</a></li>
          
          
          
            <li class="pure-menu-item"><a href="/about" class="pure-menu-link">关于</a></li>
          
          
      </ul>
      </li>
    
  </ul>
  <a class="pure-menu-heading" href="/">
      <h1 class="title">zhongyp&#39;blog</h1>
      <!-- <span>钟宇鹏的博客</span> -->
  </a>
  <!-- 
  <img class="logo" id="logo" src="/logo.png" alt="logo">
   -->
</nav>


  <div class="container" id="content-outer">
    <div class="inner" id="content-inner">
      <article class="post" id="post">
  <header class="post-header text-center">
    <h1 class="title">
      经典面试题整理
    </h1>
    
    <time class="time" datetime="2018-03-01T16:00:00.000Z">
      2018-03-02
    </time>
     |
    <span id="busuanzi_container_page_pv">本文总阅读量<span id="busuanzi_value_page_pv"></span>次
</span>
    <hr>
  </header>
  <div class="post-content">
    <h2 id="corejava"><a href="#corejava" class="headerlink" title="corejava"></a>corejava</h2><h3 id="1-hashcode-相等两个类一定相等么？equals呢？相反呢？"><a href="#1-hashcode-相等两个类一定相等么？equals呢？相反呢？" class="headerlink" title="1. hashcode 相等两个类一定相等么？equals呢？相反呢？"></a>1. hashcode 相等两个类一定相等么？equals呢？相反呢？</h3><p>equals相等，hashcode一定相等，hashcode相等，两个类不一定相等。</p>
<p>需要重写equals：如果类具有自己特有的逻辑相等概念，而且超类没有覆盖实现equals，以实现期望行为。<br>不需要重写equals：“值类”不需要覆盖equals方法，每个值之多只存在一个对象，比如枚举。</p>
<p>覆盖应该注意equals：</p>
<ul>
<li>自反性（reflexive）。</li>
<li>对称性（symmetric）。</li>
<li>传递性（transitive）。</li>
<li>一致性（consistent）。</li>
</ul>
<h3 id="2-介绍一下集合框架"><a href="#2-介绍一下集合框架" class="headerlink" title="2. 介绍一下集合框架"></a>2. 介绍一下集合框架</h3><p>集合框架是指实现了Collection接口的子接口和子类以及相关类的总称，总的来说可以划分为无序集和有序两种（这里的顺序是指插入顺序）。List代表有序集，Set代表无序集。有序集根据读取和写入的对于性能的不同要求又分为数组实现和链表实现。数组读取数据块，插入比较慢。链表插入比较快，查询比较慢。因为使用了链表，所以List也有一些队列的特性。无序集合底层使用HashMap实现，所以用来查找时间复杂度为1。无序集合可以对要素大小排序（TreeMap）。</p>
<h3 id="3-hashmap-hashtable-底层实现什么区别？hashtale和concurrenthashmap呢？"><a href="#3-hashmap-hashtable-底层实现什么区别？hashtale和concurrenthashmap呢？" class="headerlink" title="3. hashmap hashtable 底层实现什么区别？hashtale和concurrenthashmap呢？"></a>3. hashmap hashtable 底层实现什么区别？hashtale和concurrenthashmap呢？</h3><p>hashtable是在HashMap代码基础上加锁实现的。<br><a href="/java/2018-03-30-hashmap/">HashMap</a></p>
<h3 id="4-hashmap和treemap-什么区别？底层数据结构呢？"><a href="#4-hashmap和treemap-什么区别？底层数据结构呢？" class="headerlink" title="4. hashmap和treemap 什么区别？底层数据结构呢？"></a>4. hashmap和treemap 什么区别？底层数据结构呢？</h3><p>treemap底层是一个红黑树。根据comparable计算key大小排序。</p>
<h3 id="5-线程池用过么？都有什么参数？底层如何实现的？"><a href="#5-线程池用过么？都有什么参数？底层如何实现的？" class="headerlink" title="5. 线程池用过么？都有什么参数？底层如何实现的？"></a>5. 线程池用过么？都有什么参数？底层如何实现的？</h3><p>coresize,maxmumsize,过期时间，单位，阻塞队列，线程工厂，拒绝策略</p>
<p>一个 ctl 变量可以包含两部分信息: 线程池的运行状态 (runState) 和线程池内有效线程的数量 (workerCount). 由于 int 型的变量是由32位二进制的数构成, 所以用 ctl 的高3位来表示线程池的运行状态, 用低29位来表示线程池内有效线程的数量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">// 集中数据状态</span><br><span class="line">private static final int RUNNING    = -1 &lt;&lt; COUNT_BITS;</span><br><span class="line">private static final int SHUTDOWN   =  0 &lt;&lt; COUNT_BITS;</span><br><span class="line">private static final int STOP       =  1 &lt;&lt; COUNT_BITS;</span><br><span class="line">private static final int TIDYING    =  2 &lt;&lt; COUNT_BITS;</span><br><span class="line">private static final int TERMINATED =  3 &lt;&lt; COUNT_BITS;</span><br><span class="line"></span><br><span class="line">// Integer占用4个字节，即32位，最高位为符号位。</span><br><span class="line">int c = ctl.get();</span><br><span class="line">// 线程数量小于核心线程数时</span><br><span class="line">if (workerCountOf(c) &lt; corePoolSize) &#123;</span><br><span class="line">  if (addWorker(command, true))</span><br><span class="line">      return;</span><br><span class="line">  c = ctl.get();</span><br><span class="line">&#125;</span><br><span class="line">// 如果线程还是运行状态，且阻塞队列可以添加成功</span><br><span class="line">if (isRunning(c) &amp;&amp; workQueue.offer(command)) &#123;</span><br><span class="line">  int recheck = ctl.get();</span><br><span class="line">  // 判断是否已经停止运行，如果是，则删除并拒绝任务</span><br><span class="line">  if (! isRunning(recheck) &amp;&amp; remove(command))</span><br><span class="line">      reject(command);</span><br><span class="line">  // 否则判断线程数量是否为0，如果不是则不处理。</span><br><span class="line">  else if (workerCountOf(recheck) == 0)</span><br><span class="line">      addWorker(null, false);</span><br><span class="line">&#125;</span><br><span class="line">else if (!addWorker(command, false))</span><br><span class="line">  reject(command);</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">private boolean addWorker(Runnable firstTask, boolean core) &#123;</span><br><span class="line">   retry:</span><br><span class="line">   for (;;) &#123;</span><br><span class="line">       int c = ctl.get();</span><br><span class="line">       // c &amp; ~CAPACITY  = -536870912</span><br><span class="line">       // 获取执行状态</span><br><span class="line">       int rs = runStateOf(c);</span><br><span class="line">       // Check if queue empty only if necessary.</span><br><span class="line">       // SHUTDOWN=0</span><br><span class="line">       // 如果执行状态大于等于SHUTDOWN，（如果状态为SHUTDOWN且firstTask==null且工作队列不为空）返回false</span><br><span class="line"></span><br><span class="line">       // 对于线程池处于SHUTDOWN（包含）以上状态（STOP、TIDYING、TERMINATED）时，有以下几种情况返回false</span><br><span class="line">       // 1. 状态不为SHUTDOWN时</span><br><span class="line">       // 2. 状态为SHUTDOWN且firstTask不为空时</span><br><span class="line">       // 3. 状态为SHUTDOWN且firstTask为空且队列为空时</span><br><span class="line">       if (rs &gt;= SHUTDOWN &amp;&amp;</span><br><span class="line">           ! (rs == SHUTDOWN &amp;&amp;</span><br><span class="line">              firstTask == null &amp;&amp;</span><br><span class="line">              ! workQueue.isEmpty()))</span><br><span class="line">           return false;</span><br><span class="line"></span><br><span class="line">       for (;;) &#123;</span><br><span class="line">           // 当前运行线程数量</span><br><span class="line">           int wc = workerCountOf(c);</span><br><span class="line">           // 超过最大线程池数量时返回false</span><br><span class="line">           if (wc &gt;= CAPACITY ||</span><br><span class="line">               wc &gt;= (core ? corePoolSize : maximumPoolSize))</span><br><span class="line">               return false;</span><br><span class="line">           // 线程池线程数量+1，CAS算法，并发情况下可能出现失败，失败则继续重试</span><br><span class="line">           if (compareAndIncrementWorkerCount(c))</span><br><span class="line">               break retry;</span><br><span class="line">           c = ctl.get();  // Re-read ctl</span><br><span class="line">           if (runStateOf(c) != rs)</span><br><span class="line">               continue retry;</span><br><span class="line">           // else CAS failed due to workerCount change; retry inner loop</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   // 下面就是增加线程，并启动线程的操作</span><br><span class="line">   boolean workerStarted = false;</span><br><span class="line">   boolean workerAdded = false;</span><br><span class="line">   Worker w = null;</span><br><span class="line">   try &#123;</span><br><span class="line">       w = new Worker(firstTask);</span><br><span class="line">       final Thread t = w.thread;</span><br><span class="line">       if (t != null) &#123;</span><br><span class="line">           final ReentrantLock mainLock = this.mainLock;</span><br><span class="line">           mainLock.lock();</span><br><span class="line">           try &#123;</span><br><span class="line">               // Recheck while holding lock.</span><br><span class="line">               // Back out on ThreadFactory failure or if</span><br><span class="line">               // shut down before lock acquired.</span><br><span class="line">               int rs = runStateOf(ctl.get());</span><br><span class="line"></span><br><span class="line">               if (rs &lt; SHUTDOWN ||</span><br><span class="line">                   (rs == SHUTDOWN &amp;&amp; firstTask == null)) &#123;</span><br><span class="line">                   if (t.isAlive()) // precheck that t is startable</span><br><span class="line">                       throw new IllegalThreadStateException();</span><br><span class="line">                   workers.add(w);</span><br><span class="line">                   int s = workers.size();</span><br><span class="line">                   if (s &gt; largestPoolSize)</span><br><span class="line">                       largestPoolSize = s;</span><br><span class="line">                   workerAdded = true;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125; finally &#123;</span><br><span class="line">               mainLock.unlock();</span><br><span class="line">           &#125;</span><br><span class="line">           if (workerAdded) &#123;</span><br><span class="line">               t.start();</span><br><span class="line">               workerStarted = true;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125; finally &#123;</span><br><span class="line">       if (! workerStarted)</span><br><span class="line">           addWorkerFailed(w);</span><br><span class="line">   &#125;</span><br><span class="line">   return workerStarted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Worker类，线程池中用来封装线程执行任务的类。这个类的理解很重要</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">private final class Worker</span><br><span class="line">        extends AbstractQueuedSynchronizer</span><br><span class="line">        implements Runnable</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">   private static final long serialVersionUID = 6138294804551838833L;</span><br><span class="line"></span><br><span class="line">   final Thread thread;</span><br><span class="line">   Runnable firstTask;</span><br><span class="line">   volatile long completedTasks;</span><br><span class="line"></span><br><span class="line">   Worker(Runnable firstTask) &#123;</span><br><span class="line">       setState(-1); </span><br><span class="line">       this.firstTask = firstTask;</span><br><span class="line">       // 从线程工厂获取线程，注意传的参数是当前实例</span><br><span class="line">       this.thread = getThreadFactory().newThread(this);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   // Worker本身实现Runable接口，所以会在线程中回调自己的run方法</span><br><span class="line">   public void run() &#123;</span><br><span class="line">       // 里面就是从阻塞队列或者是firstTask中获取任务执行的逻辑</span><br><span class="line">    </span><br><span class="line">       runWorker(this);</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   protected boolean isHeldExclusively() &#123;</span><br><span class="line">       return getState() != 0;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   protected boolean tryAcquire(int unused) &#123;</span><br><span class="line">       if (compareAndSetState(0, 1)) &#123;</span><br><span class="line">           setExclusiveOwnerThread(Thread.currentThread());</span><br><span class="line">           return true;</span><br><span class="line">       &#125;</span><br><span class="line">       return false;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   protected boolean tryRelease(int unused) &#123;</span><br><span class="line">       setExclusiveOwnerThread(null);</span><br><span class="line">       setState(0);</span><br><span class="line">       return true;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   public void lock()        &#123; acquire(1); &#125;</span><br><span class="line">   public boolean tryLock()  &#123; return tryAcquire(1); &#125;</span><br><span class="line">   public void unlock()      &#123; release(1); &#125;</span><br><span class="line">   public boolean isLocked() &#123; return isHeldExclusively(); &#125;</span><br><span class="line"></span><br><span class="line">   void interruptIfStarted() &#123;</span><br><span class="line">       Thread t;</span><br><span class="line">       if (getState() &gt;= 0 &amp;&amp; (t = thread) != null &amp;&amp; !t.isInterrupted()) &#123;</span><br><span class="line">           try &#123;</span><br><span class="line">               t.interrupt();</span><br><span class="line">           &#125; catch (SecurityException ignore) &#123;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="6-sychronized和Lock什么区别？sychronized什么情况是对象锁，什么时候是全局锁？为什么？"><a href="#6-sychronized和Lock什么区别？sychronized什么情况是对象锁，什么时候是全局锁？为什么？" class="headerlink" title="6. sychronized和Lock什么区别？sychronized什么情况是对象锁，什么时候是全局锁？为什么？"></a>6. sychronized和Lock什么区别？sychronized什么情况是对象锁，什么时候是全局锁？为什么？</h3><p>sychronized是JDK的同步关键字，即JDK的悲观锁实现。<br>sychronized自从1.6版本以来，进行很多优化（锁消除，锁粗化，偏量锁，轻量锁，重量锁（系统级别mutex Lock，即monitor）），目前性能和Lock差不多。<br>对象锁即对Java对象添加锁（sychronized），可以在非静态方法加锁，或者使用sychronized同步块时同步块参数为当前实例或者当前实例变量。<br>全局锁和对象锁类似，不过全局锁针对的是Class对象，一个类只有一个Class对象。全局锁是在静态方法上加锁，或者使用sychronized同步块时，参数为class对象，如String.class。<br>Lock锁基于底层CPU指令集实现的乐观锁。因为使用Java实现，所以根据不同的应用场景Lock锁可以分为冲入锁和非重入锁，公平锁和非公平锁，排他锁和共享锁。</p>
<h3 id="7-ThreadLocal是什么？底层如何实现？写一个例子？"><a href="#7-ThreadLocal是什么？底层如何实现？写一个例子？" class="headerlink" title="7. ThreadLocal是什么？底层如何实现？写一个例子？"></a>7. ThreadLocal是什么？底层如何实现？写一个例子？</h3><p>ThreadLocal是一个操作线程内部的Map的入口。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class ThreadLocal&#123;</span><br><span class="line"></span><br><span class="line">    public void put()&#123;</span><br><span class="line">        Thread thread = Thread.currentThread();</span><br><span class="line">        Map map = thead.getMap();</span><br><span class="line">        if(map==null)&#123;</span><br><span class="line">            map = new Thread.ThreadMap();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="8-volitile的工作原理？"><a href="#8-volitile的工作原理？" class="headerlink" title="8. volitile的工作原理？"></a>8. volitile的工作原理？</h3><h3 id="9-cas知道么？如何实现的？"><a href="#9-cas知道么？如何实现的？" class="headerlink" title="9. cas知道么？如何实现的？"></a>9. cas知道么？如何实现的？</h3><h3 id="10-请用至少四种写法？写一个单例模式？"><a href="#10-请用至少四种写法？写一个单例模式？" class="headerlink" title="10. 请用至少四种写法？写一个单例模式？"></a>10. 请用至少四种写法？写一个单例模式？</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">// 第一种 双重校验锁</span><br><span class="line">class Object&#123;</span><br><span class="line"></span><br><span class="line">    private Object()&#123;&#125;</span><br><span class="line">    public Object getInstance()&#123;</span><br><span class="line">        if(obj==null)&#123;</span><br><span class="line">            sychronized(this)&#123;</span><br><span class="line">                if(obj==null)&#123;</span><br><span class="line">                    obj = new Object();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 第二种 饿汉式</span><br><span class="line"></span><br><span class="line">private static Object obj = new Object();</span><br><span class="line"></span><br><span class="line">// 第三种 枚举，对反序列化比较友好</span><br><span class="line"></span><br><span class="line">public enum EnumTest &#123;</span><br><span class="line"></span><br><span class="line">    INSTANCE;</span><br><span class="line">    private Test test;</span><br><span class="line"></span><br><span class="line">    private EnumTest()&#123;</span><br><span class="line">        test = new Test();</span><br><span class="line">    &#125;</span><br><span class="line">    public Test getInstance()&#123;</span><br><span class="line">        return test;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">INSTANCE.getInstance()获取单例</span><br></pre></td></tr></table></figure>
<h3 id="11-Hashmap为什么不用平衡树？"><a href="#11-Hashmap为什么不用平衡树？" class="headerlink" title="11. Hashmap为什么不用平衡树？"></a>11. Hashmap为什么不用平衡树？</h3><ol>
<li>平衡二叉树：不知道会转换多少次</li>
<li>红黑树：最多不超过3次</li>
</ol>
<h3 id="12-Java有哪些队列？"><a href="#12-Java有哪些队列？" class="headerlink" title="12. Java有哪些队列？"></a>12. Java有哪些队列？</h3><p>非阻塞队列：<br>LinkedList : 实现了Deque接口，受限的队列<br>PriorityQueue ： 优先队列，本质维护一个有序列表。可自然排序亦可传递 comparator构造函数实现自定义排序。<br>ConcurrentLinkedQueue：基于链表 线程安全的队列。增加删除O(1) 查找O(n)</p>
<p>阻塞队列：<br>ArrayBlockingQueue： 基于数组的有界队列<br>LinkedBlockingQueue： 基于链表的无界队列<br>ProiporityBlockingQueue：基于优先次序的无界队列<br>DelayQueue：基于时间优先级的队列<br>SynchronousQueue：内部没有容器的队列 较特别 –其独有的线程一一配对通信机制</p>
<h3 id="13-HashMap了解么吗？说一下put方法过程"><a href="#13-HashMap了解么吗？说一下put方法过程" class="headerlink" title="13. HashMap了解么吗？说一下put方法过程"></a>13. HashMap了解么吗？说一下put方法过程</h3><p>put方法：</p>
<ol>
<li>判断当前hash表是否初始化，未初始化初始化</li>
<li>根据hash值判断当前节点是否为空</li>
<li>为空则赋值</li>
<li>不为空则判断key是否相等，相等则使用新值替换旧值</li>
<li>如果不相等则判断是节点类型，如果是树节点，则使用使用数增加</li>
<li>如果不是树，则判断链表的key是否相等，不相等则找到一个为null的节点赋值</li>
<li>最后判断size是否超过阀值，如果超过阀值，则resize</li>
</ol>
<p>resize方法：</p>
<ol>
<li>判断一下老的容量是否大于0，如果大于0则判断是否大于最大容量2^31，则使阀值为Integer.Max_Value。否则容量2倍，阀值2倍。</li>
<li>接着判断阀值是否大于0，如果大于0，则新容量等于旧阀值。</li>
<li>其他情况则使用默认容量，默认阀值</li>
<li>然后开始将就hash表中的node迁移至新的hash表中：a)如果i位置就一个node，则直接计算新的hash值，然后赋值，否则判断是否是树节点，如果是树，则拆分树，先把树拆分为上下两个树节点链表，如果小于阀值6，则取消树化。如果不是树，则对链表进行区分和转移。</li>
</ol>
<h3 id="14-HashMap是不是线程安全？"><a href="#14-HashMap是不是线程安全？" class="headerlink" title="14. HashMap是不是线程安全？"></a>14. HashMap是不是线程安全？</h3><p>不是线程安全的，容易造成值丢失。</p>
<h3 id="15-ConcurrentHashMap如何保证线程安全？"><a href="#15-ConcurrentHashMap如何保证线程安全？" class="headerlink" title="15. ConcurrentHashMap如何保证线程安全？"></a>15. ConcurrentHashMap如何保证线程安全？</h3><p>cas算法和sychronized锁</p>
<h3 id="16-深入问了乐观锁，悲观锁及其实现。"><a href="#16-深入问了乐观锁，悲观锁及其实现。" class="headerlink" title="16. 深入问了乐观锁，悲观锁及其实现。"></a>16. 深入问了乐观锁，悲观锁及其实现。</h3><h3 id="17-设计模式了解吗？讲一下"><a href="#17-设计模式了解吗？讲一下" class="headerlink" title="17. 设计模式了解吗？讲一下"></a>17. 设计模式了解吗？讲一下</h3><h3 id="18-private-修饰的方法可以通过反射访问，那么private意义是什么？"><a href="#18-private-修饰的方法可以通过反射访问，那么private意义是什么？" class="headerlink" title="18. private 修饰的方法可以通过反射访问，那么private意义是什么？"></a>18. private 修饰的方法可以通过反射访问，那么private意义是什么？</h3><p>简单来说，private并不是解决“安全”问题的。</p>
<p>private想表达的不是“安全性”的意思，而是OOP的封装概念。继承、封装、多态。</p>
<h3 id="19-Java类的初始化顺序？"><a href="#19-Java类的初始化顺序？" class="headerlink" title="19. Java类的初始化顺序？"></a>19. Java类的初始化顺序？</h3><p>类加载 - 连接（验证-准备-解析）-初始化</p>
<p>加载：加载二进制流，将静态的运行时数据结构加载到元空间（方法区），生成Class对象存储在元空间上。<br>连接：验证文件格式验证、元数据验证、字节码验证、符号引用验证；准备类变量的空间，给类变量赋初始值；解析，将符号引用（比如我们引用java.lang.Object类，在二进制class文件中，Ljava.lang.Object就是符号引用，在调用invoke之类的虚拟机指令操作Object类时，这个符号引用必须转化为Object的真实地址）转为直接引用。<br>初始化：将类变量初始化赋值。</p>
<h3 id="20-对方法区和永久区的理解以及它们之间的关系？"><a href="#20-对方法区和永久区的理解以及它们之间的关系？" class="headerlink" title="20. 对方法区和永久区的理解以及它们之间的关系？"></a>20. 对方法区和永久区的理解以及它们之间的关系？</h3><p>方法区就是永久区，在1.7及1.7之前，方法区用于存储类的元信息，运行时常量池等，不会涉及到垃圾回收，所以被称为永久区。</p>
<h3 id="21-一个Java文件有3个类编译后有几个类文件？"><a href="#21-一个Java文件有3个类编译后有几个类文件？" class="headerlink" title="21. 一个Java文件有3个类编译后有几个类文件？"></a>21. 一个Java文件有3个类编译后有几个类文件？</h3><p>3个</p>
<h3 id="22-局部变量使用前需要显式的赋值，否则编译不通过，为什么？"><a href="#22-局部变量使用前需要显式的赋值，否则编译不通过，为什么？" class="headerlink" title="22. 局部变量使用前需要显式的赋值，否则编译不通过，为什么？"></a>22. 局部变量使用前需要显式的赋值，否则编译不通过，为什么？</h3><p>局部变量，赋值、取值顺序确定。所以局部变量赋值使用，是一种设计约束，减少犯错的可能性。如果局部变量默认赋值了，可能会有很多忘记赋值的，从而出现不可预期的情况。</p>
<h3 id="23-ReadWriteLock读写之间互斥么？"><a href="#23-ReadWriteLock读写之间互斥么？" class="headerlink" title="23. ReadWriteLock读写之间互斥么？"></a>23. ReadWriteLock读写之间互斥么？</h3><p><img src="/media/article/lock-class.png" alt="lock-class"></p>
<p>我们先说下简单方式下的ReetrantLock，我们声明一个重入锁实例，实际上声明的是Sync的一个同步器，当我们lock锁的时候，首先修改state状态，然后设置排他线程。当有多个线程同步访问时，只有一个线程可以拿到锁，其他的都存放在链表中，LockSupport.park阻塞等待。释放锁后唤醒下一个节点的线程。</p>
<p>读写锁，分为两种锁，一种是读锁，是共享锁，一个是写锁排他锁。<br>读锁：首先获取当前的锁状态，判断是否排他锁，如果是则直接返回-1。接着判断是否需要等待（如果链表的第二个节点不为空且是写锁，则需要等待）、是否超过最大共享锁数量、cas读锁数量+1，如果全为true，则判断是否是第一个读锁，如果是则firstReader=current、firstReaderHolderCount=1，如果不是第一个读锁，则判断是否是同一个线程，如果是firstReaderHolderCount+1，其他的情况则使用每个线程的计数器+1，最后返回1。如果其中一个为false，则做其他处理。<br>写锁和ReetrantLock一致。</p>
<p>Lock锁使用CAS和LockSupport实现独占锁。</p>
<h3 id="24-写一个你认为最好的单例模式"><a href="#24-写一个你认为最好的单例模式" class="headerlink" title="24. 写一个你认为最好的单例模式"></a>24. 写一个你认为最好的单例模式</h3><p>没有最好，只有更合适的。1. 饿汉式 静态变量；2. 懒汉式 双重校验锁，枚举，静态内部类</p>
<h3 id="25-B树和B-树是解决什么样的问题的，怎样演化的，之间的区别？"><a href="#25-B树和B-树是解决什么样的问题的，怎样演化的，之间的区别？" class="headerlink" title="25. B树和B+树是解决什么样的问题的，怎样演化的，之间的区别？"></a>25. B树和B+树是解决什么样的问题的，怎样演化的，之间的区别？</h3><h3 id="26-写一个生产者和消费者模式"><a href="#26-写一个生产者和消费者模式" class="headerlink" title="26. 写一个生产者和消费者模式"></a>26. 写一个生产者和消费者模式</h3><h3 id="27-写一个死锁"><a href="#27-写一个死锁" class="headerlink" title="27. 写一个死锁"></a>27. 写一个死锁</h3><p>public class Test {</p>
<pre><code>public static void main(String[] args) {
    A a = new A();
    B b = new B();
    new Thread(new Runnable() {
        @Override
        public void run() {
            a.setB(b);
        }
    }).start();

    new Thread(new Runnable() {
        @Override
        public void run() {
                b.setC(a);

        }
    }).start();
}
</code></pre><p>}<br>class A{</p>
<pre><code>public synchronized int getB() {
    return b;
}

@SneakyThrows
public synchronized void setB(B b) {
    this.b = 1;
    Thread.sleep(1000);
    b.getC();

}

private int b = 3;
</code></pre><p>}</p>
<p>class B{</p>
<pre><code>private int c = 4;

public synchronized int getC() {
    return c;
}

@SneakyThrows
public synchronized void setC(A a) {
    this.c = 1;
    Thread.sleep(1000);
    a.getB();
}
</code></pre><p>}</p>
<h3 id="28-cpu-100-定位"><a href="#28-cpu-100-定位" class="headerlink" title="28. cpu 100%定位"></a>28. cpu 100%定位</h3><ol>
<li>top 命令找到消耗cpu进程最大的进程，命令为top，然后再T。</li>
<li>top根据进程pid找到消耗最大的线程pid，top -Hs -p [进程pid]</li>
<li>printf “%#x” [线程pid]</li>
<li>jstack -p [线程pid]|grep [线程pid16进制码]</li>
<li>查看方法栈信息，了解为何占用如此多的cpu资源。</li>
</ol>
<h3 id="29-String-a-”ab”-String-b-“a”-”b”-a-b是否相等，为什么。"><a href="#29-String-a-”ab”-String-b-“a”-”b”-a-b是否相等，为什么。" class="headerlink" title="29. String a=”ab”;String b = “a”+”b”;a==b是否相等，为什么。"></a>29. String a=”ab”;String b = “a”+”b”;a==b是否相等，为什么。</h3><p>相等，因为String a=”ab”;声明后，a就存储在常量池中。b = “a”+”b”;计算结果也为”ab”，”ab”在常量池中已经存在，所以相等。</p>
<p>String#intern方法是判断常量池中是否存在该字符串，如果存在则返回这个字符串，否则将字符串放入常量池返回。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String s3 = new String(&quot;1&quot;) + new String(&quot;1&quot;);</span><br><span class="line">s3.intern();</span><br><span class="line">String s4 = &quot;11&quot;;</span><br><span class="line">System.out.println(s3 == s4);</span><br></pre></td></tr></table></figure>
<p>上述代码可以很好的范颖jdk1.6 和 jdk1.8版本的区别，1.6版本常量池在方法区，所以s3是堆上的对象，所以s3和s4不相等。1.8版本中，常量池放到了堆内存区域，声明s3实例后，intern方法发现常量池没有，则不会再新建s3对象而是将常量池中的引用指向s3。s4声明得到的引用和s3一致，所以相等。</p>
<h3 id="30-String，-StringBuffer，-StringBuilder区别。"><a href="#30-String，-StringBuffer，-StringBuilder区别。" class="headerlink" title="30. String， StringBuffer， StringBuilder区别。"></a>30. String， StringBuffer， StringBuilder区别。</h3><h3 id="31-Comparable、Comparator接口的实现"><a href="#31-Comparable、Comparator接口的实现" class="headerlink" title="31. Comparable、Comparator接口的实现"></a>31. Comparable、Comparator接口的实现</h3><p>Comparator接口主要是为了声明外部比较器。<br>Comparable是对象类需要实现的比较器，也就是该类支持排序。</p>
<h2 id="高并发"><a href="#高并发" class="headerlink" title="高并发"></a>高并发</h2><h3 id="1-AQS知道吗？知道哪一些呢？讲一讲。"><a href="#1-AQS知道吗？知道哪一些呢？讲一讲。" class="headerlink" title="1. AQS知道吗？知道哪一些呢？讲一讲。"></a>1. AQS知道吗？知道哪一些呢？讲一讲。</h3><p>AQS是一个队列同步器，主要是通过CAS算法和LockSupport两个组件实现，<br>ReentrantLock等锁实现就是基于此类。<br>CAS算法保证排他性。LockSupport将需要阻塞的线程阻塞。</p>
<h3 id="2-CLH同步队列是怎么实现非公平和公平的？"><a href="#2-CLH同步队列是怎么实现非公平和公平的？" class="headerlink" title="2. CLH同步队列是怎么实现非公平和公平的？"></a>2. CLH同步队列是怎么实现非公平和公平的？</h3><h3 id="3-ReetrantLock和synchronized的区别"><a href="#3-ReetrantLock和synchronized的区别" class="headerlink" title="3. ReetrantLock和synchronized的区别"></a>3. ReetrantLock和synchronized的区别</h3><h3 id="4-如何才能得到一个线程安全的HashMap？"><a href="#4-如何才能得到一个线程安全的HashMap？" class="headerlink" title="4. 如何才能得到一个线程安全的HashMap？"></a>4. 如何才能得到一个线程安全的HashMap？</h3><ol>
<li>就是加锁，如hashtable</li>
<li>cas算法+局部锁，如ConcurrentHashMap</li>
</ol>
<h3 id="5-线程池的参数"><a href="#5-线程池的参数" class="headerlink" title="5. 线程池的参数"></a>5. 线程池的参数</h3><p>核心，最大，过期时间单位，过期时间，队列大小，默认线程工厂，拒绝策略</p>
<h3 id="6-CAS的问题，讲一下解决方案。"><a href="#6-CAS的问题，讲一下解决方案。" class="headerlink" title="6. CAS的问题，讲一下解决方案。"></a>6. CAS的问题，讲一下解决方案。</h3><p>CAS算法的ABA问题，添加Stamp标识。</p>
<h3 id="7-有没有更好的计数器解决策略"><a href="#7-有没有更好的计数器解决策略" class="headerlink" title="7. 有没有更好的计数器解决策略"></a>7. 有没有更好的计数器解决策略</h3><h3 id="8-原子变量的实现原理"><a href="#8-原子变量的实现原理" class="headerlink" title="8. 原子变量的实现原理"></a>8. 原子变量的实现原理</h3><p>CAS算法</p>
<h3 id="9-wait-和sleep-的区别"><a href="#9-wait-和sleep-的区别" class="headerlink" title="9. wait()和sleep()的区别"></a>9. wait()和sleep()的区别</h3><p>wait释放锁，是waiting状态，且必须有其他线程唤醒。</p>
<p>sleep不释放锁，timed_waiting状态，时间到了自己可以转换为就绪状态。</p>
<p>yield方法也不释放锁，只是让出cpu资源，然后变为就绪状态。</p>
<h3 id="10-线程池的原理以及各种线程池的应用场景"><a href="#10-线程池的原理以及各种线程池的应用场景" class="headerlink" title="10. 线程池的原理以及各种线程池的应用场景"></a>10. 线程池的原理以及各种线程池的应用场景</h3><p>原理：核心-队列-最大-拒绝。</p>
<p>单一线程：无界队列<br>最大线程数：无容量的队列<br>定时线程池：延时队列<br>定数线程：无界队列</p>
<h3 id="11-线程池中使用有限的阻塞队列和无限的阻塞队列的区别"><a href="#11-线程池中使用有限的阻塞队列和无限的阻塞队列的区别" class="headerlink" title="11. 线程池中使用有限的阻塞队列和无限的阻塞队列的区别"></a>11. 线程池中使用有限的阻塞队列和无限的阻塞队列的区别</h3><p>阻塞队列可以在数据为空时阻塞，有数据后会被唤醒。</p>
<p>有限阻塞队列可以使用固定大小的队列，对于内存资源消耗比较具体，不容易出现OOM问题。<br>无限阻塞队列没有上线，对内存资源消耗没有限制，容易出现OOM问题。</p>
<h2 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h2><h3 id="1-请介绍一下JVM内存模型？用过什么垃圾回收器，都说说？"><a href="#1-请介绍一下JVM内存模型？用过什么垃圾回收器，都说说？" class="headerlink" title="1. 请介绍一下JVM内存模型？用过什么垃圾回收器，都说说？"></a>1. 请介绍一下JVM内存模型？用过什么垃圾回收器，都说说？</h3><p>运行时内存区域：</p>
<ol>
<li>堆：实例对象存储的地方，运行时常量池</li>
<li>方法区（元空间）： 存储类元信息，比如类变量等等。</li>
<li>Java方法栈</li>
<li>本地方法栈。</li>
<li>程序计数器。</li>
<li>serial,serial Old, par new , par old, G1 </li>
</ol>
<h3 id="2-线上发送频繁full-gc如何处理？CPU使用率过高怎么办？如何定位问题？如何解决？说一下解决思路和处理方法。"><a href="#2-线上发送频繁full-gc如何处理？CPU使用率过高怎么办？如何定位问题？如何解决？说一下解决思路和处理方法。" class="headerlink" title="2. 线上发送频繁full gc如何处理？CPU使用率过高怎么办？如何定位问题？如何解决？说一下解决思路和处理方法。"></a>2. 线上发送频繁full gc如何处理？CPU使用率过高怎么办？如何定位问题？如何解决？说一下解决思路和处理方法。</h3><h3 id="3-知道字节码么？字节码都有那些？Integer-5-int-y-5-比较x-y-都经过那些步骤？"><a href="#3-知道字节码么？字节码都有那些？Integer-5-int-y-5-比较x-y-都经过那些步骤？" class="headerlink" title="3. 知道字节码么？字节码都有那些？Integer * 5,int y=5, 比较x==y 都经过那些步骤？"></a>3. 知道字节码么？字节码都有那些？Integer * 5,int y=5, 比较x==y 都经过那些步骤？</h3><h3 id="4-讲讲类加载机制？都有哪些类加载器，这些类加载器都加载哪些文件？手写一下类加载Demo"><a href="#4-讲讲类加载机制？都有哪些类加载器，这些类加载器都加载哪些文件？手写一下类加载Demo" class="headerlink" title="4. 讲讲类加载机制？都有哪些类加载器，这些类加载器都加载哪些文件？手写一下类加载Demo"></a>4. 讲讲类加载机制？都有哪些类加载器，这些类加载器都加载哪些文件？手写一下类加载Demo</h3><h3 id="5-知道osgi么？他是如何实现的？"><a href="#5-知道osgi么？他是如何实现的？" class="headerlink" title="5. 知道osgi么？他是如何实现的？"></a>5. 知道osgi么？他是如何实现的？</h3><h3 id="6-请问你做过哪些JVM优化？使用什么方法？达到什么效果？"><a href="#6-请问你做过哪些JVM优化？使用什么方法？达到什么效果？" class="headerlink" title="6. 请问你做过哪些JVM优化？使用什么方法？达到什么效果？"></a>6. 请问你做过哪些JVM优化？使用什么方法？达到什么效果？</h3><h3 id="7-class-forName-“java-lang-String”-和String-class-getClassLoader-loadClass-“java-lang-String”-什么区别？"><a href="#7-class-forName-“java-lang-String”-和String-class-getClassLoader-loadClass-“java-lang-String”-什么区别？" class="headerlink" title="7. class.forName(“java.lang.String”)和String.class.getClassLoader.loadClass(“java.lang.String”)什么区别？"></a>7. class.forName(“java.lang.String”)和String.class.getClassLoader.loadClass(“java.lang.String”)什么区别？</h3><h3 id="8-讲一下JVM的内存结构"><a href="#8-讲一下JVM的内存结构" class="headerlink" title="8. 讲一下JVM的内存结构"></a>8. 讲一下JVM的内存结构</h3><h3 id="9-JVM-里-new-对象时，堆会发生抢占吗？你是怎么去设计JVM的堆的线程安全的？"><a href="#9-JVM-里-new-对象时，堆会发生抢占吗？你是怎么去设计JVM的堆的线程安全的？" class="headerlink" title="9. JVM 里 new 对象时，堆会发生抢占吗？你是怎么去设计JVM的堆的线程安全的？"></a>9. JVM 里 new 对象时，堆会发生抢占吗？你是怎么去设计JVM的堆的线程安全的？</h3><h3 id="10-讲一下JVM常用垃圾回收期？"><a href="#10-讲一下JVM常用垃圾回收期？" class="headerlink" title="10. 讲一下JVM常用垃圾回收期？"></a>10. 讲一下JVM常用垃圾回收期？</h3><h3 id="11-JVM内存模型"><a href="#11-JVM内存模型" class="headerlink" title="11. JVM内存模型"></a>11. JVM内存模型</h3><h3 id="12-Java怎么加载类？"><a href="#12-Java怎么加载类？" class="headerlink" title="12. Java怎么加载类？"></a>12. Java怎么加载类？</h3><h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><h3 id="1-spring都有哪些机制？AOP底层如何实现的？IOC？"><a href="#1-spring都有哪些机制？AOP底层如何实现的？IOC？" class="headerlink" title="1. spring都有哪些机制？AOP底层如何实现的？IOC？"></a>1. spring都有哪些机制？AOP底层如何实现的？IOC？</h3><h3 id="2-cglib知道么？它和JDK动态代理有什么区别？手写一个jdk动态代理？"><a href="#2-cglib知道么？它和JDK动态代理有什么区别？手写一个jdk动态代理？" class="headerlink" title="2. cglib知道么？它和JDK动态代理有什么区别？手写一个jdk动态代理？"></a>2. cglib知道么？它和JDK动态代理有什么区别？手写一个jdk动态代理？</h3><h3 id="3-如何解决bean的循环依赖问题？"><a href="#3-如何解决bean的循环依赖问题？" class="headerlink" title="3. 如何解决bean的循环依赖问题？"></a>3. 如何解决bean的循环依赖问题？</h3><h3 id="4-讲一讲Spring和Springboot的区别"><a href="#4-讲一讲Spring和Springboot的区别" class="headerlink" title="4. 讲一讲Spring和Springboot的区别"></a>4. 讲一讲Spring和Springboot的区别</h3><h3 id="5-讲一下ORM框架Hibernate"><a href="#5-讲一下ORM框架Hibernate" class="headerlink" title="5. 讲一下ORM框架Hibernate"></a>5. 讲一下ORM框架Hibernate</h3><h3 id="6-Spring-AOP原理是什么？怎么使用？什么是切点，什么是切面？最好是举个例子"><a href="#6-Spring-AOP原理是什么？怎么使用？什么是切点，什么是切面？最好是举个例子" class="headerlink" title="6. Spring AOP原理是什么？怎么使用？什么是切点，什么是切面？最好是举个例子"></a>6. Spring AOP原理是什么？怎么使用？什么是切点，什么是切面？最好是举个例子</h3><h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="1-使用mysql索引都有哪些原则？索引什么数据结构？B-tree和B-tree什么区别？"><a href="#1-使用mysql索引都有哪些原则？索引什么数据结构？B-tree和B-tree什么区别？" class="headerlink" title="1. 使用mysql索引都有哪些原则？索引什么数据结构？B+tree和B tree什么区别？"></a>1. 使用mysql索引都有哪些原则？索引什么数据结构？B+tree和B tree什么区别？</h3><h3 id="2-mysql有哪些存储引擎啊？都有啥区别？要详细？"><a href="#2-mysql有哪些存储引擎啊？都有啥区别？要详细？" class="headerlink" title="2. mysql有哪些存储引擎啊？都有啥区别？要详细？"></a>2. mysql有哪些存储引擎啊？都有啥区别？要详细？</h3><h3 id="3-设计高并发系统数据库层面该怎么设计？数据库锁有哪些类型？如何实现？"><a href="#3-设计高并发系统数据库层面该怎么设计？数据库锁有哪些类型？如何实现？" class="headerlink" title="3. 设计高并发系统数据库层面该怎么设计？数据库锁有哪些类型？如何实现？"></a>3. 设计高并发系统数据库层面该怎么设计？数据库锁有哪些类型？如何实现？</h3><h3 id="4-数据库事务有哪些？"><a href="#4-数据库事务有哪些？" class="headerlink" title="4. 数据库事务有哪些？"></a>4. 数据库事务有哪些？</h3><h3 id="5-讲一讲MySQL的索引结构？"><a href="#5-讲一讲MySQL的索引结构？" class="headerlink" title="5. 讲一讲MySQL的索引结构？"></a>5. 讲一讲MySQL的索引结构？</h3><h3 id="6-你设计的数据库遵循的范式？"><a href="#6-你设计的数据库遵循的范式？" class="headerlink" title="6.你设计的数据库遵循的范式？"></a>6.你设计的数据库遵循的范式？</h3><h3 id="7-讲一下B树和B-树的区别"><a href="#7-讲一下B树和B-树的区别" class="headerlink" title="7. 讲一下B树和B+树的区别"></a>7. 讲一下B树和B+树的区别</h3><h3 id="8-数据库索引了解吗？讲一下"><a href="#8-数据库索引了解吗？讲一下" class="headerlink" title="8. 数据库索引了解吗？讲一下"></a>8. 数据库索引了解吗？讲一下</h3><h3 id="9-自己实现一个二阶段提交，如何设计？"><a href="#9-自己实现一个二阶段提交，如何设计？" class="headerlink" title="9. 自己实现一个二阶段提交，如何设计？"></a>9. 自己实现一个二阶段提交，如何设计？</h3><h3 id="10-如果你发现你的sql语句始终走另一个索引，但是你希望它走你想要的索引，怎么办？"><a href="#10-如果你发现你的sql语句始终走另一个索引，但是你希望它走你想要的索引，怎么办？" class="headerlink" title="10. 如果你发现你的sql语句始终走另一个索引，但是你希望它走你想要的索引，怎么办？"></a>10. 如果你发现你的sql语句始终走另一个索引，但是你希望它走你想要的索引，怎么办？</h3><h3 id="11-mysql执行计划"><a href="#11-mysql执行计划" class="headerlink" title="11. mysql执行计划"></a>11. mysql执行计划</h3><h3 id="12-数据库索引为什么用b-树？"><a href="#12-数据库索引为什么用b-树？" class="headerlink" title="12. 数据库索引为什么用b+树？"></a>12. 数据库索引为什么用b+树？</h3><h3 id="13-你在做sql优化主要从哪几个方面做，用到哪些方法工具？"><a href="#13-你在做sql优化主要从哪几个方面做，用到哪些方法工具？" class="headerlink" title="13. 你在做sql优化主要从哪几个方面做，用到哪些方法工具？"></a>13. 你在做sql优化主要从哪几个方面做，用到哪些方法工具？</h3><h2 id="分库分表"><a href="#分库分表" class="headerlink" title="分库分表"></a>分库分表</h2><h3 id="1-如何设计可以动态扩容缩容的分库分表方案？"><a href="#1-如何设计可以动态扩容缩容的分库分表方案？" class="headerlink" title="1. 如何设计可以动态扩容缩容的分库分表方案？"></a>1. 如何设计可以动态扩容缩容的分库分表方案？</h3><h3 id="2-用过哪些分库分表的中间件，有啥优点和缺点，讲一下你了解的分库分表中间件的底层实现原理。"><a href="#2-用过哪些分库分表的中间件，有啥优点和缺点，讲一下你了解的分库分表中间件的底层实现原理。" class="headerlink" title="2. 用过哪些分库分表的中间件，有啥优点和缺点，讲一下你了解的分库分表中间件的底层实现原理。"></a>2. 用过哪些分库分表的中间件，有啥优点和缺点，讲一下你了解的分库分表中间件的底层实现原理。</h3><h3 id="3-我现在有一个未分库分表的系统，以后系统需要分库分表，如何设计，让未分库分表的系统动态切换到分库分表系统上？"><a href="#3-我现在有一个未分库分表的系统，以后系统需要分库分表，如何设计，让未分库分表的系统动态切换到分库分表系统上？" class="headerlink" title="3. 我现在有一个未分库分表的系统，以后系统需要分库分表，如何设计，让未分库分表的系统动态切换到分库分表系统上？"></a>3. 我现在有一个未分库分表的系统，以后系统需要分库分表，如何设计，让未分库分表的系统动态切换到分库分表系统上？</h3><h3 id="4-分布式事务知道么？-你们怎么解决的？-TCC-那若出现网络原因，网络连不通怎么办啊？"><a href="#4-分布式事务知道么？-你们怎么解决的？-TCC-那若出现网络原因，网络连不通怎么办啊？" class="headerlink" title="4. 分布式事务知道么？ 你们怎么解决的？ TCC?那若出现网络原因，网络连不通怎么办啊？"></a>4. 分布式事务知道么？ 你们怎么解决的？ TCC?那若出现网络原因，网络连不通怎么办啊？</h3><h3 id="5-为什么分库分表？"><a href="#5-为什么分库分表？" class="headerlink" title="5. 为什么分库分表？"></a>5. 为什么分库分表？</h3><h3 id="6-分布式寻址方式都有哪些算法？知道一致hash么？手写一下Java实现代码？你若userId取模分片，那我要查一段连续时间里的数据怎么办？"><a href="#6-分布式寻址方式都有哪些算法？知道一致hash么？手写一下Java实现代码？你若userId取模分片，那我要查一段连续时间里的数据怎么办？" class="headerlink" title="6. 分布式寻址方式都有哪些算法？知道一致hash么？手写一下Java实现代码？你若userId取模分片，那我要查一段连续时间里的数据怎么办？"></a>6. 分布式寻址方式都有哪些算法？知道一致hash么？手写一下Java实现代码？你若userId取模分片，那我要查一段连续时间里的数据怎么办？</h3><h3 id="7-如何解决分库分表主键问题？有什么实现方案？"><a href="#7-如何解决分库分表主键问题？有什么实现方案？" class="headerlink" title="7. 如何解决分库分表主键问题？有什么实现方案？"></a>7. 如何解决分库分表主键问题？有什么实现方案？</h3><h2 id="分布式缓存"><a href="#分布式缓存" class="headerlink" title="分布式缓存"></a>分布式缓存</h2><h3 id="1-redis和memched-什么区别？为什么单线程的redis比多线程的memched效率要高？"><a href="#1-redis和memched-什么区别？为什么单线程的redis比多线程的memched效率要高？" class="headerlink" title="1. redis和memched 什么区别？为什么单线程的redis比多线程的memched效率要高？"></a>1. redis和memched 什么区别？为什么单线程的redis比多线程的memched效率要高？</h3><p>区别：存储的数据类型； 持久化；多线程；</p>
<p>相同点：基于内存；</p>
<p>redis 也不会比memcached快？<br>毕竟redis是单线程处理请求，最高的qps是10w左右。<br>而memcached最高可达到几十w的qps。<br>redis单线程，所以在一些批量数据查询或者数据较大的情况下，还是memcached效率较高。</p>
<h3 id="2-redis有什么数据类型？都在哪些场景下使用？"><a href="#2-redis有什么数据类型？都在哪些场景下使用？" class="headerlink" title="2. redis有什么数据类型？都在哪些场景下使用？"></a>2. redis有什么数据类型？都在哪些场景下使用？</h3><p>五种对象：字符串、列表、字典、Set、Sorted Set</p>
<p>字符串：key-value，支持数字的原子相加相减。<br>列表：双队列，栈<br>字典：基本Map和也可以是对象。用于存储当前key的属性<br>集合：Set<br>有序集合： 带有顺序的有序集合，根据score排序。<br>位数组：setbit、getbit、bitop、bitcount: 表和swar算法<br>HyperLogLogs: HyperLogLog 是用来做基数统计的算法，HyperLogLog 的优点是，在输入元素的数量或者体积非常非常大时，计算基数所需的空间总是固定 的、并且是很小的。<br>Streams: Redis版本的消息队列</p>
<h3 id="3-redis的主从复制是怎么实现的？redis的集群模式是如何实现的呢？redis的key是如何寻址的？"><a href="#3-redis的主从复制是怎么实现的？redis的集群模式是如何实现的呢？redis的key是如何寻址的？" class="headerlink" title="3. redis的主从复制是怎么实现的？redis的集群模式是如何实现的呢？redis的key是如何寻址的？"></a>3. redis的主从复制是怎么实现的？redis的集群模式是如何实现的呢？redis的key是如何寻址的？</h3><h3 id="4-键的空转时长，引用数，垃圾回收，过期策略关系？"><a href="#4-键的空转时长，引用数，垃圾回收，过期策略关系？" class="headerlink" title="4. 键的空转时长，引用数，垃圾回收，过期策略关系？"></a>4. 键的空转时长，引用数，垃圾回收，过期策略关系？</h3><h3 id="4-使用redis如何设计分布式锁？使用zk可以么？如何实现？这两种哪个效率更高？"><a href="#4-使用redis如何设计分布式锁？使用zk可以么？如何实现？这两种哪个效率更高？" class="headerlink" title="4. 使用redis如何设计分布式锁？使用zk可以么？如何实现？这两种哪个效率更高？"></a>4. 使用redis如何设计分布式锁？使用zk可以么？如何实现？这两种哪个效率更高？</h3><h3 id="5-知道redis的持久化么？有什么优点和缺点？具体底层实现呢？"><a href="#5-知道redis的持久化么？有什么优点和缺点？具体底层实现呢？" class="headerlink" title="5. 知道redis的持久化么？有什么优点和缺点？具体底层实现呢？"></a>5. 知道redis的持久化么？有什么优点和缺点？具体底层实现呢？</h3><h3 id="6-redis过期策略都有哪些？LRU？写一下Java版本代码？"><a href="#6-redis过期策略都有哪些？LRU？写一下Java版本代码？" class="headerlink" title="6. redis过期策略都有哪些？LRU？写一下Java版本代码？"></a>6. redis过期策略都有哪些？LRU？写一下Java版本代码？</h3><h3 id="7-讲一下redis的数据结构"><a href="#7-讲一下redis的数据结构" class="headerlink" title="7. 讲一下redis的数据结构"></a>7. 讲一下redis的数据结构</h3><h3 id="8-redis缓存同步问题"><a href="#8-redis缓存同步问题" class="headerlink" title="8. redis缓存同步问题"></a>8. redis缓存同步问题</h3><h3 id="9-redis分布式锁"><a href="#9-redis分布式锁" class="headerlink" title="9. redis分布式锁"></a>9. redis分布式锁</h3><h3 id="10-在项目中，并发量大的情况下，如何才能够保证数据的一致性？"><a href="#10-在项目中，并发量大的情况下，如何才能够保证数据的一致性？" class="headerlink" title="10. 在项目中，并发量大的情况下，如何才能够保证数据的一致性？"></a>10. 在项目中，并发量大的情况下，如何才能够保证数据的一致性？</h3><h3 id="11-为什么使用Redis作为缓存"><a href="#11-为什么使用Redis作为缓存" class="headerlink" title="11. 为什么使用Redis作为缓存"></a>11. 为什么使用Redis作为缓存</h3><h3 id="12-讲一下Redis分布式锁的实现"><a href="#12-讲一下Redis分布式锁的实现" class="headerlink" title="12. 讲一下Redis分布式锁的实现"></a>12. 讲一下Redis分布式锁的实现</h3><h3 id="13-讲一下redis的数据类型和使用场景"><a href="#13-讲一下redis的数据类型和使用场景" class="headerlink" title="13. 讲一下redis的数据类型和使用场景"></a>13. 讲一下redis的数据类型和使用场景</h3><p>（0）redis为什么是key，value的，为什么不是支持SQL的？<br>（1）redis是多线程还是单线程？（回答单线程的请回吧，为什么请回，请往下看）<br>（2）redis的持久化开启了RDB和AOF下重启服务是如何加载的？(10个人9个回答错误)<br>（3）redis如果做集群该如何规划？AKF/CAP如何实现和设计？<br>（4）10万用户一年365天的登录情况如何用redis存储，并快速检索任意时间窗内的活跃用户？<br>（5）redis的5种Value类型你用过几种，能举例吗？<br>（6）100万并发4G数据，10万并发400G数据，如何设计Redis存储方式？</p>
<h2 id="分布式服务框架"><a href="#分布式服务框架" class="headerlink" title="分布式服务框架"></a>分布式服务框架</h2><h3 id="1-说一下dubbo的实现过程，注册中心挂了可以继续通信么？"><a href="#1-说一下dubbo的实现过程，注册中心挂了可以继续通信么？" class="headerlink" title="1. 说一下dubbo的实现过程，注册中心挂了可以继续通信么？"></a>1. 说一下dubbo的实现过程，注册中心挂了可以继续通信么？</h3><h3 id="2-zk原理知道么？zk都可以干什么？paxos算法知道么？说一下原理和实现？"><a href="#2-zk原理知道么？zk都可以干什么？paxos算法知道么？说一下原理和实现？" class="headerlink" title="2. zk原理知道么？zk都可以干什么？paxos算法知道么？说一下原理和实现？"></a>2. zk原理知道么？zk都可以干什么？paxos算法知道么？说一下原理和实现？</h3><h3 id="3-dubbo支持哪些序列化协议？hessian？说一下hessian的数据结构？PB知道么？为啥PB效率是最高的？"><a href="#3-dubbo支持哪些序列化协议？hessian？说一下hessian的数据结构？PB知道么？为啥PB效率是最高的？" class="headerlink" title="3. dubbo支持哪些序列化协议？hessian？说一下hessian的数据结构？PB知道么？为啥PB效率是最高的？"></a>3. dubbo支持哪些序列化协议？hessian？说一下hessian的数据结构？PB知道么？为啥PB效率是最高的？</h3><h3 id="4-知道netty么？netty可以干嘛？NIO-BIO-AIO都是什么啊？有什么区别？"><a href="#4-知道netty么？netty可以干嘛？NIO-BIO-AIO都是什么啊？有什么区别？" class="headerlink" title="4. 知道netty么？netty可以干嘛？NIO,BIO,AIO都是什么啊？有什么区别？"></a>4. 知道netty么？netty可以干嘛？NIO,BIO,AIO都是什么啊？有什么区别？</h3><h3 id="5-dubbo复制均衡策略和高可用策略都有哪些？动态代理策略呢？"><a href="#5-dubbo复制均衡策略和高可用策略都有哪些？动态代理策略呢？" class="headerlink" title="5. dubbo复制均衡策略和高可用策略都有哪些？动态代理策略呢？"></a>5. dubbo复制均衡策略和高可用策略都有哪些？动态代理策略呢？</h3><h3 id="6-为什么要进行系统拆分啊？拆分不用dubbo可以么？dubbo和thrift什么区别啊？"><a href="#6-为什么要进行系统拆分啊？拆分不用dubbo可以么？dubbo和thrift什么区别啊？" class="headerlink" title="6. 为什么要进行系统拆分啊？拆分不用dubbo可以么？dubbo和thrift什么区别啊？"></a>6. 为什么要进行系统拆分啊？拆分不用dubbo可以么？dubbo和thrift什么区别啊？</h3><h2 id="分布式消息队列"><a href="#分布式消息队列" class="headerlink" title="分布式消息队列"></a>分布式消息队列</h2><h3 id="1-为什么使用消息队列？消息队列有什么优点和缺点？"><a href="#1-为什么使用消息队列？消息队列有什么优点和缺点？" class="headerlink" title="1. 为什么使用消息队列？消息队列有什么优点和缺点？"></a>1. 为什么使用消息队列？消息队列有什么优点和缺点？</h3><h3 id="2-如何保证消息队列的高可用？如何保证消息不被重复消费？"><a href="#2-如何保证消息队列的高可用？如何保证消息不被重复消费？" class="headerlink" title="2. 如何保证消息队列的高可用？如何保证消息不被重复消费？"></a>2. 如何保证消息队列的高可用？如何保证消息不被重复消费？</h3><h3 id="3-kafka，activemq，rabbitmq，rocketmq都有什么优点和缺点？"><a href="#3-kafka，activemq，rabbitmq，rocketmq都有什么优点和缺点？" class="headerlink" title="3. kafka，activemq，rabbitmq，rocketmq都有什么优点和缺点？"></a>3. kafka，activemq，rabbitmq，rocketmq都有什么优点和缺点？</h3><h3 id="4-如果让你写一个消息队列，该如何进行架构设计？说一下你的思路？"><a href="#4-如果让你写一个消息队列，该如何进行架构设计？说一下你的思路？" class="headerlink" title="4. 如果让你写一个消息队列，该如何进行架构设计？说一下你的思路？"></a>4. 如果让你写一个消息队列，该如何进行架构设计？说一下你的思路？</h3><h2 id="分布式搜索引擎"><a href="#分布式搜索引擎" class="headerlink" title="分布式搜索引擎"></a>分布式搜索引擎</h2><h3 id="1-es的工作过程实现是如何的？如何实现分布式的啊？"><a href="#1-es的工作过程实现是如何的？如何实现分布式的啊？" class="headerlink" title="1. es的工作过程实现是如何的？如何实现分布式的啊？"></a>1. es的工作过程实现是如何的？如何实现分布式的啊？</h3><h3 id="2-es在数据量很大的情况下，如何提高查询效率？"><a href="#2-es在数据量很大的情况下，如何提高查询效率？" class="headerlink" title="2. es在数据量很大的情况下，如何提高查询效率？"></a>2. es在数据量很大的情况下，如何提高查询效率？</h3><h3 id="3-es的查询是一个怎么的工作过程？底层的lucence介绍一下？倒排索引知道么？es和mongodb什么区别？都在什么场景下使用？"><a href="#3-es的查询是一个怎么的工作过程？底层的lucence介绍一下？倒排索引知道么？es和mongodb什么区别？都在什么场景下使用？" class="headerlink" title="3. es的查询是一个怎么的工作过程？底层的lucence介绍一下？倒排索引知道么？es和mongodb什么区别？都在什么场景下使用？"></a>3. es的查询是一个怎么的工作过程？底层的lucence介绍一下？倒排索引知道么？es和mongodb什么区别？都在什么场景下使用？</h3><h2 id="高并发高可用架构设计"><a href="#高并发高可用架构设计" class="headerlink" title="高并发高可用架构设计"></a>高并发高可用架构设计</h2><h3 id="1-如何设计一个高并发高可用系统？"><a href="#1-如何设计一个高并发高可用系统？" class="headerlink" title="1. 如何设计一个高并发高可用系统？"></a>1. 如何设计一个高并发高可用系统？</h3><h3 id="2-如何限流？工程中怎么做的，说一下具体实现？"><a href="#2-如何限流？工程中怎么做的，说一下具体实现？" class="headerlink" title="2. 如何限流？工程中怎么做的，说一下具体实现？"></a>2. 如何限流？工程中怎么做的，说一下具体实现？</h3><h3 id="3-缓存如何使用的？缓存使用不会造成什么后果？"><a href="#3-缓存如何使用的？缓存使用不会造成什么后果？" class="headerlink" title="3. 缓存如何使用的？缓存使用不会造成什么后果？"></a>3. 缓存如何使用的？缓存使用不会造成什么后果？</h3><h3 id="4-如何熔断？熔断框架都有哪些？具体实现原理知道么？"><a href="#4-如何熔断？熔断框架都有哪些？具体实现原理知道么？" class="headerlink" title="4. 如何熔断？熔断框架都有哪些？具体实现原理知道么？"></a>4. 如何熔断？熔断框架都有哪些？具体实现原理知道么？</h3><h3 id="5-如何降级？-如何进行系统拆分？如何数据库拆分？"><a href="#5-如何降级？-如何进行系统拆分？如何数据库拆分？" class="headerlink" title="5. 如何降级？ 如何进行系统拆分？如何数据库拆分？"></a>5. 如何降级？ 如何进行系统拆分？如何数据库拆分？</h3><h2 id="通信协议"><a href="#通信协议" class="headerlink" title="通信协议"></a>通信协议</h2><h3 id="1-说一下TCP-IP-四层？"><a href="#1-说一下TCP-IP-四层？" class="headerlink" title="1. 说一下TCP/IP 四层？"></a>1. 说一下TCP/IP 四层？</h3><h3 id="2-http的工作流程？-http1-0-http1-1-http2-0具体哪些区别？"><a href="#2-http的工作流程？-http1-0-http1-1-http2-0具体哪些区别？" class="headerlink" title="2. http的工作流程？ http1.0 http1.1 http2.0具体哪些区别？"></a>2. http的工作流程？ http1.0 http1.1 http2.0具体哪些区别？</h3><h3 id="3-TCP三次握手，四层分手的工作流程？画一下流程图？为什么不是四次五次或者两次？"><a href="#3-TCP三次握手，四层分手的工作流程？画一下流程图？为什么不是四次五次或者两次？" class="headerlink" title="3. TCP三次握手，四层分手的工作流程？画一下流程图？为什么不是四次五次或者两次？"></a>3. TCP三次握手，四层分手的工作流程？画一下流程图？为什么不是四次五次或者两次？</h3><h3 id="4-画一下https的工作流程？具体如何实现？如何防止被抓包？"><a href="#4-画一下https的工作流程？具体如何实现？如何防止被抓包？" class="headerlink" title="4. 画一下https的工作流程？具体如何实现？如何防止被抓包？"></a>4. 画一下https的工作流程？具体如何实现？如何防止被抓包？</h3><h3 id="5-TCP三次握手，四次挥手。"><a href="#5-TCP三次握手，四次挥手。" class="headerlink" title="5. TCP三次握手，四次挥手。"></a>5. TCP三次握手，四次挥手。</h3><h3 id="6-讲一讲NIO和BIO的区别"><a href="#6-讲一讲NIO和BIO的区别" class="headerlink" title="6. 讲一讲NIO和BIO的区别"></a>6. 讲一讲NIO和BIO的区别</h3><h3 id="7-Tcp和udp区别"><a href="#7-Tcp和udp区别" class="headerlink" title="7. Tcp和udp区别"></a>7. Tcp和udp区别</h3><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><h3 id="1-45亿阿拉伯数字，如何进行去重？如何找出最大的那个数？"><a href="#1-45亿阿拉伯数字，如何进行去重？如何找出最大的那个数？" class="headerlink" title="1. 45亿阿拉伯数字，如何进行去重？如何找出最大的那个数？"></a>1. 45亿阿拉伯数字，如何进行去重？如何找出最大的那个数？</h3><h3 id="2-常见排序算法"><a href="#2-常见排序算法" class="headerlink" title="2. 常见排序算法"></a>2. 常见排序算法</h3><h3 id="3-算法题：给一堆硬币的array，返回所有的组合"><a href="#3-算法题：给一堆硬币的array，返回所有的组合" class="headerlink" title="3. 算法题：给一堆硬币的array，返回所有的组合"></a>3. 算法题：给一堆硬币的array，返回所有的组合</h3><h3 id="4-给一个set打印出所有子集；"><a href="#4-给一个set打印出所有子集；" class="headerlink" title="4. 给一个set打印出所有子集；"></a>4. 给一个set打印出所有子集；</h3><h3 id="5-多线程从多个文件中读入数据，写到同一个文件中；"><a href="#5-多线程从多个文件中读入数据，写到同一个文件中；" class="headerlink" title="5. 多线程从多个文件中读入数据，写到同一个文件中；"></a>5. 多线程从多个文件中读入数据，写到同一个文件中；</h3><h3 id="6-判断ip是否在给定范围内；"><a href="#6-判断ip是否在给定范围内；" class="headerlink" title="6. 判断ip是否在给定范围内；"></a>6. 判断ip是否在给定范围内；</h3><h3 id="7-打乱一副扑克牌，不能用额外空间，证明为什么是随机的。"><a href="#7-打乱一副扑克牌，不能用额外空间，证明为什么是随机的。" class="headerlink" title="7. 打乱一副扑克牌，不能用额外空间，证明为什么是随机的。"></a>7. 打乱一副扑克牌，不能用额外空间，证明为什么是随机的。</h3><h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><h3 id="1-红黑树和AVL树有什么区别？"><a href="#1-红黑树和AVL树有什么区别？" class="headerlink" title="1. 红黑树和AVL树有什么区别？"></a>1. 红黑树和AVL树有什么区别？</h3><h3 id="2-二叉树和红黑树"><a href="#2-二叉树和红黑树" class="headerlink" title="2. 二叉树和红黑树"></a>2. 二叉树和红黑树</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">final TreeNode&lt;K,V&gt; putTreeVal(HashMap&lt;K,V&gt; map, Node&lt;K,V&gt;[] tab,</span><br><span class="line">                                       int h, K k, V v) &#123;</span><br><span class="line"> </span><br><span class="line">  Class&lt;?&gt; kc = null;</span><br><span class="line">  boolean searched = false;</span><br><span class="line">  TreeNode&lt;K,V&gt; root = (parent != null) ? root() : this;</span><br><span class="line">  for (TreeNode&lt;K,V&gt; p = root;;) &#123;</span><br><span class="line">      int dir, ph; K pk;</span><br><span class="line">      if ((ph = p.hash) &gt; h)</span><br><span class="line">          dir = -1;</span><br><span class="line">      else if (ph &lt; h)</span><br><span class="line">          dir = 1;</span><br><span class="line">      else if ((pk = p.key) == k || (k != null &amp;&amp; k.equals(pk)))</span><br><span class="line">          return p;</span><br><span class="line">      else if ((kc == null &amp;&amp;</span><br><span class="line">                (kc = comparableClassFor(k)) == null) ||</span><br><span class="line">               (dir = compareComparables(kc, k, pk)) == 0) &#123;</span><br><span class="line">          if (!searched) &#123;</span><br><span class="line">              TreeNode&lt;K,V&gt; q, ch;</span><br><span class="line">              searched = true;</span><br><span class="line">              if (((ch = p.left) != null &amp;&amp;</span><br><span class="line">                   (q = ch.find(h, k, kc)) != null) ||</span><br><span class="line">                  ((ch = p.right) != null &amp;&amp;</span><br><span class="line">                   (q = ch.find(h, k, kc)) != null))</span><br><span class="line">                  return q;</span><br><span class="line">          &#125;</span><br><span class="line">          dir = tieBreakOrder(k, pk);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      TreeNode&lt;K,V&gt; xp = p;</span><br><span class="line">      if ((p = (dir &lt;= 0) ? p.left : p.right) == null) &#123;</span><br><span class="line">          Node&lt;K,V&gt; xpn = xp.next;</span><br><span class="line">          TreeNode&lt;K,V&gt; x = map.newTreeNode(h, k, v, xpn);</span><br><span class="line">          if (dir &lt;= 0)</span><br><span class="line">              xp.left = x;</span><br><span class="line">          else</span><br><span class="line">              xp.right = x;</span><br><span class="line">          xp.next = x;</span><br><span class="line">          x.parent = x.prev = xp;</span><br><span class="line">          if (xpn != null)</span><br><span class="line">              ((TreeNode&lt;K,V&gt;)xpn).prev = x;</span><br><span class="line">          moveRootToFront(tab, balanceInsertion(root, x));</span><br><span class="line">          return null;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://www.jianshu.com/p/a07d1d4004b0" target="_blank" rel="noopener">博文推荐</a></p>
<h2 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h2><h3 id="1-linux常用命令有哪些？"><a href="#1-linux常用命令有哪些？" class="headerlink" title="1. linux常用命令有哪些？"></a>1. linux常用命令有哪些？</h3><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="https://www.zhihu.com/question/57774162/answer/154298044" target="_blank" rel="noopener">偏向锁是如何撤销的？–ETIN</a></p>

  </div>
  <div>
        <ul class="post-copyright">
          <li class="post-copyright-author">
            <strong>本文作者： </strong>zhongyp</li>
          <li class="post-copyright-link">
            <strong>本文链接：</strong>
            <a href="https://zhongyp.me/interfaceview/2018-03-02-classic-interview-questions/" title="使用simple主题并开始写作">https://zhongyp.me/interfaceview/2018-03-02-classic-interview-questions/</a>
          </li>
          <li class="post-copyright-license">
            <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li>
        </ul>

  </div>
  <div class="post-tags">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Interview/">Interview</a></li></ul>
  </div>
  
<section class="comments" id="comments">
    <div id="gitalk-container"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">
    <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>
    <script src="/js/md5.min.js"></script>
    <script>
        var gitalk = new Gitalk({
            clientID: "94db00fd8803b1da40de",
            clientSecret: "34b513c63a3e941ea4b2df972635d9fa19cf3364",
            accessToken: "a25c2320388186bc7accf5faff34062b18131873",
            repo: "comment",
            owner: "zhongyp",
            admin: "zhongyp",
            id: location.pathname,
            perPage: 50,
            distractionFreeMode: "false"
        })

        gitalk.render('gitalk-container')
    </script>
</section>


</article>
  
    <div class="post-nav">
      <div class="post-nav-item post-nav-next">
        
          <span>〈 </span>
          <a href="/java/2018-03-30-hashmap/" rel="next" title="HashMap（1.8版本）">
          HashMap（1.8版本）
          </a>
        
      </div>
  
      <div class="post-nav-item post-nav-prev">
        
          <a href="/algorithm/2018-03-07-redblacktree/" rel="prev" title="红黑树">
            红黑树
          </a>
          <span>〉</span>
        
      </div>
    </div>
  

  <div id="toc" class="toc-article">
    <strong class="toc-title">目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#corejava"><span class="toc-text">corejava</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-hashcode-相等两个类一定相等么？equals呢？相反呢？"><span class="toc-text">1. hashcode 相等两个类一定相等么？equals呢？相反呢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-介绍一下集合框架"><span class="toc-text">2. 介绍一下集合框架</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-hashmap-hashtable-底层实现什么区别？hashtale和concurrenthashmap呢？"><span class="toc-text">3. hashmap hashtable 底层实现什么区别？hashtale和concurrenthashmap呢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-hashmap和treemap-什么区别？底层数据结构呢？"><span class="toc-text">4. hashmap和treemap 什么区别？底层数据结构呢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-线程池用过么？都有什么参数？底层如何实现的？"><span class="toc-text">5. 线程池用过么？都有什么参数？底层如何实现的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-sychronized和Lock什么区别？sychronized什么情况是对象锁，什么时候是全局锁？为什么？"><span class="toc-text">6. sychronized和Lock什么区别？sychronized什么情况是对象锁，什么时候是全局锁？为什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-ThreadLocal是什么？底层如何实现？写一个例子？"><span class="toc-text">7. ThreadLocal是什么？底层如何实现？写一个例子？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-volitile的工作原理？"><span class="toc-text">8. volitile的工作原理？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-cas知道么？如何实现的？"><span class="toc-text">9. cas知道么？如何实现的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-请用至少四种写法？写一个单例模式？"><span class="toc-text">10. 请用至少四种写法？写一个单例模式？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-Hashmap为什么不用平衡树？"><span class="toc-text">11. Hashmap为什么不用平衡树？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-Java有哪些队列？"><span class="toc-text">12. Java有哪些队列？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-HashMap了解么吗？说一下put方法过程"><span class="toc-text">13. HashMap了解么吗？说一下put方法过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14-HashMap是不是线程安全？"><span class="toc-text">14. HashMap是不是线程安全？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15-ConcurrentHashMap如何保证线程安全？"><span class="toc-text">15. ConcurrentHashMap如何保证线程安全？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16-深入问了乐观锁，悲观锁及其实现。"><span class="toc-text">16. 深入问了乐观锁，悲观锁及其实现。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17-设计模式了解吗？讲一下"><span class="toc-text">17. 设计模式了解吗？讲一下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18-private-修饰的方法可以通过反射访问，那么private意义是什么？"><span class="toc-text">18. private 修饰的方法可以通过反射访问，那么private意义是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19-Java类的初始化顺序？"><span class="toc-text">19. Java类的初始化顺序？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20-对方法区和永久区的理解以及它们之间的关系？"><span class="toc-text">20. 对方法区和永久区的理解以及它们之间的关系？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21-一个Java文件有3个类编译后有几个类文件？"><span class="toc-text">21. 一个Java文件有3个类编译后有几个类文件？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-局部变量使用前需要显式的赋值，否则编译不通过，为什么？"><span class="toc-text">22. 局部变量使用前需要显式的赋值，否则编译不通过，为什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23-ReadWriteLock读写之间互斥么？"><span class="toc-text">23. ReadWriteLock读写之间互斥么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24-写一个你认为最好的单例模式"><span class="toc-text">24. 写一个你认为最好的单例模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25-B树和B-树是解决什么样的问题的，怎样演化的，之间的区别？"><span class="toc-text">25. B树和B+树是解决什么样的问题的，怎样演化的，之间的区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26-写一个生产者和消费者模式"><span class="toc-text">26. 写一个生产者和消费者模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27-写一个死锁"><span class="toc-text">27. 写一个死锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#28-cpu-100-定位"><span class="toc-text">28. cpu 100%定位</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#29-String-a-”ab”-String-b-“a”-”b”-a-b是否相等，为什么。"><span class="toc-text">29. String a=”ab”;String b = “a”+”b”;a==b是否相等，为什么。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#30-String，-StringBuffer，-StringBuilder区别。"><span class="toc-text">30. String， StringBuffer， StringBuilder区别。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#31-Comparable、Comparator接口的实现"><span class="toc-text">31. Comparable、Comparator接口的实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#高并发"><span class="toc-text">高并发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-AQS知道吗？知道哪一些呢？讲一讲。"><span class="toc-text">1. AQS知道吗？知道哪一些呢？讲一讲。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-CLH同步队列是怎么实现非公平和公平的？"><span class="toc-text">2. CLH同步队列是怎么实现非公平和公平的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-ReetrantLock和synchronized的区别"><span class="toc-text">3. ReetrantLock和synchronized的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-如何才能得到一个线程安全的HashMap？"><span class="toc-text">4. 如何才能得到一个线程安全的HashMap？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-线程池的参数"><span class="toc-text">5. 线程池的参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-CAS的问题，讲一下解决方案。"><span class="toc-text">6. CAS的问题，讲一下解决方案。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-有没有更好的计数器解决策略"><span class="toc-text">7. 有没有更好的计数器解决策略</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-原子变量的实现原理"><span class="toc-text">8. 原子变量的实现原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-wait-和sleep-的区别"><span class="toc-text">9. wait()和sleep()的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-线程池的原理以及各种线程池的应用场景"><span class="toc-text">10. 线程池的原理以及各种线程池的应用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-线程池中使用有限的阻塞队列和无限的阻塞队列的区别"><span class="toc-text">11. 线程池中使用有限的阻塞队列和无限的阻塞队列的区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JVM"><span class="toc-text">JVM</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-请介绍一下JVM内存模型？用过什么垃圾回收器，都说说？"><span class="toc-text">1. 请介绍一下JVM内存模型？用过什么垃圾回收器，都说说？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-线上发送频繁full-gc如何处理？CPU使用率过高怎么办？如何定位问题？如何解决？说一下解决思路和处理方法。"><span class="toc-text">2. 线上发送频繁full gc如何处理？CPU使用率过高怎么办？如何定位问题？如何解决？说一下解决思路和处理方法。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-知道字节码么？字节码都有那些？Integer-5-int-y-5-比较x-y-都经过那些步骤？"><span class="toc-text">3. 知道字节码么？字节码都有那些？Integer * 5,int y=5, 比较x==y 都经过那些步骤？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-讲讲类加载机制？都有哪些类加载器，这些类加载器都加载哪些文件？手写一下类加载Demo"><span class="toc-text">4. 讲讲类加载机制？都有哪些类加载器，这些类加载器都加载哪些文件？手写一下类加载Demo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-知道osgi么？他是如何实现的？"><span class="toc-text">5. 知道osgi么？他是如何实现的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-请问你做过哪些JVM优化？使用什么方法？达到什么效果？"><span class="toc-text">6. 请问你做过哪些JVM优化？使用什么方法？达到什么效果？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-class-forName-“java-lang-String”-和String-class-getClassLoader-loadClass-“java-lang-String”-什么区别？"><span class="toc-text">7. class.forName(“java.lang.String”)和String.class.getClassLoader.loadClass(“java.lang.String”)什么区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-讲一下JVM的内存结构"><span class="toc-text">8. 讲一下JVM的内存结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-JVM-里-new-对象时，堆会发生抢占吗？你是怎么去设计JVM的堆的线程安全的？"><span class="toc-text">9. JVM 里 new 对象时，堆会发生抢占吗？你是怎么去设计JVM的堆的线程安全的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-讲一下JVM常用垃圾回收期？"><span class="toc-text">10. 讲一下JVM常用垃圾回收期？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-JVM内存模型"><span class="toc-text">11. JVM内存模型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-Java怎么加载类？"><span class="toc-text">12. Java怎么加载类？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring"><span class="toc-text">Spring</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-spring都有哪些机制？AOP底层如何实现的？IOC？"><span class="toc-text">1. spring都有哪些机制？AOP底层如何实现的？IOC？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-cglib知道么？它和JDK动态代理有什么区别？手写一个jdk动态代理？"><span class="toc-text">2. cglib知道么？它和JDK动态代理有什么区别？手写一个jdk动态代理？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-如何解决bean的循环依赖问题？"><span class="toc-text">3. 如何解决bean的循环依赖问题？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-讲一讲Spring和Springboot的区别"><span class="toc-text">4. 讲一讲Spring和Springboot的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-讲一下ORM框架Hibernate"><span class="toc-text">5. 讲一下ORM框架Hibernate</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Spring-AOP原理是什么？怎么使用？什么是切点，什么是切面？最好是举个例子"><span class="toc-text">6. Spring AOP原理是什么？怎么使用？什么是切点，什么是切面？最好是举个例子</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据库"><span class="toc-text">数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-使用mysql索引都有哪些原则？索引什么数据结构？B-tree和B-tree什么区别？"><span class="toc-text">1. 使用mysql索引都有哪些原则？索引什么数据结构？B+tree和B tree什么区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-mysql有哪些存储引擎啊？都有啥区别？要详细？"><span class="toc-text">2. mysql有哪些存储引擎啊？都有啥区别？要详细？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-设计高并发系统数据库层面该怎么设计？数据库锁有哪些类型？如何实现？"><span class="toc-text">3. 设计高并发系统数据库层面该怎么设计？数据库锁有哪些类型？如何实现？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-数据库事务有哪些？"><span class="toc-text">4. 数据库事务有哪些？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-讲一讲MySQL的索引结构？"><span class="toc-text">5. 讲一讲MySQL的索引结构？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-你设计的数据库遵循的范式？"><span class="toc-text">6.你设计的数据库遵循的范式？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-讲一下B树和B-树的区别"><span class="toc-text">7. 讲一下B树和B+树的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-数据库索引了解吗？讲一下"><span class="toc-text">8. 数据库索引了解吗？讲一下</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-自己实现一个二阶段提交，如何设计？"><span class="toc-text">9. 自己实现一个二阶段提交，如何设计？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-如果你发现你的sql语句始终走另一个索引，但是你希望它走你想要的索引，怎么办？"><span class="toc-text">10. 如果你发现你的sql语句始终走另一个索引，但是你希望它走你想要的索引，怎么办？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-mysql执行计划"><span class="toc-text">11. mysql执行计划</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-数据库索引为什么用b-树？"><span class="toc-text">12. 数据库索引为什么用b+树？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-你在做sql优化主要从哪几个方面做，用到哪些方法工具？"><span class="toc-text">13. 你在做sql优化主要从哪几个方面做，用到哪些方法工具？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分库分表"><span class="toc-text">分库分表</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-如何设计可以动态扩容缩容的分库分表方案？"><span class="toc-text">1. 如何设计可以动态扩容缩容的分库分表方案？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-用过哪些分库分表的中间件，有啥优点和缺点，讲一下你了解的分库分表中间件的底层实现原理。"><span class="toc-text">2. 用过哪些分库分表的中间件，有啥优点和缺点，讲一下你了解的分库分表中间件的底层实现原理。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-我现在有一个未分库分表的系统，以后系统需要分库分表，如何设计，让未分库分表的系统动态切换到分库分表系统上？"><span class="toc-text">3. 我现在有一个未分库分表的系统，以后系统需要分库分表，如何设计，让未分库分表的系统动态切换到分库分表系统上？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-分布式事务知道么？-你们怎么解决的？-TCC-那若出现网络原因，网络连不通怎么办啊？"><span class="toc-text">4. 分布式事务知道么？ 你们怎么解决的？ TCC?那若出现网络原因，网络连不通怎么办啊？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-为什么分库分表？"><span class="toc-text">5. 为什么分库分表？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-分布式寻址方式都有哪些算法？知道一致hash么？手写一下Java实现代码？你若userId取模分片，那我要查一段连续时间里的数据怎么办？"><span class="toc-text">6. 分布式寻址方式都有哪些算法？知道一致hash么？手写一下Java实现代码？你若userId取模分片，那我要查一段连续时间里的数据怎么办？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-如何解决分库分表主键问题？有什么实现方案？"><span class="toc-text">7. 如何解决分库分表主键问题？有什么实现方案？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分布式缓存"><span class="toc-text">分布式缓存</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-redis和memched-什么区别？为什么单线程的redis比多线程的memched效率要高？"><span class="toc-text">1. redis和memched 什么区别？为什么单线程的redis比多线程的memched效率要高？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-redis有什么数据类型？都在哪些场景下使用？"><span class="toc-text">2. redis有什么数据类型？都在哪些场景下使用？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-redis的主从复制是怎么实现的？redis的集群模式是如何实现的呢？redis的key是如何寻址的？"><span class="toc-text">3. redis的主从复制是怎么实现的？redis的集群模式是如何实现的呢？redis的key是如何寻址的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-键的空转时长，引用数，垃圾回收，过期策略关系？"><span class="toc-text">4. 键的空转时长，引用数，垃圾回收，过期策略关系？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-使用redis如何设计分布式锁？使用zk可以么？如何实现？这两种哪个效率更高？"><span class="toc-text">4. 使用redis如何设计分布式锁？使用zk可以么？如何实现？这两种哪个效率更高？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-知道redis的持久化么？有什么优点和缺点？具体底层实现呢？"><span class="toc-text">5. 知道redis的持久化么？有什么优点和缺点？具体底层实现呢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-redis过期策略都有哪些？LRU？写一下Java版本代码？"><span class="toc-text">6. redis过期策略都有哪些？LRU？写一下Java版本代码？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-讲一下redis的数据结构"><span class="toc-text">7. 讲一下redis的数据结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-redis缓存同步问题"><span class="toc-text">8. redis缓存同步问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-redis分布式锁"><span class="toc-text">9. redis分布式锁</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-在项目中，并发量大的情况下，如何才能够保证数据的一致性？"><span class="toc-text">10. 在项目中，并发量大的情况下，如何才能够保证数据的一致性？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-为什么使用Redis作为缓存"><span class="toc-text">11. 为什么使用Redis作为缓存</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-讲一下Redis分布式锁的实现"><span class="toc-text">12. 讲一下Redis分布式锁的实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-讲一下redis的数据类型和使用场景"><span class="toc-text">13. 讲一下redis的数据类型和使用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分布式服务框架"><span class="toc-text">分布式服务框架</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-说一下dubbo的实现过程，注册中心挂了可以继续通信么？"><span class="toc-text">1. 说一下dubbo的实现过程，注册中心挂了可以继续通信么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-zk原理知道么？zk都可以干什么？paxos算法知道么？说一下原理和实现？"><span class="toc-text">2. zk原理知道么？zk都可以干什么？paxos算法知道么？说一下原理和实现？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-dubbo支持哪些序列化协议？hessian？说一下hessian的数据结构？PB知道么？为啥PB效率是最高的？"><span class="toc-text">3. dubbo支持哪些序列化协议？hessian？说一下hessian的数据结构？PB知道么？为啥PB效率是最高的？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-知道netty么？netty可以干嘛？NIO-BIO-AIO都是什么啊？有什么区别？"><span class="toc-text">4. 知道netty么？netty可以干嘛？NIO,BIO,AIO都是什么啊？有什么区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-dubbo复制均衡策略和高可用策略都有哪些？动态代理策略呢？"><span class="toc-text">5. dubbo复制均衡策略和高可用策略都有哪些？动态代理策略呢？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-为什么要进行系统拆分啊？拆分不用dubbo可以么？dubbo和thrift什么区别啊？"><span class="toc-text">6. 为什么要进行系统拆分啊？拆分不用dubbo可以么？dubbo和thrift什么区别啊？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分布式消息队列"><span class="toc-text">分布式消息队列</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-为什么使用消息队列？消息队列有什么优点和缺点？"><span class="toc-text">1. 为什么使用消息队列？消息队列有什么优点和缺点？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-如何保证消息队列的高可用？如何保证消息不被重复消费？"><span class="toc-text">2. 如何保证消息队列的高可用？如何保证消息不被重复消费？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-kafka，activemq，rabbitmq，rocketmq都有什么优点和缺点？"><span class="toc-text">3. kafka，activemq，rabbitmq，rocketmq都有什么优点和缺点？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-如果让你写一个消息队列，该如何进行架构设计？说一下你的思路？"><span class="toc-text">4. 如果让你写一个消息队列，该如何进行架构设计？说一下你的思路？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#分布式搜索引擎"><span class="toc-text">分布式搜索引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-es的工作过程实现是如何的？如何实现分布式的啊？"><span class="toc-text">1. es的工作过程实现是如何的？如何实现分布式的啊？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-es在数据量很大的情况下，如何提高查询效率？"><span class="toc-text">2. es在数据量很大的情况下，如何提高查询效率？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-es的查询是一个怎么的工作过程？底层的lucence介绍一下？倒排索引知道么？es和mongodb什么区别？都在什么场景下使用？"><span class="toc-text">3. es的查询是一个怎么的工作过程？底层的lucence介绍一下？倒排索引知道么？es和mongodb什么区别？都在什么场景下使用？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#高并发高可用架构设计"><span class="toc-text">高并发高可用架构设计</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-如何设计一个高并发高可用系统？"><span class="toc-text">1. 如何设计一个高并发高可用系统？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-如何限流？工程中怎么做的，说一下具体实现？"><span class="toc-text">2. 如何限流？工程中怎么做的，说一下具体实现？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-缓存如何使用的？缓存使用不会造成什么后果？"><span class="toc-text">3. 缓存如何使用的？缓存使用不会造成什么后果？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-如何熔断？熔断框架都有哪些？具体实现原理知道么？"><span class="toc-text">4. 如何熔断？熔断框架都有哪些？具体实现原理知道么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-如何降级？-如何进行系统拆分？如何数据库拆分？"><span class="toc-text">5. 如何降级？ 如何进行系统拆分？如何数据库拆分？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#通信协议"><span class="toc-text">通信协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-说一下TCP-IP-四层？"><span class="toc-text">1. 说一下TCP/IP 四层？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-http的工作流程？-http1-0-http1-1-http2-0具体哪些区别？"><span class="toc-text">2. http的工作流程？ http1.0 http1.1 http2.0具体哪些区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-TCP三次握手，四层分手的工作流程？画一下流程图？为什么不是四次五次或者两次？"><span class="toc-text">3. TCP三次握手，四层分手的工作流程？画一下流程图？为什么不是四次五次或者两次？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-画一下https的工作流程？具体如何实现？如何防止被抓包？"><span class="toc-text">4. 画一下https的工作流程？具体如何实现？如何防止被抓包？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-TCP三次握手，四次挥手。"><span class="toc-text">5. TCP三次握手，四次挥手。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-讲一讲NIO和BIO的区别"><span class="toc-text">6. 讲一讲NIO和BIO的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Tcp和udp区别"><span class="toc-text">7. Tcp和udp区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#算法"><span class="toc-text">算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-45亿阿拉伯数字，如何进行去重？如何找出最大的那个数？"><span class="toc-text">1. 45亿阿拉伯数字，如何进行去重？如何找出最大的那个数？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-常见排序算法"><span class="toc-text">2. 常见排序算法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-算法题：给一堆硬币的array，返回所有的组合"><span class="toc-text">3. 算法题：给一堆硬币的array，返回所有的组合</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-给一个set打印出所有子集；"><span class="toc-text">4. 给一个set打印出所有子集；</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-多线程从多个文件中读入数据，写到同一个文件中；"><span class="toc-text">5. 多线程从多个文件中读入数据，写到同一个文件中；</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-判断ip是否在给定范围内；"><span class="toc-text">6. 判断ip是否在给定范围内；</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-打乱一副扑克牌，不能用额外空间，证明为什么是随机的。"><span class="toc-text">7. 打乱一副扑克牌，不能用额外空间，证明为什么是随机的。</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据结构"><span class="toc-text">数据结构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-红黑树和AVL树有什么区别？"><span class="toc-text">1. 红黑树和AVL树有什么区别？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-二叉树和红黑树"><span class="toc-text">2. 二叉树和红黑树</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#系统"><span class="toc-text">系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-linux常用命令有哪些？"><span class="toc-text">1. linux常用命令有哪些？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考资料"><span class="toc-text">参考资料</span></a></li></ol>
  </div>



<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>

    </div>

    

  </div>

  <footer class="footer text-center">
    <div id="bottom-inner">

      <a href="https://tuchong.com/16028574/" target="_blank">我的摄影</a> |
      <a href="http://zhongyp.me">DO IT</a> |
      <a href="https://github.com/zhongyp" target="_blank">GitHub</a> |
      <a href="http://hexo.io" target="_blank">Hexo</a> |
      <a href="https://github.com/zhongyp/hexo-theme-simple" target="_blank">Theme simple</a> |
      <a href="https://github.com/microacup/hexo-theme-micorb" target="_blank">Base on theme microb</a> |
      <a><span id="busuanzi_container_site_pv">本站访客数<span id="busuanzi_value_site_uv"></span>人次</span></a> |
      <a><span id="busuanzi_container_site_pv">本站访问量<span id="busuanzi_value_site_pv"></span>次</span></a>
    </div>
  </footer>

  

<script>
  (function(window, document, undefined) {

    var timer = null;

    function returnTop() {
      cancelAnimationFrame(timer);
      timer = requestAnimationFrame(function fn() {
        var oTop = document.body.scrollTop || document.documentElement.scrollTop;
        if (oTop > 0) {
          document.body.scrollTop = document.documentElement.scrollTop = oTop - 50;
          timer = requestAnimationFrame(fn);
        } else {
          cancelAnimationFrame(timer);
        }
      });
    }

    var hearts = [];
    window.requestAnimationFrame = (function() {
      return window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback) {
          setTimeout(callback, 1000 / 60);
        }
    })();
    init();

    function init() {
      css(".heart{z-index:9999;width: 10px;height: 10px;position: fixed;background: #f00;transform: rotate(45deg);-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);}.heart:after,.heart:before{content: '';width: inherit;height: inherit;background: inherit;border-radius: 50%;-webkit-border-radius: 50%;-moz-border-radius: 50%;position: absolute;}.heart:after{top: -5px;}.heart:before{left: -5px;}");
      attachEvent();
      gameloop();
      addMenuEvent();
    }

    function gameloop() {
      for (var i = 0; i < hearts.length; i++) {
        if (hearts[i].alpha <= 0) {
          document.body.removeChild(hearts[i].el);
          hearts.splice(i, 1);
          continue;
        }
        hearts[i].y--;
        hearts[i].scale += 0.004;
        hearts[i].alpha -= 0.013;
        hearts[i].el.style.cssText = "left:" + hearts[i].x + "px;top:" + hearts[i].y + "px;opacity:" + hearts[i].alpha + ";transform:scale(" + hearts[i].scale + "," + hearts[i].scale + ") rotate(45deg);background:" + hearts[i].color;
      }
      requestAnimationFrame(gameloop);
    }

    /**
     * 给logo设置点击事件
     *
     * - 回到顶部
     * - 出现爱心
     */
    function attachEvent() {
      var old = typeof window.onclick === "function" && window.onclick;
      var logo = document.getElementById("logo");
      if (logo) {
        logo.onclick = function(event) {
          returnTop();
          old && old();
          createHeart(event);
        }
      }

    }

    function createHeart(event) {
      var d = document.createElement("div");
      d.className = "heart";
      hearts.push({
        el: d,
        x: event.clientX - 5,
        y: event.clientY - 5,
        scale: 1,
        alpha: 1,
        color: randomColor()
      });
      document.body.appendChild(d);
    }

    function css(css) {
      var style = document.createElement("style");
      style.type = "text/css";
      try {
        style.appendChild(document.createTextNode(css));
      } catch (ex) {
        style.styleSheet.cssText = css;
      }
      document.getElementsByTagName('head')[0].appendChild(style);
    }

    function randomColor() {
      // return "rgb(" + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + "," + (~~(Math.random() * 255)) + ")";
      return "#F44336";
    }

    function addMenuEvent() {
      // var menu = document.getElementById('menu-main-post');
      // if (menu) {
      //   var toc = document.getElementById('toc');
      //   if (toc) {
      //     menu.onclick = function() {
      //       if (toc) {
      //         if (toc.style.display == 'block') {
      //           toc.style.display = 'none';
      //         } else {
      //           toc.style.display = 'block';
      //         }
      //       }
      //     };
      //   } else {
      //     menu.style.display = 'none';
      //   }
      // }
    }

  })(window, document);
</script>


  



</body>
</html>
