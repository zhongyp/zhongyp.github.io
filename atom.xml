<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>DO IT</title>
  
  <subtitle>é’Ÿå®‡é¹çš„åšå®¢</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://zhongyp.me/"/>
  <updated>2018-12-06T02:20:28.035Z</updated>
  <id>http://zhongyp.me/</id>
  
  <author>
    <name>zhongyp</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>çº¿ç¨‹å¯åŠ¨ä¸ç»ˆæ­¢</title>
    <link href="http://zhongyp.me/2018/12/04/concurrent/2018-12-04-thread-start-end/"/>
    <id>http://zhongyp.me/2018/12/04/concurrent/2018-12-04-thread-start-end/</id>
    <published>2018-12-03T16:00:00.000Z</published>
    <updated>2018-12-06T02:20:28.035Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šç¯‡å¯¹<a href="https://zhongyp.me/2018/03/16/concurrent/2017-03-16-Thread-brief/">ä»€ä¹ˆæ˜¯çº¿ç¨‹</a>åšäº†ç®€å•çš„ä»‹ç»,æœ¬ç¯‡ä¸»è¦æ˜¯ä»æ„é€ çº¿ç¨‹ã€ä¸­æ–­çº¿ç¨‹ã€ç»ˆæ­¢çº¿ç¨‹3ä¸ªæ–¹é¢äº†è§£çº¿ç¨‹ã€‚</p><h3 id="1-æ„é€ çº¿ç¨‹"><a href="#1-æ„é€ çº¿ç¨‹" class="headerlink" title="1. æ„é€ çº¿ç¨‹"></a>1. æ„é€ çº¿ç¨‹</h3><h4 id="1-1-æ„é€ çº¿ç¨‹çš„æ–¹å¼"><a href="#1-1-æ„é€ çº¿ç¨‹çš„æ–¹å¼" class="headerlink" title="1.1 æ„é€ çº¿ç¨‹çš„æ–¹å¼"></a>1.1 æ„é€ çº¿ç¨‹çš„æ–¹å¼</h4><p>Javaæ„é€ ä¸€ä¸ªçº¿ç¨‹æœ‰ä¸¤ç§æ–¹å¼ï¼š</p><p>ä¸€ç§ç›´æ¥new Thread()çº¿ç¨‹å®ä¾‹æˆ–è€…æ˜¯å£°æ˜å­ç±»ç»§æ‰¿Threadçˆ¶ç±»å¹¶é‡å†™çˆ¶ç±»çš„runæ–¹æ³•ã€‚å¦‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// çº¿ç¨‹ç±»</span><br><span class="line">class PrimeThread extends Thread &#123;</span><br><span class="line">    long minPrime;</span><br><span class="line">    PrimeThread(long minPrime) &#123;</span><br><span class="line">        this.minPrime = minPrime;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public void run() &#123;</span><br><span class="line">        // compute primes larger than minPrime</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å¯åŠ¨çº¿ç¨‹å®ä¾‹</span><br><span class="line">PrimeThread p = new PrimeThread(143);</span><br><span class="line">p.start();</span><br></pre></td></tr></table></figure></p><p>å¦ä¸€ç§æ–¹å¼æ˜¯å£°æ˜å­ç±»å®ç°Runnableæ¥å£ï¼Œå¹¶å®ç°runæ–¹æ³•ã€‚å¦‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// çº¿ç¨‹ç±»</span><br><span class="line">class PrimeRun implements Runnable &#123;</span><br><span class="line">    long minPrime;</span><br><span class="line">    PrimeRun(long minPrime) &#123;</span><br><span class="line">        this.minPrime = minPrime;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    public void run() &#123;</span><br><span class="line">        // compute primes larger than minPrime</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//å¯åŠ¨çº¿ç¨‹å®ä¾‹</span><br><span class="line">PrimeRun p = new PrimeRun(143);</span><br><span class="line">new Thread(p).start();</span><br></pre></td></tr></table></figure></p><p>ä¸¤è€…å…¶å®åœ¨æœ¬è´¨ä¸Šæ˜¯ä¸€è‡´çš„ï¼Œå®ç°/é‡å†™Runableä¸­çš„runæ–¹æ³•ï¼Œå› ä¸ºThreadç±»ä¹Ÿç»§æ‰¿äº†Runableæ¥å£ã€‚Javaå°†çº¿ç¨‹çš„æ‰§è¡Œå’Œæ‰§è¡Œå¯¹è±¡æŠ½è±¡å¼€æ¥ï¼ŒJDKä¸­æ‰§è¡Œçš„æ˜¯Threadç±»ï¼ŒExecutoræ¡†æ¶ï¼Œå¯æ‰§è¡Œç›®æ ‡æœ‰Runableï¼ŒCallableã€‚å¯¹äºç¬¬ä¸€ç§æ–¹å¼å¹¶ä¸æ¨èï¼Œå› ä¸ºç»§æ‰¿Threadç±»é™å®šäº†å…¶åŸºæœ¬è¡Œä¸ºï¼Œåœ¨è®¾è®¡ä¸Šè¿åå¤šç”¨ç»„åˆ å°‘ç”¨ç»§æ‰¿çš„åŸåˆ™ï¼Œæ‰€ä»¥ä¸€èˆ¬æ„é€ çº¿ç¨‹ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ã€‚</p><h4 id="1-2-æ„é€ çº¿ç¨‹çš„å±æ€§"><a href="#1-2-æ„é€ çº¿ç¨‹çš„å±æ€§" class="headerlink" title="1.2 æ„é€ çº¿ç¨‹çš„å±æ€§"></a>1.2 æ„é€ çº¿ç¨‹çš„å±æ€§</h4><p>æ„é€ çº¿ç¨‹æ—¶éœ€è¦æä¾›çº¿ç¨‹æ‰€éœ€è¦çš„å±æ€§ã€‚ä¸€ä¸ªæ–°çš„ï¼ˆchildï¼‰çº¿ç¨‹å¯¹è±¡æ˜¯ç”±parentçº¿ç¨‹è¿›è¡Œç©ºé—´åˆ†é…çš„ï¼Œè€Œchildçº¿ç¨‹ç»§æ‰¿äº†parentæ˜¯å¦ä¸ºDaemonã€ä¼˜å…ˆçº§ã€å’ŒåŠ è½½èµ„æºçš„contextClassLoaderä»¥åŠå¯ç»§æ‰¿çš„ThreadLocalï¼ŒåŒæ—¶åˆ†é…å”¯ä¸€çš„IDæ¥è¡¨ç¤ºè¿™ä¸ªchildçº¿ç¨‹ã€‚å¦‚æœåˆ›å»ºçº¿ç¨‹å®ä¾‹åéœ€è¦ä¿®æ”¹çº¿ç¨‹å±æ€§ï¼Œåˆ™å¯ä»¥é€šè¿‡Threadæä¾›çš„ä¸€äº›ä¿®æ”¹å±æ€§çš„æ–¹æ³•è¿›è¡Œä¿®æ”¹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">setPriority()</span><br><span class="line">getPriority()</span><br><span class="line">setName()</span><br><span class="line">getName()</span><br><span class="line">setDaemon()</span><br><span class="line">isDaemon()</span><br><span class="line">getContextClassLoader()</span><br><span class="line">setContextClassLoader()</span><br><span class="line">getStackTrace()</span><br><span class="line">getAllStackTraces()</span><br><span class="line">checkAccess()</span><br><span class="line">isCCLOverridden()</span><br><span class="line">auditSubclass()</span><br><span class="line">dumpThreads()</span><br><span class="line">getThreads()</span><br><span class="line">getId()</span><br><span class="line">getState()</span><br><span class="line">setDefaultUncaughtExceptionHandler()</span><br><span class="line">getDefaultUncaughtExceptionHandler()</span><br><span class="line">getUncaughtExceptionHandler()</span><br><span class="line">setUncaughtExceptionHandler()</span><br><span class="line">dispatchUncaughtException()</span><br><span class="line">processQueue()</span><br></pre></td></tr></table></figure></p><p>å½“ç„¶æ„é€ çº¿ç¨‹å±æ€§æœ‰äº›å±æ€§è¿˜å¯ä»¥åœ¨åˆ›å»ºçº¿ç¨‹å®ä¾‹æ—¶å°±è®¾ç½®ï¼Œå¦‚ä¸‹æ˜¯ä¸€ä¸ªçº¿ç¨‹åˆå§‹åŒ–æ—¶çš„ä»£ç ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *</span><br><span class="line"> * @param g</span><br><span class="line"> * @param target</span><br><span class="line"> * @param name</span><br><span class="line"> * @param stackSize çº¿ç¨‹çš„æ ˆå¤§å° æ ¹æ®å‚æ•°ä¼ é€’è¿‡ç¨‹å¯ä»¥çœ‹å‡ºé»˜è®¤å¤§å°ä¸ºé›¶ï¼Œå³ä½¿ç”¨é»˜è®¤çš„çº¿ç¨‹æ ˆå¤§å°</span><br><span class="line"> * @param acc è®¿é—®æ§åˆ¶æƒé™</span><br><span class="line"> * @param inheritThreadLocals // å¯ç»§æ‰¿çš„ThreadLocal</span><br><span class="line"> *</span><br><span class="line"> * ThreadGroup çº¿ç¨‹ç»„ï¼ˆThreadGroupï¼‰å°±æ˜¯ç”±çº¿ç¨‹ç»„æˆçš„ç®¡ç†çº¿ç¨‹çš„ç±»ï¼Œ</span><br><span class="line"> *     è¿™ä¸ªç±»æ˜¯java.lang.ThreadGroupç±»ã€‚</span><br><span class="line"> *     å®šä¹‰ä¸€ä¸ªçº¿ç¨‹ç»„ï¼Œé€šè¿‡ä»¥ä¸‹ä»£ç å¯ä»¥å®ç°ã€‚</span><br><span class="line"> *     ThreadGroup group=new ThreadGroup(&quot;group&quot;);</span><br><span class="line"> *     Thread thread=new Thread(group,&quot;the first thread of group&quot;);</span><br><span class="line"> *     ThreadGroupç±»ä¸­çš„æŸäº›æ–¹æ³•ï¼Œå¯ä»¥å¯¹çº¿ç¨‹ç»„ä¸­çš„çº¿ç¨‹äº§ç”Ÿä½œç”¨ã€‚ä¾‹å¦‚ï¼ŒsetMaxPriority()æ–¹æ³•å¯ä»¥è®¾å®šçº¿ç¨‹ç»„ä¸­çš„æ‰€æœ‰çº¿ç¨‹æ‹¥æœ‰æœ€å¤§çš„ä¼˜å…ˆæƒã€‚</span><br><span class="line"> */</span><br><span class="line">private void init(ThreadGroup g, Runnable target, String name,</span><br><span class="line">                  long stackSize, AccessControlContext acc,</span><br><span class="line">                  boolean inheritThreadLocals) &#123;</span><br><span class="line">    if (name == null) &#123;// çº¿ç¨‹åï¼Œå¯ç›¸åŒ</span><br><span class="line">        throw new NullPointerException(&quot;name cannot be null&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    this.name = name;</span><br><span class="line"></span><br><span class="line">    Thread parent = currentThread();// è·å–å½“å‰çº¿ç¨‹ï¼Œå¹¶ä½œä¸ºçˆ¶çº¿ç¨‹ã€‚</span><br><span class="line">    SecurityManager security = System.getSecurityManager();// è·å–å®‰å…¨ç­–ç•¥</span><br><span class="line">    if (g == null) &#123;</span><br><span class="line">        /* Determine if it&apos;s an applet or not */</span><br><span class="line"></span><br><span class="line">        /* If there is a security manager, ask the security manager</span><br><span class="line">           what to do. */</span><br><span class="line">        if (security != null) &#123;//å¦‚æœå­˜åœ¨å®‰å…¨ç®¡ç†å™¨ï¼Œåˆ™è·å–å®ƒé‡å†™çš„çº¿ç¨‹ç»„</span><br><span class="line">            g = security.getThreadGroup();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /* If the security doesn&apos;t have a strong opinion of the matter</span><br><span class="line">           use the parent thread group. */</span><br><span class="line">        if (g == null) &#123;</span><br><span class="line">            g = parent.getThreadGroup();//ä½¿ç”¨çˆ¶çº¿ç¨‹ç»„</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /* checkAccess regardless of whether or not threadgroup is</span><br><span class="line">       explicitly passed in. */</span><br><span class="line">    g.checkAccess();</span><br><span class="line"></span><br><span class="line">    /*</span><br><span class="line">     * Do we have the required permissions?</span><br><span class="line">     */</span><br><span class="line">    if (security != null) &#123;</span><br><span class="line">        if (isCCLOverridden(getClass())) &#123;</span><br><span class="line">            security.checkPermission(SUBCLASS_IMPLEMENTATION_PERMISSION);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    g.addUnstarted();</span><br><span class="line"></span><br><span class="line">    this.group = g;</span><br><span class="line">    this.daemon = parent.isDaemon();//ç»§æ‰¿çˆ¶çº¿ç¨‹çš„å®ˆæŠ¤å±æ€§</span><br><span class="line">    this.priority = parent.getPriority();//ç»§æ‰¿çˆ¶çº¿ç¨‹çš„ä¼˜å…ˆçº§</span><br><span class="line">    //ç»§æ‰¿çˆ¶çº¿ç¨‹åŠ è½½èµ„æºçš„contextClassLoader</span><br><span class="line">    if (security == null || isCCLOverridden(parent.getClass()))</span><br><span class="line">        this.contextClassLoader = parent.getContextClassLoader();</span><br><span class="line">    else</span><br><span class="line">        this.contextClassLoader = parent.contextClassLoader;</span><br><span class="line">    this.inheritedAccessControlContext =</span><br><span class="line">            acc != null ? acc : AccessController.getContext();</span><br><span class="line">    this.target = target;</span><br><span class="line">    setPriority(priority);</span><br><span class="line">    // ç»§æ‰¿çˆ¶çº¿ç¨‹å¯ç»§æ‰¿çš„ThreadLocal</span><br><span class="line">    if (inheritThreadLocals &amp;&amp; parent.inheritableThreadLocals != null)</span><br><span class="line">        this.inheritableThreadLocals =</span><br><span class="line">            ThreadLocal.createInheritedMap(parent.inheritableThreadLocals);</span><br><span class="line">    /* Stash the specified stack size in case the VM cares */</span><br><span class="line">    this.stackSize = stackSize;</span><br><span class="line"></span><br><span class="line">    /* Set thread ID */</span><br><span class="line">    tid = nextThreadID();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="1-3-å¯åŠ¨çº¿ç¨‹"><a href="#1-3-å¯åŠ¨çº¿ç¨‹" class="headerlink" title="1.3 å¯åŠ¨çº¿ç¨‹"></a>1.3 å¯åŠ¨çº¿ç¨‹</h4><p>çº¿ç¨‹å¯¹è±¡åœ¨åˆå§‹åŒ–å®Œæˆåï¼Œè°ƒç”¨startæ–¹æ³•å°±å¯ä»¥å¯åŠ¨çº¿ç¨‹ã€‚<br><strong><em>æ³¨æ„ï¼šå¯åŠ¨ä¸€ä¸ªçº¿ç¨‹ï¼Œæœ€å¥½ä¸ºè¿™ä¸ªçº¿ç¨‹è®¾ç½®çº¿ç¨‹åç§°ï¼Œè¿™è¡Œæœ‰åŠ©äºåˆ†ææˆ–è€…æ’æŸ¥é—®é¢˜</em></strong></p><h3 id="2-ä¸­æ–­çº¿ç¨‹"><a href="#2-ä¸­æ–­çº¿ç¨‹" class="headerlink" title="2. ä¸­æ–­çº¿ç¨‹"></a>2. ä¸­æ–­çº¿ç¨‹</h3><h4 id="2-1-ä¸­æ–­çš„åŸç†"><a href="#2-1-ä¸­æ–­çš„åŸç†" class="headerlink" title="2.1 ä¸­æ–­çš„åŸç†"></a>2.1 ä¸­æ–­çš„åŸç†</h4><p>ä¸­æ–­ï¼Œå¯ä»¥ç†è§£ä¸ºè¿è¡Œä¸­çš„çº¿ç¨‹ï¼Œæ˜¯å¦è¢«å…¶ä»–çº¿ç¨‹è¿›è¡Œäº†ä¸­æ–­æ“ä½œã€‚ä¸­æ–­æ“ä½œæœ‰çš„æƒ…å†µä¸‹ä»…ä»…è®¾ç½®ä¸­æ–­çŠ¶æ€ï¼Œæœ‰çš„<br>ä¸­æ–­æ“ä½œåŒ…å«ä¸‰ä¸ªæ–¹æ³•ã€‚interrupt(),interrupted(),isInterrupted()ã€‚ä¸‹é¢æˆ‘ä»¬å°†å¯¹è¿™ä¸ªæ–¹æ³•è¿›è¡Œè¯¦ç»†äº†è§£ã€‚</p><h5 id="2-1-1-interrupt"><a href="#2-1-1-interrupt" class="headerlink" title="2.1.1 interrupt()"></a>2.1.1 interrupt()</h5><p>ä¸­æ–­æ“ä½œé€šè¿‡è°ƒç”¨çº¿ç¨‹çš„interrupt()æ–¹æ³•è¿›è¡Œã€‚ä¾‹å¦‚çº¿ç¨‹Aä¸­æ–­çº¿ç¨‹Bï¼Œåœ¨çº¿ç¨‹Açš„ä»£ç ä¸­è°ƒç”¨ThreadB.interrupt()å³å¯ã€‚</p><p>interrupt()æ–¹æ³•ä¸æ˜¯ç›´æ¥å°†çº¿ç¨‹ç»ˆæ­¢ï¼Œè€Œæ˜¯é’ˆå¯¹äºä¸åŒæƒ…å†µçš„ä¸åŒå¤„ç†å¦‚ä¸‹ã€‚ç¿»è¯‘è‡ª<a href="https://docs.oracle.com/javase/7/docs/api/" target="_blank" rel="noopener">Java se7docs</a>ï¼š</p><ol><li>é™¤éç»ˆæ­¢çš„æ˜¯å½“å‰çº¿ç¨‹ï¼ˆå§‹ç»ˆè¢«å…è®¸ï¼‰ï¼Œå¦åˆ™è°ƒç”¨checkAccessæ–¹æ³•ï¼Œå¯èƒ½ä¼šå¯¼è‡´æŠ›å‡ºSecurityExceptionå¼‚å¸¸ã€‚</li><li>å¦‚æœè°ƒç”¨Objectç±»çš„wait(),wait(long)æˆ–è€…wait(long, int)ç­‰æ–¹æ³•ï¼Œæˆ–è€…è°ƒç”¨æ­¤çº¿ç¨‹çš„join(),join(long),join(long, int), sleep(long), sleep(long, int)æ–¹æ³•ï¼Œ<strong><em>æ­¤çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€å°†è¢«æ¸…é™¤ï¼ŒåŒæ—¶å°†æŠ›å‡ºInterruptedExceptionå¼‚å¸¸</em></strong>ã€‚</li><li>å¦‚æœæ­¤çº¿ç¨‹åœ¨å¯ä¸­æ–­é€šé“çš„IOæ“ä½œä¸Šï¼Œé€šé“å°†è¢«å…³é—­ï¼Œçº¿ç¨‹è¢«è®¾ç½®ä¸­æ–­çŠ¶æ€ï¼ŒåŒæ—¶å°†æŠ›å‡ºClosedByInterruptExceptionå¼‚å¸¸ã€‚</li><li>å¦‚æœçº¿ç¨‹åœ¨é€‰æ‹©å™¨(Selector)é˜»å¡ï¼Œçº¿ç¨‹å°†è¢«è®¾ç½®ä¸­æ–­çŠ¶æ€ï¼Œç«‹å³ä»é€‰æ‹©æ“ä½œä¸­è¿”å›ï¼Œå¯èƒ½å¸¦æœ‰éé›¶å€¼ï¼Œå°±åƒé€‰æ‹©å™¨å”¤é†’æ–¹æ³•è¢«è°ƒç”¨ä¸€æ ·ã€‚</li><li>å¦‚æœä»¥ä¸Šçš„æ¡ä»¶éƒ½ä¸æ»¡è¶³ï¼Œæ­¤çº¿ç¨‹å°†è¢«è®¾ç½®ä¸­æ–­çŠ¶æ€ã€‚</li><li>ä¸­æ–­ä¸å­˜æ´»çš„çº¿ç¨‹ä¸ä¼šæœ‰ä»»ä½•å½±å“ã€‚</li></ol><p>è¿™é‡Œæä¾›äº†ä¸Šé¢çš„ç»ˆæ­¢å½“å‰çº¿ç¨‹ï¼Œsleepé˜»å¡çº¿ç¨‹ï¼ŒIOé˜»å¡çº¿ç¨‹ä¾‹å­ï¼Œè¯»è€…å¯æ ¹æ®ä¸Šè¿°è¦æ±‚æµ‹è¯•ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">class InterruptCurrentThread extends Thread&#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        super.run();</span><br><span class="line">        this.interrupt();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class InterruptBlockedThread extends Thread&#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        super.run();</span><br><span class="line">        SleepUtils.sleep(100);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class InterruptIOBlockedThread extends Thread&#123;</span><br><span class="line">    private LinkedBlockingQueue&lt;String&gt; queue = new LinkedBlockingQueue&lt;&gt;();</span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        super.run();</span><br><span class="line">        try &#123;</span><br><span class="line">            queue.take();</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>æ³¨ï¼šSelectorï¼ˆé€‰æ‹©å™¨ï¼‰æ˜¯Java NIOä¸­èƒ½å¤Ÿæ£€æµ‹ä¸€åˆ°å¤šä¸ªNIOé€šé“ï¼Œå¹¶èƒ½å¤ŸçŸ¥æ™“é€šé“æ˜¯å¦ä¸ºè¯¸å¦‚è¯»å†™äº‹ä»¶åšå¥½å‡†å¤‡çš„ç»„ä»¶ã€‚è¿™æ ·ï¼Œä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹å¯ä»¥ç®¡ç†å¤šä¸ªchannelï¼Œä»è€Œç®¡ç†å¤šä¸ªç½‘ç»œè¿æ¥ã€‚è¿™ä¸ªä¸å¤ªå¸¸ç”¨æ‰€ä»¥å°±æ²¡æœ‰ç»™å‡ºæµ‹è¯•ç”¨ä¾‹ã€‚</p><p>æ³¨æ„ï¼š<strong><em>å¯¹äºä¼šæŠ›å‡ºå¼‚å¸¸çš„æƒ…å†µï¼Œå¼‚å¸¸ä¸€å®šè¦å¤„ç†ï¼Œä¸€èˆ¬å­çº¿ç¨‹å¼‚å¸¸ä¸èƒ½æŠ›å‡ºéè¿è¡Œæ—¶å¼‚å¸¸ï¼Œæ‰€ä»¥å­çº¿ç¨‹æˆ‘ä»¬éœ€è¦æŠ›å‡ºè¿è¡Œæ—¶å¼‚å¸¸ï¼Œç”¨äºç»™çˆ¶çº¿ç¨‹æ•è·ã€‚</em></strong></p><h5 id="2-1-2-interrupted"><a href="#2-1-2-interrupted" class="headerlink" title="2.1.2 interrupted()"></a>2.1.2 interrupted()</h5><p>interrupted()ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªåŠŸèƒ½ï¼š</p><ol><li>æµ‹è¯•<strong><em>å½“å‰çº¿ç¨‹</em></strong>æ˜¯å¦è¢«ä¸­æ–­,çº¿ç¨‹ä¸­æ–­çŠ¶æ€å°†è¢«æ¸…é™¤ã€‚æ¢å¥è¯è¯´å°±æ˜¯ï¼Œå¦‚æœå½“å‰æ–¹æ³•è¢«æˆåŠŸè°ƒç”¨ä¸¤æ¬¡ï¼Œåˆ™è¿”å›falseï¼ˆé™¤éå½“å‰çº¿ç¨‹åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ­¤æ–¹æ³•åç¬¬äºŒæ¬¡è°ƒç”¨æ­¤æ–¹æ³•å‰è¢«å†æ¬¡ä¸­æ–­ï¼‰ã€‚</li><li>çº¿ç¨‹ä¸­æ–­è¢«å¿½ç•¥ï¼Œå› ä¸ºåœ¨ä¸­æ–­æ—¶çº¿ç¨‹æ­»æ‰å°†è¢«æ­¤æ–¹æ³•åæ˜ è¿”å›falseã€‚(æˆ‘çš„ç†è§£)</li></ol><p>interrupted()ä¸åŒäºinterrupt(),æ­¤æ–¹æ³•ç”¨äºæµ‹è¯•å½“å‰çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œå¹¶æ¸…é™¤ä¸­æ–­çŠ¶æ€ã€‚ä»£ç ç¤ºä¾‹å¦‚ä¸‹ã€‚<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">    Thread thread = new InterruptThread();</span><br><span class="line">    thread.start();</span><br><span class="line">    SleepUtils.sleep(1);</span><br><span class="line">    thread.interrupt();</span><br><span class="line">&#125;</span><br><span class="line">    static class InterruptThread extends Thread&#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void run() &#123;</span><br><span class="line">            int count = 0;</span><br><span class="line">            while(true)&#123;</span><br><span class="line">                count++;</span><br><span class="line">                if(interrupted())&#123;//æ­¤å¤„ä»…ä»…æ˜¯ä¸ºäº†ç¤ºä¾‹</span><br><span class="line">                    break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p><h5 id="2-1-3-isInterrupted"><a href="#2-1-3-isInterrupted" class="headerlink" title="2.1.3 isInterrupted()"></a>2.1.3 isInterrupted()</h5><p>isInterruptedè™½ç„¶ä¹Ÿæ˜¯æµ‹è¯•çº¿ç¨‹æ˜¯å¦è¢«ä¸­æ–­ï¼Œä½†æ˜¯æ­¤æ–¹æ³•ä¸ä¼šæ›´æ”¹çº¿ç¨‹çš„ä¸­æ–­çŠ¶æ€ã€‚</p><h3 id="3-ç»ˆæ­¢çº¿ç¨‹"><a href="#3-ç»ˆæ­¢çº¿ç¨‹" class="headerlink" title="3. ç»ˆæ­¢çº¿ç¨‹"></a>3. ç»ˆæ­¢çº¿ç¨‹</h3><h4 id="3-1-è¿‡æœŸçš„suspend-ã€resume-å’Œstop"><a href="#3-1-è¿‡æœŸçš„suspend-ã€resume-å’Œstop" class="headerlink" title="3.1 è¿‡æœŸçš„suspend()ã€resume()å’Œstop()"></a>3.1 è¿‡æœŸçš„suspend()ã€resume()å’Œstop()</h4><p>åœ¨Java APIä¸­ï¼Œsuspend()ã€resume()å’Œstop()ä¸‰ä¸ªæ–¹æ³•æ˜¯è¿‡æœŸçš„ï¼Œä¸å»ºè®®ä½¿ç”¨çš„ã€‚<br>ä¸»è¦åŸå› æ˜¯ï¼šsuspend()åœ¨è°ƒç”¨åï¼Œçº¿ç¨‹ä¸æ˜¯æ”¾å·²ç»å æœ‰çš„èµ„æºæ¯”å¦‚è¯´é”ï¼Œè€Œæ˜¯å æœ‰ç€èµ„æºè¿›å…¥ç¡çœ ï¼Œè¿™æ ·å®¹æ˜“å¼•å‘æ­»é”çŠ¶æ€ã€‚stop()æ–¹æ³•åœ¨ç»ˆç»“ä¸€ä¸ªçº¿ç¨‹æ—¶ä¸ä¼šä¿è¯çº¿ç¨‹èµ„æºçš„é‡Šæ”¾ï¼Œå› æ­¤å¯¼è‡´çº¿ç¨‹å¤„äºä¸ç¡®å®šçš„çŠ¶æ€ä¸‹ã€‚</p><p><strong><em>sleepå’ŒsuspendåŒºåˆ«ï¼š</em></strong><br>ç›¸åŒç‚¹ï¼šsleepå’Œsuspendéƒ½ä¼šæŒæœ‰å æœ‰çš„èµ„æºä¸é‡Šæ”¾ã€‚<br>ä¸åŒç‚¹ï¼šsleepé˜»å¡ï¼ˆTIMED_WAITINGï¼‰åï¼Œç»è¿‡ä¸€æ®µæ—¶é—´è‡ªè¡Œæ¢å¤è¿è¡Œã€‚è€Œsuspendå¿…é¡»ä½¿ç”¨resume()æ˜¾ç¤ºçš„æ¢å¤ï¼Œå¦‚æœä¸ä½¿ç”¨resume()æˆ–è€…resume()å¤±è´¥ï¼Œå¾ˆå®¹æ˜“å¼•èµ·èµ„æºå ç”¨å¯¼è‡´çš„æ­»é”ã€‚</p><h4 id="3-2-å®‰å…¨çš„ç»ˆæ­¢çº¿ç¨‹"><a href="#3-2-å®‰å…¨çš„ç»ˆæ­¢çº¿ç¨‹" class="headerlink" title="3.2 å®‰å…¨çš„ç»ˆæ­¢çº¿ç¨‹"></a>3.2 å®‰å…¨çš„ç»ˆæ­¢çº¿ç¨‹</h4><p>åœ¨ç¬¬2å°èŠ‚æåˆ°çš„ä¸­æ–­æ˜¯çº¿ç¨‹çš„ä¸€ä¸ªæ ‡ç¤ºä½ï¼Œä¸­æ–­æ“ä½œæ˜¯ä¸€ç§ç®€ä¾¿çš„çº¿ç¨‹é—´äº¤äº’æ–¹å¼ï¼Œè¿™ç§äº¤äº’æ–¹å¼é€‚åˆç”¨æ¥å–æ¶ˆå’Œåœæ­¢ä»»åŠ¡ã€‚é™¤äº†ä¸­æ–­ï¼Œè¿˜å¯ä»¥ä½¿ç”¨åŒæ­¥å˜é‡æ¥æ§åˆ¶æ˜¯å¦åœæ­¢å¹¶ç»ˆæ­¢è¯¥çº¿ç¨‹ã€‚<br><strong><em>çº¿ç¨‹çš„ç»ˆæ­¢ä¸æ˜¯ç›´æ¥å¼ºåˆ¶çº¿ç¨‹åœæ­¢ï¼Œè€Œæ˜¯å¼•å¯¼çº¿ç¨‹è¿è¡Œç»“æŸã€‚</em></strong></p><h3 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h3><p><a href="https://www.ibm.com/developerworks/cn/java/j-lo-javasecurity/" target="_blank" rel="noopener">Java å®‰å…¨æ¨¡å‹ä»‹ç»</a><br><a href="https://docs.oracle.com/javase/7/docs/api/" target="_blank" rel="noopener">Class Thread</a><br><a href="https://my.oschina.net/u/2500836/blog/1538667" target="_blank" rel="noopener">Javaçº¿ç¨‹(1)-Threadç±»æºç </a><br><a href="https://book.douban.com/subject/26591326/" target="_blank" rel="noopener">Javaå¹¶å‘ç¼–ç¨‹è‰ºæœ¯</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ä¸Šç¯‡å¯¹&lt;a href=&quot;https://zhongyp.me/2018/03/16/concurrent/2017-03-16-Thread-brief/&quot;&gt;ä»€ä¹ˆæ˜¯çº¿ç¨‹&lt;/a&gt;åšäº†ç®€å•çš„ä»‹ç»,æœ¬ç¯‡ä¸»è¦æ˜¯ä»æ„é€ çº¿ç¨‹ã€ä¸­æ–­çº¿ç¨‹ã€ç»ˆæ­¢çº¿ç¨‹3ä¸ªæ–¹é¢äº†è§£çº¿ç¨‹ã€‚&lt;/p&gt;
&lt;h3 id=
      
    
    </summary>
    
    
      <category term="å¹¶å‘" scheme="http://zhongyp.me/tags/%E5%B9%B6%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çš„åšå®¢</title>
    <link href="http://zhongyp.me/2018/11/28/life/2018-11-29-myblog/"/>
    <id>http://zhongyp.me/2018/11/28/life/2018-11-29-myblog/</id>
    <published>2018-11-27T16:00:00.000Z</published>
    <updated>2018-12-06T02:25:57.271Z</updated>
    
    <content type="html"><![CDATA[<p><strong>å°‘å¹´æ—¶ä»£å¯¹æœªæ¥ç”Ÿæ´»çš„æƒ³è±¡è™½ç„¶æœ¦èƒ§ï¼Œä½†å®é™…ä¸Šå´æœ‰ç€æé«˜çš„æœŸå¾…ã€‚ä½ æ€»è§‰å¾—ç°åœ¨åªæ˜¯æ´»ç€ï¼Œç­‰å¾…ç€ï¼Œç­‰å¾…ç€æŸä¸€åˆ»ä¼šé‡‘é¼“é½é¸£ï¼Œå…‰èŠ’å››å°„ï¼Œç„¶åï¼ŒçœŸæ­£çš„ç”Ÿæ´»å¼€å§‹äº†ã€‚ä½†æ—¥å¸¸ç”Ÿæ´»è‡ªæœ‰å®ƒè‡ªå·±ç¼“æ…¢è€Œå¹³é™çš„èŠ‚å¥ï¼Œå®ƒæ³¢æ¾œä¸å…´åœ°å‘å‰å¼¥æ¼«ï¼Œè¶Šè¿‡å²æœˆã€‚ç›´åˆ°ä½ éª¤ç„¶å‘ç°ï¼Œå¤§å¤šæ•°äººçš„ç”Ÿæ´»ä¸ä¼šæœ‰é‡‘é¼“é½é¸£çš„å¼€å§‹ï¼Œå¤§å¤šæ•°äººçš„ç”Ÿæ´»ï¼Œå°±æ˜¯ä¸€ç§æ°´æ»´çŸ³ç©¿çš„å•è°ƒå’Œå®é™ã€‚</strong></p><p>å¼€å§‹å†™åšå®¢ä¸€æ®µæ—¶é—´äº†ï¼Œåªæ˜¯æƒ³æ‰¾ä¸ªåœ°æ–¹è®°å½•ä¸‹è‡ªå·±çš„çœ‹è¿‡çš„ã€å­¦è¿‡çš„çŸ¥è¯†ï¼Œè®°å½•ä¸‹å­¦ä¹ çš„è¿‡ç¨‹ä¸­è‡ªå·±çš„æƒ³æ³•/æ„Ÿæ‚Ÿã€‚thinkingâ€¦ğŸŒ</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;strong&gt;å°‘å¹´æ—¶ä»£å¯¹æœªæ¥ç”Ÿæ´»çš„æƒ³è±¡è™½ç„¶æœ¦èƒ§ï¼Œä½†å®é™…ä¸Šå´æœ‰ç€æé«˜çš„æœŸå¾…ã€‚ä½ æ€»è§‰å¾—ç°åœ¨åªæ˜¯æ´»ç€ï¼Œç­‰å¾…ç€ï¼Œç­‰å¾…ç€æŸä¸€åˆ»ä¼šé‡‘é¼“é½é¸£ï¼Œå…‰èŠ’å››å°„ï¼Œç„¶åï¼ŒçœŸæ­£çš„ç”Ÿæ´»å¼€å§‹äº†ã€‚ä½†æ—¥å¸¸ç”Ÿæ´»è‡ªæœ‰å®ƒè‡ªå·±ç¼“æ…¢è€Œå¹³é™çš„èŠ‚å¥ï¼Œå®ƒæ³¢æ¾œä¸å…´åœ°å‘å‰å¼¥æ¼«ï¼Œè¶Šè¿‡å²æœˆã€‚ç›´åˆ°ä½ éª¤ç„¶å‘ç°ï¼Œå¤§å¤šæ•°äººçš„ç”Ÿæ´»ä¸ä¼šæœ‰é‡‘é¼“
      
    
    </summary>
    
    
      <category term="ç”Ÿæ´»" scheme="http://zhongyp.me/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>åšå®¢å£°æ˜</title>
    <link href="http://zhongyp.me/2018/11/28/life/2018-11-29-blog-announce/"/>
    <id>http://zhongyp.me/2018/11/28/life/2018-11-29-blog-announce/</id>
    <published>2018-11-27T16:00:00.000Z</published>
    <updated>2018-12-06T02:25:30.616Z</updated>
    
    <content type="html"><![CDATA[<p>åšå®¢ä¸­çš„æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šè¯´æ˜ï¼Œå‡ä¸ºåŸåˆ›ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„ï¼Œå¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼›å¿…é¡»åœ¨æ–‡ç« ä¸­ç»™å‡ºåŸæ–‡è¿æ¥ï¼›å¦åˆ™å¿…ç©¶æ³•å¾‹è´£ä»»ã€‚<br>åšå®¢ä¸­å¯èƒ½æœ‰äº›å†…å®¹æ‘˜å½•è‡³åˆ«äººçš„æ–‡ç« /åšå®¢/ä¹¦ï¼Œä»…ä¸ºä¸ªäººæ”¶è—ï¼Œåˆ†äº«çŸ¥è¯†ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åšä¸»è¿›è¡Œåˆ é™¤ã€‚ğŸ“§ï¼š<a href="mailto:zhongyp001@163.com" target="_blank" rel="noopener">zhongyp001@163.com</a>ï¼Œæ”¶åˆ°åä¸€å®šå°½å¿«åˆ é™¤ä¸æ‚¨çš„ç›¸å…³å†…å®¹ã€‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;åšå®¢ä¸­çš„æ–‡ç« ï¼Œå¦‚æœæ²¡æœ‰ç‰¹æ®Šè¯´æ˜ï¼Œå‡ä¸ºåŸåˆ›ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„ï¼Œå¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼›å¿…é¡»åœ¨æ–‡ç« ä¸­ç»™å‡ºåŸæ–‡è¿æ¥ï¼›å¦åˆ™å¿…ç©¶æ³•å¾‹è´£ä»»ã€‚&lt;br&gt;åšå®¢ä¸­å¯èƒ½æœ‰äº›å†…å®¹æ‘˜å½•è‡³åˆ«äººçš„æ–‡ç« /åšå®¢/ä¹¦ï¼Œä»…ä¸ºä¸ªäººæ”¶è—ï¼Œåˆ†äº«çŸ¥è¯†ï¼Œå¦‚æœ‰ä¾µæƒï¼Œè¯·è”ç³»åšä¸»è¿›è¡Œåˆ é™¤ã€‚ğŸ“§ï¼š&lt;a href=&quot;mailto
      
    
    </summary>
    
    
      <category term="ç”Ÿæ´»" scheme="http://zhongyp.me/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>å¹¶å‘çŸ¥è¯†æ¶æ„</title>
    <link href="http://zhongyp.me/2018/11/16/concurrent/2018-11-27-concurrency-structure/"/>
    <id>http://zhongyp.me/2018/11/16/concurrent/2018-11-27-concurrency-structure/</id>
    <published>2018-11-15T16:00:00.000Z</published>
    <updated>2018-12-04T06:03:49.953Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/media/concurrency.png" alt="Javaå¹¶å‘æ¶æ„å›¾"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/media/concurrency.png&quot; alt=&quot;Javaå¹¶å‘æ¶æ„å›¾&quot;&gt;&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="å¹¶å‘" scheme="http://zhongyp.me/tags/%E5%B9%B6%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Gitå¸¸ç”¨å‘½ä»¤æ€»ç»“</title>
    <link href="http://zhongyp.me/2018/10/23/utils/2018-10-23-git/"/>
    <id>http://zhongyp.me/2018/10/23/utils/2018-10-23-git/</id>
    <published>2018-10-22T16:00:00.000Z</published>
    <updated>2018-11-27T03:20:14.166Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h2><p>ç³»ç»Ÿç³»ç»Ÿæ€§çš„å­¦ä¹ Gitï¼Œè¯·ç§»æ­¥<a href="https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%85%B3%E4%BA%8E%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6" target="_blank" rel="noopener">Gitä¸­æ–‡å­¦ä¹ æ–‡æ¡£</a>ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯åˆ†ç±»è®°å½•ä¸€ä¸‹gitçš„å¸¸ç”¨å‘½ä»¤ã€‚<br><img src="/media/15403035072735.png" alt="Gitç‰ˆæœ¬æ§åˆ¶ç³»ç»ŸVCSåŸºæœ¬æ“ä½œæµç¨‹å›¾"></p><h2 id="å¸¸ç”¨å‘½ä»¤æ€»ç»“"><a href="#å¸¸ç”¨å‘½ä»¤æ€»ç»“" class="headerlink" title="å¸¸ç”¨å‘½ä»¤æ€»ç»“"></a>å¸¸ç”¨å‘½ä»¤æ€»ç»“</h2><h3 id="Gitåˆå§‹åŒ–"><a href="#Gitåˆå§‹åŒ–" class="headerlink" title="Gitåˆå§‹åŒ–"></a>Gitåˆå§‹åŒ–</h3><p><code>git init</code> å°†å½“å‰ç›®å½•å˜ä¸ºå¯ç®¡ç†çš„ä»“åº“<br><code>git clone</code> å…‹éš†ä¸€ä¸ªä»“åº“åˆ°æœ¬åœ°<br><code>git clone -b branch uri</code> å…‹éš†æŒ‡å®šbranchåˆ†æ”¯åˆ°æœ¬åœ°<br><code>git config user.name</code> æŸ¥çœ‹ç”¨æˆ·å<br><code>git config user.email</code> æŸ¥çœ‹é‚®ç®±</p><h3 id="è®¾ç½®ä¸é…ç½®"><a href="#è®¾ç½®ä¸é…ç½®" class="headerlink" title="è®¾ç½®ä¸é…ç½®"></a>è®¾ç½®ä¸é…ç½®</h3><p><code>git config -global user.name/email &quot;å‚æ•°&quot;</code> gitæ˜¯åˆ†å¸ƒå¼ç‰ˆæœ¬æ§åˆ¶ï¼Œæ‰€ä»¥æ·»åŠ ç”¨æˆ·åå’Œé‚®ç®±ä½œä¸ºä¸€ä¸ªæ ‡è¯†<br><code>ssh -keygen -t rsa -C &quot;email&quot;</code> ç”Ÿæˆæœ¬åœ°ssh key</p><h3 id="æœ¬åœ°ç‰ˆæœ¬åº“"><a href="#æœ¬åœ°ç‰ˆæœ¬åº“" class="headerlink" title="æœ¬åœ°ç‰ˆæœ¬åº“"></a>æœ¬åœ°ç‰ˆæœ¬åº“</h3><p><code>git add &quot;filename.*&quot;</code> æ·»åŠ åˆ°æš‚å­˜åŒº<br><code>git commit -m &quot;filename.*&quot;</code> æäº¤åˆ°ä»“åº“<br><code>git commit --amend</code> å°è¯•é‡æ–°æäº¤,è¿™ä¸ªæ“ä½œéœ€è¦ç»„åˆæ“ä½œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git add file1 // å°†file1 æ·»åŠ è‡³ç¼“å­˜åŒº</span><br><span class="line">git commmit -m &quot;update files&quot; //æäº¤file1åˆ°æœ¬åœ°ä»“åº“,æäº¤å®Œå‘ç°å¿˜è®°file2æ²¡æœ‰æäº¤ï¼Œåˆ™ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼Œæäº¤file2å¹¶è¦†ç›–ä¹‹å‰çš„æäº¤ä¿¡æ¯ã€‚</span><br><span class="line">git add file2 // æ·»åŠ file2</span><br><span class="line">git commit -amend // å°è¯•é‡æ–°æäº¤commitä¿¡æ¯ï¼Œå¹¶è¦†ç›–æ‰ä¹‹å‰çš„æäº¤ä¿¡æ¯</span><br></pre></td></tr></table></figure><p><code>git status</code> æŸ¥çœ‹æ–‡ä»¶çŠ¶æ€<br><code>git diff filename.*</code> æŸ¥çœ‹ä¿®æ”¹äº†ä»€ä¹ˆ<br><code>git log</code> çœ‹çœ‹æ¯æ¬¡ä¿®æ”¹çš„æ—¥å¿—<br><code>git log --pretty=oneline</code> æ—¥å¿—æ˜¾ç¤ºä¸ºç¼©ç•¥ç‰ˆ<br>æ³¨ï¼š<code>git reset</code> ä¸åŠ <code>--hard</code>å‚æ•°å¯¹å½“å‰å·¥ä½œåŒºæ–‡ä»¶ä¸ä¼šæœ‰ä»»ä½•ä¿®æ”¹ï¼Œåªæ˜¯å¯¹ç¼“å­˜åŒºè¿›è¡Œæ“ä½œã€‚ä¸€æ—¦åŠ äº†å‚æ•°ï¼Œæ“ä½œä¸€å®šè¦æ…é‡ï¼Œå¦åˆ™ä½ å½“å‰å·¥ä½œåŒºä¸­çš„ä¿®æ”¹å°†ä¼šå…¨éƒ¨è¢«æ¸…é™¤ã€‚<br><code>git reset HEAD file</code> å°†fileé€€å›åˆ°å½“å‰ç‰ˆæœ¬ï¼ˆä»…ä»…æ˜¯å¯¹ç¼“å­˜åŒºè¿›è¡Œæ“ä½œï¼‰<br><code>git reset --hard HEAD^</code> é€€å›åˆ°ä¸Šä¸€ç‰ˆæœ¬<br><code>git reset --hard HEAD^^</code> é€€å›åˆ°å‰äºŒçš„ç‰ˆæœ¬<br><code>git reset --hard HEAD~100</code> é€€å›åˆ°å‰100ç‰ˆæœ¬<br><code>git reset --hard ç‰ˆæœ¬å·</code> é€€å›åˆ°ä¸€ä¸ªç‰¹å®šçš„ç‰ˆæœ¬<br><code>git reflog</code> æŸ¥çœ‹ç‰ˆæœ¬å·å’Œä¸Šä¸€ä¸ªå‘½ä»¤ä¸€å—ç”¨æ•ˆæœæ¯”è¾ƒå¥½<br><code>git reset --mixed</code> å°†å½“å‰æ–‡ä»¶æ’¤å‡ºç¼“å­˜åŒºï¼Œä¿ç•™æ–‡ä»¶ä¿®æ”¹<br><code>git rm --cached file</code> åˆ é™¤ç¼“å­˜åŒºfile<br><code>git checkout -- file</code> æ¢å¤å·¥ä½œåŒºfileï¼ˆå–æ¶ˆå·¥ä½œåŒºæ–‡ä»¶çš„ä¿®æ”¹ï¼‰</p><h3 id="è¿œç¨‹ç‰ˆæœ¬åº“"><a href="#è¿œç¨‹ç‰ˆæœ¬åº“" class="headerlink" title="è¿œç¨‹ç‰ˆæœ¬åº“"></a>è¿œç¨‹ç‰ˆæœ¬åº“</h3><p><code>git remote add origin è¿œç¨‹gitåœ°å€</code> è¿æ¥<br><code>git push -u origin master</code> æŠŠæœ¬åœ°åº“åˆ†æ”¯masterå†…å®¹æ¨é€åˆ°è¿œç¨‹åº“ï¼ˆ-u å‘½ä»¤åœ¨ç¬¬ä¸€æ¬¡å…³è”æœ¬åœ°åº“å’Œè¿œç¨‹åº“æ—¶ä½¿ç”¨ï¼‰<br><code>git clone url</code> å…‹éš†è¿œç¨‹(url)åº“</p><h3 id="gitåˆ†æ”¯æ“ä½œ"><a href="#gitåˆ†æ”¯æ“ä½œ" class="headerlink" title="gitåˆ†æ”¯æ“ä½œ"></a>gitåˆ†æ”¯æ“ä½œ</h3><p>é¦–å…ˆmasterä¸»åˆ†æ”¯åº”è¯¥æ˜¯éå¸¸ç¨³å®šçš„ï¼Œä¹Ÿå°±æ˜¯ç”¨æ¥å‘å¸ƒæ–°ç‰ˆæœ¬ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸å…è®¸åœ¨ä¸Šé¢å¹²æ´»ï¼Œå¹²æ´»ä¸€èˆ¬æƒ…å†µä¸‹åœ¨æ–°å»ºçš„devåˆ†æ”¯ä¸Šå¹²æ´»ï¼Œå¹²å®Œåï¼Œæ¯”å¦‚ä¸Šè¦å‘å¸ƒï¼Œæˆ–è€…è¯´devåˆ†æ”¯ä»£ç ç¨³å®šåå¯ä»¥åˆå¹¶åˆ°ä¸»åˆ†æ”¯masterä¸Šæ¥ã€‚</p><p><code>git branch</code> æŸ¥çœ‹åˆ†æ”¯<br><code>git checkout</code> åˆ‡æ¢åˆ†æ”¯<br><code>git checkout -b</code>  åˆ›å»ºå¹¶åˆ‡æ¢åˆ†æ”¯<br><code>git merge</code> åˆå¹¶åˆ°å½“å‰åˆ†æ”¯<br><code>git branch -d</code>åˆ é™¤æŸåˆ†æ”¯<br><code>git merge --no-ff -m &quot;æ³¨é‡Š&quot;</code>åˆ†æ”¯åˆå¹¶åˆ†æ”¯ç¦ç”¨fast forward<br><code>git stash</code> å°†å½“å‰åˆ†æ”¯çš„å·¥ä½œç°åœºä¿ç•™ä¸‹æ¥<br><code>git stash list</code> æŸ¥çœ‹å·¥ä½œç°åœº<br><code>git stash apply</code> æ¢å¤å†…å®¹ä½†æ˜¯ä½ éœ€è¦git stash dropåˆ é™¤stash<br><code>git stash pop</code> æ¢å¤çš„åŒæ—¶æŠŠstashå†…å®¹ä¹Ÿåˆ é™¤<br><code>git remote</code> æŸ¥çœ‹è¿œç¨‹åº“çš„ä¿¡æ¯<br><code>git remote -v</code> æŸ¥çœ‹è¿œç¨‹åº“çš„è¯¦ç»†ä¿¡æ¯<br><code>git push origin master</code> masterä¸ºæœ¬åœ°çš„åˆ†æ”¯åæ¨é€åˆ†æ”¯<br><code>git checkout -b dev origin/dev</code> devä¸ºåˆ†æ”¯åï¼Œåšå®Œå¼€å‘å<br><code>git push origin dev</code> æ¨é€åˆ°è¿œç¨‹åº“<br><code>git pull</code> æŠ“å–æœ€æ–°çš„æäº¤,å¹¶å°è¯•è‡ªåŠ¨åˆå¹¶åˆ°æœ¬åœ°å½“å‰æ‰€åœ¨çš„åˆ†æ”¯<br><code>git fetch</code> æŠ“å–æœ€æ–°çš„æäº¤ï¼Œä¸ä¼šè‡ªåŠ¨åˆå¹¶ï¼Œå¿…é¡»æ‰‹åŠ¨ã€‚<br><code>git rebase</code> å˜åŸº,å°†æäº¤åˆ°æŸä¸€åˆ†æ”¯ä¸Šçš„æ‰€æœ‰ä¿®æ”¹éƒ½ç§»è‡³å¦ä¸€åˆ†æ”¯ä¸Š<br><code>git rebase --continue</code> <strong><em>ç»§ç»­å˜åŸºæ“ä½œï¼Œä¸€èˆ¬ç”¨äºç¬¬ä¸€æ¬¡å˜åŸºå¤±è´¥åï¼Œè§£å†³å†²çªæ–‡ä»¶ï¼Œå°†å†²çªæ–‡ä»¶æ·»åŠ åˆ°ç¼“å­˜åŒºï¼Œä¸è¦æäº¤ï¼Œç„¶åå†æ‰§è¡Œæ­¤å‘½ä»¤ã€‚å¦‚æœæäº¤äº†ï¼Œæ‰§è¡Œ<code>git rebase --skip</code>å‘½ä»¤å–æ¶ˆrebaseçŠ¶æ€ã€‚</em></strong><br><code>git branch --set-upstream dev origin/dev</code> æŒ‡å®šæœ¬åœ°devåˆ†æ”¯ï¼ˆå·²ç»åˆ›å»ºçš„ï¼‰ä¸è¿œç¨‹origin/devåˆ†æ”¯çš„è¿æ¥<br><code>git branch -u origin/dev</code> æŒ‡å®šå½“å‰æ‰€åœ¨è¿æ¥è¿œç¨‹origin/devåˆ†æ”¯çš„è¿æ¥<br><code>git checkout --track origin/dev</code> åˆ›å»ºæ–°çš„devåˆ†æ”¯ï¼Œåˆ¶å®šè¿œç¨‹è¿æ¥origin/dev</p><p>æ³¨ï¼šå¦‚æœé¡ºç€ä¸€ä¸ªåˆ†æ”¯èµ°ä¸‹å»èƒ½å¤Ÿåˆ°è¾¾å¦ä¸€ä¸ªåˆ†æ”¯ï¼Œé‚£ä¹ˆGitåœ¨åˆå¹¶ä¸¤è€…çš„æ—¶å€™ï¼Œåªä¼šç®€å•çš„å°†æŒ‡é’ˆå‘å‰æ¨è¿›ï¼ˆæŒ‡é’ˆå³ç§»ï¼‰ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹çš„åˆå¹¶æ“ä½œæ²¡æœ‰éœ€è¦è§£å†³çš„åˆ†æ­§â€”â€”è¿™å°±å«åš â€œå¿«è¿›ï¼ˆfast-forwardï¼‰â€ã€‚</p><h3 id="å¤šäººåä½œ"><a href="#å¤šäººåä½œ" class="headerlink" title="å¤šäººåä½œ"></a>å¤šäººåä½œ</h3><ol><li>æ¯å¼€å‘ä¸€ä¸ªæ–°ç‰¹æ€§å¯ä»¥æ–°å»ºä¸€ä¸ªæœ¬åœ°ç‰¹æ€§åˆ†æ”¯ï¼Œå¼€å‘å®Œæˆååˆå¹¶åˆ°æœ¬åœ°ä¸»çº¿ã€‚</li><li>å¦‚æœä¸ä½¿ç”¨ç‰¹æ€§åˆ†æ”¯å¼€å‘å¯ä»¥ä½¿ç”¨<code>git stash</code>ä¿å­˜å½“å‰çš„å·¥ä½œç©ºé—´ã€‚</li><li>è¿œç¨‹ä»£ç å’Œæœ¬åœ°ä»£ç åˆå¹¶æœ‰ä¸¤ç§æ–¹å¼ï¼Œ<code>git pull</code>å’Œ<code>git fetch</code>ï¼Œ<code>git pull</code>å‘½ä»¤ä¼šè‡ªåŠ¨åˆå¹¶è¿œç¨‹ä»£ç ï¼Œå†²çªåéœ€è¦è§£å†³å†²çªåæäº¤ã€‚<code>git fetch</code>ä¸è‡ªåŠ¨å’Œæœ¬åœ°ä»£ç åˆå¹¶ï¼Œéœ€è¦æ‰‹åŠ¨mergeã€‚</li><li>åœ¨åˆå¹¶æ—¶ï¼Œæ ¹æ®é¡¹ç›®æƒ…å†µä½¿ç”¨<a href="https://git-scm.com/book/zh/v2/Git-%E5%88%86%E6%94%AF-%E5%8F%98%E5%9F%BA" target="_blank" rel="noopener">å˜åŸº</a>ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè¿œç¨‹åº“ä¸ä¿ç•™æœ¬åœ°æ“ä½œå†å²ã€‚</li><li><strong><em>ä½¿ç”¨å˜åŸºåŸåˆ™</em></strong>ï¼šåªå¯¹å°šæœªæ¨é€æˆ–åˆ†äº«ç»™åˆ«äººçš„æœ¬åœ°ä¿®æ”¹æ‰§è¡Œå˜åŸºæ“ä½œæ¸…ç†å†å²ï¼Œä»ä¸å¯¹å·²æ¨é€è‡³åˆ«å¤„çš„æäº¤æ‰§è¡Œå˜åŸºæ“ä½œï¼Œè¿™æ ·ï¼Œä½ æ‰èƒ½äº«å—åˆ°ä¸¤ç§æ–¹å¼å¸¦æ¥çš„ä¾¿åˆ©ã€‚</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Git&quot;&gt;&lt;a href=&quot;#Git&quot; class=&quot;headerlink&quot; title=&quot;Git&quot;&gt;&lt;/a&gt;Git&lt;/h2&gt;&lt;p&gt;ç³»ç»Ÿç³»ç»Ÿæ€§çš„å­¦ä¹ Gitï¼Œè¯·ç§»æ­¥&lt;a href=&quot;https://git-scm.com/book/zh/v2/%E8%B5%B7%E
      
    
    </summary>
    
    
      <category term="Utils" scheme="http://zhongyp.me/tags/Utils/"/>
    
  </entry>
  
  <entry>
    <title>Spring AOP</title>
    <link href="http://zhongyp.me/2018/10/03/spring/2018-09-28-AOP/"/>
    <id>http://zhongyp.me/2018/10/03/spring/2018-09-28-AOP/</id>
    <published>2018-10-02T16:00:00.000Z</published>
    <updated>2018-11-30T11:39:42.672Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h2><p>æœ¬ç¯‡æ–‡ç« ç¿»è¯‘è‡ª<a href="https://www.tutorialspoint.com/spring/aop_with_spring.htm" target="_blank" rel="noopener">AOP with Spring</a>ï¼Œä¸»è¦ä»‹ç»æ˜¯å…³äºAOPçš„æ¦‚å¿µã€‚</p><h3 id="Brief-introduction-ï¼ˆç®€ä»‹ï¼‰"><a href="#Brief-introduction-ï¼ˆç®€ä»‹ï¼‰" class="headerlink" title="Brief introduction ï¼ˆç®€ä»‹ï¼‰"></a>Brief introduction ï¼ˆç®€ä»‹ï¼‰</h3><p>One of the key components of Spring Framework is the Aspect oriented programming (AOP) framework. Aspect-Oriented Programming entails breaking down program logic into distinct parts called so-called concerns. The functions that span multiple points of an application are called cross-cutting concerns and these cross-cutting concerns are conceptually separate from the applicationâ€™s business logic. There are various common good examples of aspects like logging, auditing, declarative transactions, security, caching, etc.</p><p>The key unit of modularity in OOP is the class, whereas in AOP the unit of modularity is the aspect. Dependency Injection helps you decouple your application objects from each other and AOP helps you decouple cross-cutting concerns from the objects that they affect. AOP is like triggers in programming languages such as Perl, .NET, Java, and others.</p><p>Spring AOP module provides interceptors to intercept an application. For example, when a method is executed, you can add extra functionality before or after the method execution.</p><p>ç¿»è¯‘ï¼š</p><p>AOPé¢å‘åˆ‡é¢ç¼–ç¨‹æ˜¯Springæ¡†æ¶ä¸­çš„æœ€å…³é”®çš„éƒ¨åˆ†ä¹‹ä¸€ã€‚é¢å‘åˆ‡é¢ç¼–ç¨‹éœ€è¦æ‹†åˆ†ç¨‹åºé€»è¾‘åˆ°è¢«ç§°ä¸ºå…³æ³¨ç‚¹çš„ä¸åŒéƒ¨åˆ†ã€‚ä¸€ä¸ªåœ¨åº”ç”¨ç¨‹åºå†…è·¨è¶Šå¤šä¸ªç‚¹çš„æ–¹æ³•è¢«ç§°ä¸ºæ¨ªåˆ‡ç‚¹ï¼Œè¿™äº›æ¨ªåˆ‡ç‚¹å’Œåº”ç”¨çš„ä¸šåŠ¡é€»è¾‘åœ¨æ¦‚å¿µä¸Šæ˜¯åˆ†å¼€çš„ã€‚ç›®å‰å·²ç»æœ‰å¾ˆå¤šåº”ç”¨åˆ‡é¢çš„ä¾‹å­ï¼Œæ¯”å¦‚æ—¥å¿—ï¼Œå®¡è®¡ï¼Œå£°æ˜å¼äº‹åŠ¡ï¼Œå®‰å…¨ï¼Œç¼“å­˜ç­‰ã€‚</p><p>åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œæ¨¡å—åŒ–çš„å…³é”®å•å…ƒæ˜¯ç±»ï¼Œä½†æ˜¯åœ¨é¢å‘åˆ‡é¢ç¼–ç¨‹ä¸­ï¼Œæ¨¡å—åŒ–å•å…ƒæ˜¯åˆ‡é¢ã€‚ä¾èµ–æ³¨å…¥å¸®åŠ©ä½ å°†åº”ç”¨ä¸­çš„å¯¹è±¡ç›¸äº’è§£è€¦ï¼ŒAOPå¸®åŠ©ä½ å°†æ¨ªåˆ‡ç‚¹ä»å®ƒä»¬ä½œç”¨çš„å¯¹è±¡ä¸­è§£è€¦ã€‚AOPå°±åƒæ˜¯Perl,.NET,Javaæˆ–è€…å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸­çš„è§¦å‘å™¨ã€‚</p><p>Spring AOPæ¨¡å—æä¾›æ‹¦æˆªåº”ç”¨çš„æ‹¦æˆªå™¨ã€‚ä¸¾ä¸ªğŸŒ°ï¼Œä½ å¯ä»¥åœ¨ä½ è¿è¡Œçš„æ–¹æ³•ä¹‹å‰æˆ–è€…ä¹‹åæ·»åŠ é¢å¤–çš„åŠŸèƒ½æˆ–è€…æ–¹æ³•ã€‚</p><h3 id="AOP-Terminologiesï¼ˆAOP-æœ¯è¯­ï¼‰"><a href="#AOP-Terminologiesï¼ˆAOP-æœ¯è¯­ï¼‰" class="headerlink" title="AOP Terminologiesï¼ˆAOP æœ¯è¯­ï¼‰"></a>AOP Terminologiesï¼ˆAOP æœ¯è¯­ï¼‰</h3><h4 id="Aspectï¼ˆåˆ‡é¢ï¼‰"><a href="#Aspectï¼ˆåˆ‡é¢ï¼‰" class="headerlink" title="Aspectï¼ˆåˆ‡é¢ï¼‰"></a>Aspectï¼ˆåˆ‡é¢ï¼‰</h4><p>This is a module which has a set of APIs providing cross-cutting requirements. For example, a logging module would be called AOP aspect for logging. An application can have any number of aspects depending on the requirement.</p><p>ç¿»è¯‘ï¼š Aspectä¸€ä¸ªæä¾›æ¨ªåˆ‡ï¼ˆcross-cuttingï¼‰APIsçš„æ¨¡å—ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæ—¥å¿—æ¨¡å—è¢«ç§°ä¸ºAOP æ—¥å¿—åˆ‡é¢ã€‚ä¸€ä¸ªåº”ç”¨å¯ä»¥æ ¹æ®éœ€æ±‚æ‹¥æœ‰ä»»ä½•æ•°é‡çš„åˆ‡é¢ã€‚</p><h4 id="Join-pointï¼ˆè¿æ¥ç‚¹ï¼‰"><a href="#Join-pointï¼ˆè¿æ¥ç‚¹ï¼‰" class="headerlink" title="Join pointï¼ˆè¿æ¥ç‚¹ï¼‰"></a>Join pointï¼ˆè¿æ¥ç‚¹ï¼‰</h4><p>This represents a point in your application where you can plug-in the AOP aspect. You can also say, it is the actual place in the application where an action will be taken using Spring AOP framework.</p><p>ç¿»è¯‘ï¼š åœ¨åº”ç”¨ä¸­å¯ä»¥æ’å…¥AOPåˆ‡é¢çš„åœ°æ–¹å¯è¢«æŠ½è±¡ä¸ºä¸€ä¸ªç‚¹ã€‚ä½ ä¹Ÿå¯ä»¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªåœ¨åº”ç”¨ä¸­å­˜åœ¨çš„åœ°æ–¹ï¼Œè¿™ä¸ªåœ°æ–¹å°†è¢«Spring AOP æ¡†æ¶æ‰§è¡Œä¸€äº›åŠ¨ä½œã€‚</p><p>Adviceï¼ˆé€šçŸ¥ï¼‰</p><p>This is the actual action to be taken either before or after the method execution. This is an actual piece of code that is invoked during the program execution by Spring AOP framework.</p><p>ç¿»è¯‘ï¼šAdviceæ˜¯ä¸€ä¸ªå®é™…çš„åŠ¨ä½œï¼Œå®ƒå°†åœ¨æ–¹æ³•æ‰§è¡Œå‰å’Œæ–¹æ³•æ‰§è¡Œåæ‰§è¡Œã€‚è¿™æ®µä»£ç é€šè¿‡Spring AOPæ¡†æ¶åœ¨ç¨‹åºè¿è¡Œæ—¶è¢«è°ƒç”¨ã€‚</p><h4 id="Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰"><a href="#Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰" class="headerlink" title="Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰"></a>Pointcutï¼ˆåˆ‡å…¥ç‚¹ï¼‰</h4><p>This is a set of one or more join points where an advice should be executed. You can specify pointcuts using expressions or patterns as we will see in our AOP examples.</p><p>ç¿»è¯‘ï¼šPointcutæ˜¯ä¸€ä¸ªæˆ–è€…å¤šä¸ªè¿æ¥ç‚¹çš„é›†åˆã€‚æ­£å¦‚æˆ‘ä»¬å°†åœ¨AOPä¾‹å­ä¸­çœ‹åˆ°çš„ï¼Œä½ å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼åˆ¶å®šä½ çš„åˆ‡å…¥ç‚¹ã€‚</p><h4 id="Introductionï¼ˆå¼•å…¥ï¼‰"><a href="#Introductionï¼ˆå¼•å…¥ï¼‰" class="headerlink" title="Introductionï¼ˆå¼•å…¥ï¼‰"></a>Introductionï¼ˆå¼•å…¥ï¼‰</h4><p>An introduction allows you to add new methods or attributes to the existing classes.</p><p>ç¿»è¯‘ï¼šå¼•å…¥å¯ä»¥å…è®¸ä½ æ·»åŠ æ–°çš„æ–¹æ³•æˆ–è€…å±æ€§åˆ°å·²ç»å­˜åœ¨çš„ç±»ä¸­ã€‚</p><h4 id="Target-object"><a href="#Target-object" class="headerlink" title="Target object"></a>Target object</h4><p>The object being advised by one or more aspects. This object will always be a proxied object, also referred to as the advised object.</p><p>ç¿»è¯‘ï¼šè¿™ä¸ªå¯¹è±¡è¢«ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ‡é¢é€šçŸ¥ã€‚è¿™ä¸ªå¯¹è±¡ä¸€èˆ¬æ˜¯ä»£ç†å¯¹è±¡ï¼Œä½œä¸ºè¢«é€šçŸ¥å¯¹è±¡å¼•ç”¨ã€‚</p><h4 id="Weavingï¼ˆç»‡å…¥ï¼‰"><a href="#Weavingï¼ˆç»‡å…¥ï¼‰" class="headerlink" title="Weavingï¼ˆç»‡å…¥ï¼‰"></a>Weavingï¼ˆç»‡å…¥ï¼‰</h4><p>Weaving is the process of linking aspects with other application types or objects to create an advised object. This can be done at compile time, load time, or at runtime.</p><p>ç¿»è¯‘ï¼šç»‡å…¥æ˜¯é“¾æ¥åˆ‡é¢å’Œå…¶ä»–åº”ç”¨ç±»å‹æˆ–è€…å¯¹è±¡æ¥åˆ›å»ºé€šçŸ¥å¯¹è±¡çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥åœ¨ç¼–è¯‘ã€åŠ è½½æˆ–è€…æ‰§è¡ŒæœŸé—´è¿›è¡Œã€‚</p><h3 id="Types-of-Advice"><a href="#Types-of-Advice" class="headerlink" title="Types of Advice"></a>Types of Advice</h3><p>Spring aspects can work with five kinds of advice mentioned as follows.<br>ç¿»è¯‘ï¼šSpring åˆ‡é¢å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æåˆ°çš„äº”ç§advice</p><ul><li><p>before: Run advice before a method execution.</p></li><li><p>after: Run advice after a method execution.</p></li><li><p>after-returning: Run advice after the a method execution only if method completes successfully.</p></li><li><p>after-throwing: Run advice after the method execution only if method exits by throwing an exception.</p></li><li><p>around: Run advice before and after the advised method is invoked.</p></li></ul><h3 id="Custom-Aspects-Implementation-è‡ªå®šä¹‰æ¥å£å®ç°"><a href="#Custom-Aspects-Implementation-è‡ªå®šä¹‰æ¥å£å®ç°" class="headerlink" title="Custom Aspects Implementation(è‡ªå®šä¹‰æ¥å£å®ç°)"></a>Custom Aspects Implementation(è‡ªå®šä¹‰æ¥å£å®ç°)</h3><p>XML Schema basedï¼ˆåŸºäºXMLæ¨¡å¼ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;beans xmlns=&quot;http:www.springframework.org/schema/beans&quot;</span><br><span class="line">       xmlns:xsi=&quot;http:www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">       xmlns:aop=&quot;http:www.springframework.org/schema/aop&quot;</span><br><span class="line">       xmlns:tx=&quot;http:www.springframework.org/schema/tx&quot;</span><br><span class="line">       xsi:schemaLocation=&quot;http:www.springframework.org/schema/beans</span><br><span class="line">        http:www.springframework.org/schema/beans/spring-beans-4.2.xsd</span><br><span class="line">        http:www.springframework.org/schema/aop</span><br><span class="line">        http:www.springframework.org/schema/aop/spring-aop-4.2.xsd&quot;&gt;</span><br><span class="line">    &lt;!-- ä¸šåŠ¡é€»è¾‘ç±»--AOPè¿æ¥ç‚¹ --&gt;</span><br><span class="line">    &lt;bean id=&quot;aopTest&quot; class=&quot;com.zhongyp.zen.service.aop.AOPTestService&quot; /&gt;</span><br><span class="line">    &lt;!--AOPåˆ‡é¢--&gt;</span><br><span class="line">    &lt;bean id=&quot;timeHandler&quot; class=&quot;com.zhongyp.zen.service.handler.TimeHandler&quot; /&gt;</span><br><span class="line">    &lt;!--AOPåˆ‡é¢--&gt;</span><br><span class="line">    &lt;bean id=&quot;printHandler&quot; class=&quot;com.zhongyp.zen.service.handler.PrintHandler&quot;&gt;&lt;/bean&gt;</span><br><span class="line"></span><br><span class="line">    &lt;aop:aspectj-autoproxy /&gt;</span><br><span class="line">    &lt;aop:config&gt;</span><br><span class="line">        &lt;!-- pointcutåˆ‡å…¥ç‚¹ï¼ˆAOPè¿æ¥ç‚¹çš„é›†åˆï¼‰--&gt;</span><br><span class="line">        &lt;aop:pointcut id=&quot;pointcut&quot; expression=&quot;execution(* com.zhongyp.zen.service.*.*.*(..))&quot; /&gt;</span><br><span class="line">        &lt;!-- åˆ‡é¢ --&gt;</span><br><span class="line">        &lt;aop:aspect id=&quot;time&quot; ref=&quot;timeHandler&quot;&gt;</span><br><span class="line">            &lt;!-- AOP Advice --&gt;</span><br><span class="line">            &lt;aop:before method=&quot;printStartTime&quot; pointcut-ref=&quot;pointcut&quot; /&gt;</span><br><span class="line">            &lt;aop:after method=&quot;printEndTime&quot; pointcut-ref=&quot;pointcut&quot; /&gt;</span><br><span class="line">        &lt;/aop:aspect&gt;</span><br><span class="line">        &lt;aop:aspect id=&quot;print&quot; ref=&quot;printHandler&quot;&gt;</span><br><span class="line">            &lt;aop:after-returning method=&quot;printString&quot; pointcut-ref=&quot;pointcut&quot;&gt;&lt;/aop:after-returning&gt;</span><br><span class="line">        &lt;/aop:aspect&gt;</span><br><span class="line">    &lt;/aop:config&gt;</span><br><span class="line">&lt;/beans&gt;</span><br></pre></td></tr></table></figure><p>@AspectJ basedï¼ˆåŸºäºåˆ‡é¢æ³¨è§£ï¼‰</p><p>æ³¨è§£æ–¹å¼å¯ä»¥å°†ä¸Šè¿°xmlé…ç½®ä»¥æ³¨è§£çš„å½¢å¼é…ç½®ä¸€ä¸‹ï¼Œæˆ‘è¿™é‡Œåªæ˜¯ç»™å‡ºä¸€ä¸ªæ ·ä¾‹ï¼Œå…¶ä»–çš„è¿˜éœ€è¯»è€…è‡ªå·±å®è·µã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@Aspect</span><br><span class="line">@Component(&quot;logHandler&quot;)</span><br><span class="line">public class LogHandler &#123;</span><br><span class="line">    @Pointcut(&quot;execution(* com.zhongyp.zen.service.*.*.*(..))&quot;)</span><br><span class="line">    private void hehe()&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    @Before(&quot;hehe()&quot;)</span><br><span class="line">    public void doBefore()&#123;</span><br><span class="line">        System.out.println(&quot;ä¸ºæ¯›å›½åº†è¦åŠ ç­ï¼ï¼ï¼ï¼&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Spring-AOP&quot;&gt;&lt;a href=&quot;#Spring-AOP&quot; class=&quot;headerlink&quot; title=&quot;Spring AOP&quot;&gt;&lt;/a&gt;Spring AOP&lt;/h2&gt;&lt;p&gt;æœ¬ç¯‡æ–‡ç« ç¿»è¯‘è‡ª&lt;a href=&quot;https://www.tutorialsp
      
    
    </summary>
    
    
      <category term="Spring" scheme="http://zhongyp.me/tags/Spring/"/>
    
  </entry>
  
  <entry>
    <title>JVM</title>
    <link href="http://zhongyp.me/2018/03/27/jvm/2018-03-27-JVM/"/>
    <id>http://zhongyp.me/2018/03/27/jvm/2018-03-27-JVM/</id>
    <published>2018-03-26T16:00:00.000Z</published>
    <updated>2018-12-06T03:21:26.925Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-JVMçš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶"><a href="#1-JVMçš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶" class="headerlink" title="1. JVMçš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶"></a>1. JVMçš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶</h2><h3 id="1-1-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"><a href="#1-1-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ" class="headerlink" title="1.1 è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ"></a>1.1 è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ</h3><p><img src="/media/jvm-1.7-later.png" alt="jvm 1.7"></p><h4 id="1-1-1-ç¨‹åºè®¡æ•°å™¨ï¼ˆPC-Registerï¼‰"><a href="#1-1-1-ç¨‹åºè®¡æ•°å™¨ï¼ˆPC-Registerï¼‰" class="headerlink" title="1.1.1 ç¨‹åºè®¡æ•°å™¨ï¼ˆPC Registerï¼‰"></a>1.1.1 ç¨‹åºè®¡æ•°å™¨ï¼ˆPC Registerï¼‰</h4><ul><li>å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œå­—èŠ‚ç çš„è¡Œå·æŒ‡ç¤ºå™¨ï¼Œå­—èŠ‚ç è§£é‡Šå™¨çš„ä½œç”¨æ˜¯é€šè¿‡æ”¹å˜è®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚</li><li>å¦‚æœå½“å‰æ‰§è¡Œçš„æ˜¯Nativeæ–¹æ³•ï¼Œåˆ™è¿™ä¸ªè®¡æ•°å™¨ä¸ºç©ºã€‚</li><li>Javaè™šæ‹Ÿæœºä¸­<strong><em>å”¯ä¸€</em></strong>æ²¡æœ‰OOMçš„åŒºåŸŸã€‚</li></ul><h4 id="1-1-2-Javaè™šæ‹Ÿæœºæ ˆ-ï¼ˆJVM-Stackï¼‰"><a href="#1-1-2-Javaè™šæ‹Ÿæœºæ ˆ-ï¼ˆJVM-Stackï¼‰" class="headerlink" title="1.1.2 Javaè™šæ‹Ÿæœºæ ˆ ï¼ˆJVM Stackï¼‰"></a>1.1.2 Javaè™šæ‹Ÿæœºæ ˆ ï¼ˆJVM Stackï¼‰</h4><ul><li>è™šæ‹Ÿæœºæ ˆæè¿°çš„æ˜¯Javaæ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡å‹ï¼Œç”Ÿå‘½å‘¨æœŸä¸çº¿ç¨‹ç›¸åŒã€‚</li><li><strong><em>æ¯ä¸ªæ–¹æ³•è¿è¡Œéƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ ˆå¸§</em></strong>ï¼Œå­˜å‚¨å±€éƒ¨å˜é‡è¡¨(Local Variable Table)ï¼Œæ“ä½œæ ˆ(Operation Stack)ï¼Œæ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚</li><li><strong><em>åœ¨ç¼–è¯‘æœŸåˆ†é…</em></strong>å±€éƒ¨å˜é‡è¡¨å­˜æ”¾å„ç§åŸºæœ¬æ•°æ®ç±»å‹ã€å¯¹è±¡å¼•ç”¨ç±»å‹å’ŒreturnAddress(æŒ‡å‘ä¸€æ¡å­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€)ã€‚</li><li>å¦‚æœè¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºæœ€å¤§å¯ç”¨æ ˆæ·±åº¦æ—¶ï¼Œç³»ç»Ÿå°±ä¼šæŠ›å‡ºStackOverflowErroré”™è¯¯ã€‚</li><li>å¦‚æœè™šæ‹ŸæœºåŠ¨æ€æ‰©å±•æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„çš„å†…å­˜æ—¶ä¼šæŠ›å‡ºOOMå¼‚å¸¸ã€‚å¤§éƒ¨åˆ†è™šæ‹Ÿæœºéƒ½å¯ä»¥åŠ¨æ€æ‰©å±•ï¼Œå½“ç„¶ä¹Ÿå…è®¸å›ºå®šé•¿åº¦è™šæ‹Ÿæœºæ ˆã€‚</li></ul><h4 id="1-1-3-æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative-Method-Stackï¼‰"><a href="#1-1-3-æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative-Method-Stackï¼‰" class="headerlink" title="1.1.3 æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰"></a>1.1.3 æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰</h4><ul><li>è™šæ‹Ÿæœºæ ˆä¸ºæ‰§è¡ŒJavaæ–¹æ³•æœåŠ¡ï¼Œæœ¬åœ°æ–¹æ³•æ ˆä¸ºNativeæ–¹æ³•æœåŠ¡ã€‚</li><li>ä¼šå‡ºç°OOMæˆ–è€…StackOverflowErrorï¼ŒåŸå› å’Œè™šæ‹Ÿæœºæ ˆç±»ä¼¼ã€‚</li></ul><h4 id="1-1-4-Javaå †ï¼ˆHeapï¼‰"><a href="#1-1-4-Javaå †ï¼ˆHeapï¼‰" class="headerlink" title="1.1.4 Javaå †ï¼ˆHeapï¼‰"></a>1.1.4 Javaå †ï¼ˆHeapï¼‰</h4><ul><li>è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºè¢«æ‰€æœ‰çº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œä¸ºäº†å­˜å‚¨æ‰€æœ‰å¯¹è±¡å®ä¾‹å’Œæ•°ç»„ã€‚åƒåœ¾å›æ”¶çš„ä¸»è¦åŒºåŸŸã€‚</li></ul><h4 id="1-1-5-æ–¹æ³•åŒºï¼ˆMethod-Areaï¼‰"><a href="#1-1-5-æ–¹æ³•åŒºï¼ˆMethod-Areaï¼‰" class="headerlink" title="1.1.5 æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰"></a>1.1.5 æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰</h4><ul><li>åˆ«åï¼šâ€œæ°¸ä¹…ä»£â€œã€â€éå †ï¼Œå„ä¸ªçº¿ç¨‹å…±äº«çš„å†…å­˜åŒºåŸŸï¼Œ<strong><em>å­˜å‚¨è™šæ‹Ÿæœºå·²åŠ è½½çš„ç±»ä¿¡æ¯ï¼Œé™æ€å˜é‡ã€å¸¸é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç æ•°æ®</em></strong>ã€‚é»˜è®¤æœ€å°ä¸º16MBï¼Œæœ€å¤§ä¸º64MBï¼Œå¯ä»¥é€šè¿‡-XX:PermSizeå’Œ-XX:MaxPermSize å‚æ•°é™åˆ¶æ–¹æ³•åŒºå¤§å°ã€‚</li><li>Java8ä¸­ï¼Œå·²ç»å½»åº•æ²¡æœ‰äº†æ°¸ä¹…ä»£ï¼Œå°†æ–¹æ³•åŒºç›´æ¥æ”¾åœ¨ä¸€ä¸ªä¸å †ä¸ç›¸è¿çš„æœ¬åœ°å†…å­˜åŒºåŸŸï¼Œè¿™ä¸ªåŒºåŸŸè¢«å«åšå…ƒç©ºé—´ã€‚</li></ul><h4 id="1-1-6-è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime-Constant-Poolï¼‰"><a href="#1-1-6-è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime-Constant-Poolï¼‰" class="headerlink" title="1.1.6 è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰"></a>1.1.6 è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰</h4><ul><li>è¿è¡Œæ—¶å¸¸é‡æ± ï¼šjdk1.6åŠä¹‹å‰æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­çš„ä¸»è¦å†…å®¹æ¥è‡ªäºJVMå¯¹Classçš„åŠ è½½ã€‚Java7ä¸­å·²ç»å°†è¿è¡Œæ—¶å¸¸é‡æ± ä»æ–¹æ³•åŒºï¼ˆæ°¸ä¹…ä»£ï¼‰ç§»é™¤ï¼Œåœ¨Java å †ï¼ˆHeapï¼‰ä¸­å¼€è¾Ÿäº†ä¸€å—åŒºåŸŸå­˜æ”¾è¿è¡Œæ—¶å¸¸é‡æ± ã€‚</li><li><strong><em>ç±»åŠ è½½å</em></strong>å­˜å‚¨ç¼–è¯‘å™¨ç”Ÿæˆçš„å¸¸é‡ï¼ˆå„ç§å­—é¢é‡å’Œç¬¦å·å¼•ç”¨ï¼‰ã€‚åŸºæœ¬æ•°æ®ç±»å‹ä¸å«å¸¸é‡ï¼Œå¯è¢«ä¿®æ”¹ï¼ŒStringå’Œfinalä¿®é¥°çš„æ‰æ˜¯ã€‚å­—é¢é‡ç›¸å½“äºJavaè¯­è¨€å±‚é¢å¸¸é‡çš„æ¦‚å¿µï¼Œå¦‚æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œå£°æ˜ä¸ºfinalçš„å¸¸é‡å€¼ç­‰ï¼Œç¬¦å·å¼•ç”¨åˆ™å±äºç¼–è¯‘åŸç†æ–¹é¢çš„æ¦‚å¿µï¼ŒåŒ…æ‹¬äº†å¦‚ä¸‹ä¸‰ç§ç±»å‹çš„å¸¸é‡ï¼šç±»å’Œæ¥å£çš„å…¨é™å®šåã€å­—æ®µåç§°å’Œæè¿°ç¬¦ã€æ–¹æ³•åç§°å’Œæè¿°ç¬¦ã€‚</li><li>ç”±äºè¿è¡Œæ—¶å¸¸é‡æ± ä»æ–¹æ³•åŒºç§»åŠ¨åˆ°å †ï¼Œæ‰€ä»¥jdk1.6å’Œjdk1.7å¯¹äºå¸¸é‡æ± çš„ä½¿ç”¨è¿˜æ˜¯æœ‰äº›åŒºåˆ«çš„ï¼Œ<a href="https://tech.meituan.com/in_depth_understanding_string_intern.html" target="_blank" rel="noopener">æ·±å…¥è§£æString#intern</a></li></ul><h4 id="1-1-7-ç›´æ¥å†…å­˜-Direct-Memory"><a href="#1-1-7-ç›´æ¥å†…å­˜-Direct-Memory" class="headerlink" title="1.1.7 ç›´æ¥å†…å­˜(Direct Memory)"></a>1.1.7 ç›´æ¥å†…å­˜(Direct Memory)</h4><ul><li>å †å¤–å†…å­˜ï¼ŒJVMè™šæ‹Ÿæœºå„ä¸ªåŒºåŸŸå†…å­˜æ€»å’Œå¤§äºæœºå™¨ç‰©ç†å†…å­˜å¯èƒ½ä¼šå¯¼è‡´OOMã€‚</li></ul><h3 id="1-2-å¯¹è±¡çŠ¶æ€ç®—æ³•"><a href="#1-2-å¯¹è±¡çŠ¶æ€ç®—æ³•" class="headerlink" title="1.2 å¯¹è±¡çŠ¶æ€ç®—æ³•"></a>1.2 å¯¹è±¡çŠ¶æ€ç®—æ³•</h3><ul><li><p>å¼•ç”¨è®¡æ•°ç®—æ³•ï¼š å¾ˆéš¾è§£å†³å¯¹è±¡ä¹‹é—´ç›¸äº’å¼•ç”¨çš„é—®é¢˜ï¼Œå†…å­˜æ³„éœ²ã€‚</p></li><li><p>è·Ÿæœç´¢ç®—æ³•ï¼šé€šè¿‡ä¸€ç³»åˆ—åä¸ºâ€œGC Rootsâ€çš„å¯¹è±¡ä½œä¸ºèµ·ç‚¹ï¼Œä»è¿™äº›èŠ‚ç‚¹å¼€å§‹å‘ä¸‹æœç´¢ï¼Œæœç´¢çš„è·¯å¾„æˆä¸ºå¼•ç”¨é“¾ï¼Œå½“ä¸€ä¸ªå¯¹è±¡åˆ°GC Rootæ²¡æœ‰ä¸€ä¸ªå¼•ç”¨æ—¶ï¼Œåˆ™è¯æ˜æ­¤å¯¹è±¡æ˜¯ä¸å¯ç”¨çš„ã€‚</p></li></ul><p>æ³¨ï¼š1. GCå¯¹è±¡åŒ…æ‹¬ï¼šè™šæ‹Ÿæœºæ ˆï¼ˆæ ˆå¸§ä¸­çš„æœ¬åœ°å˜é‡è¡¨ï¼‰ä¸­å¼•ç”¨çš„å¯¹è±¡ï¼Œæ–¹æ³•åŒºä¸­ç±»é™æ€å±æ€§å¼•ç”¨çš„å¯¹è±¡ï¼Œæ–¹æ³•åŒºä¸­å¸¸é‡å¼•ç”¨çš„å¯¹è±¡ï¼Œæœ¬åœ°æ–¹æ³•æ ˆä¸­JNIã€‚2. è·Ÿæœç´¢ç®—æ³•ä¸­ï¼Œæ²¡æœ‰å¼•ç”¨çš„å¯¹è±¡å¹¶ééæ­»ä¸å¯ï¼Œè¿˜æœ‰ç»å†ä¸¤æ¬¡æ ‡è®°ï¼Œç¬¬ä¸€æ¬¡å‘ç°æ²¡æœ‰å¼•ç”¨ï¼Œåˆ™è¿›è¡Œæ ‡è®°ï¼Œå¹¶ä¸”è¿›è¡Œä¸€æ¬¡ç­›é€‰ï¼Œç­›é€‰çš„æ¡ä»¶æ˜¯æ­¤å¯¹è±¡æ˜¯å¦æœ‰å¿…è¦æ‰§è¡Œfinalize()æ–¹æ³•ï¼Œå½“å¯¹è±¡æ²¡æœ‰è¦†ç›–finalize()æ–¹æ³•æˆ–finalize()å·²ç»è¢«è°ƒç”¨è¿‡ï¼Œè™šæ‹Ÿæœºå°†è¿™ä¸¤ç§æƒ…å†µéƒ½è§†ä¸ºæ²¡æœ‰å¿…è¦æ‰§è¡Œã€‚</p><h4 id="1-2-1-å›æ”¶æ–¹æ³•åŒº"><a href="#1-2-1-å›æ”¶æ–¹æ³•åŒº" class="headerlink" title="1.2.1 å›æ”¶æ–¹æ³•åŒº"></a>1.2.1 å›æ”¶æ–¹æ³•åŒº</h4><p>æ–¹æ³•åŒºä¸»è¦å›æ”¶åºŸå¼ƒå˜é‡å’Œæ— ç”¨çš„ç±»ã€‚æ— ç”¨çš„ç±»ï¼šè¯¥ç±»æ‰€æœ‰å®ä¾‹éƒ½å·²è¢«å›æ”¶ï¼ŒåŠ è½½è¯¥ç±»çš„ClassLoaderè¢«å›æ”¶ï¼Œè¯¥ç±»å¯¹åº”çš„java.lang.Classå¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ã€‚åªæœ‰åŒæ—¶æ»¡è¶³æ— ç”¨çš„ç±»çš„ä¸‰ä¸ªæ¡ä»¶ï¼Œæ‰<strong><em>å¯ä»¥</em></strong>è¢«å›æ”¶ã€‚åå°„ã€åŠ¨æ€ä»£ç†ã€CGLibç­‰bytecodeæ¡†æ¶åœºæ™¯ä»¥åŠé¢‘ç¹å®šä¹‰ClassLoaderçš„åœºæ™¯éƒ½éœ€è¦å…·å¤‡å¸è½½åŠŸèƒ½ï¼Œä»¥ä¿è¯æ°¸ä¹…ä»£ä¸ä¼šæº¢å‡ºã€‚</p><h3 id="1-3-åƒåœ¾æ”¶é›†ç®—æ³•"><a href="#1-3-åƒåœ¾æ”¶é›†ç®—æ³•" class="headerlink" title="1.3 åƒåœ¾æ”¶é›†ç®—æ³•"></a>1.3 åƒåœ¾æ”¶é›†ç®—æ³•</h3><ul><li><p>æ ‡è®°æ¸…é™¤ç®—æ³•ï¼š æ ‡è®°æ‰€æœ‰éœ€è¦å›æ”¶çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåç»Ÿä¸€å›æ”¶æ‰æ‰€æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ã€‚æ•ˆç‡é—®é¢˜ï¼Œç©ºé—´é—®é¢˜ï¼ˆå†…å­˜ç¢ç‰‡ï¼‰ã€‚</p></li><li><p>å¤åˆ¶ç®—æ³•ï¼š æ–°ç”Ÿä»£ä½¿ç”¨å¤åˆ¶ç®—æ³•å›æ”¶ï¼Œç”±äºæ–°ç”Ÿä»£98%çš„å¯¹è±¡éƒ½æ˜¯æœç”Ÿå¤•æ­»çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦1:1çš„æ¯”ä¾‹åˆ’åˆ†å†…å­˜ç©ºé—´ï¼ˆHotspoté»˜è®¤8:1ï¼‰ï¼Œè€Œæ˜¯å°†å†…å­˜åˆ†ä¸ºä¸€å—è¾ƒå¤§çš„Edenç©ºé—´å’Œä¸¤å—è¾ƒå°çš„Survivorç©ºé—´ï¼Œæ¯æ¬¡ä½¿ç”¨Edenå’Œå…¶ä¸­ä¸€ä¸ªSurvivorã€‚å½“å›æ”¶æ—¶ï¼Œå°†Edenå’ŒSurvivorä¸­è¿˜å­˜æ´»çš„å¯¹è±¡ä¸€æ¬¡æ€§çš„æ‹·è´åˆ°å¦ä¸€å—çš„Survivorä¸Šã€‚æœ€åæ¸…ç†æ‰Edenå’Œåˆšæ‰ä½¿ç”¨è¿‡çš„Survivorã€‚å½“Survivorç©ºé—´ä¸å¤Ÿç”¨æ—¶ï¼Œéœ€è¦ä¾èµ–å…¶ä»–çš„è€å¹´ä»£è¿›è¡Œåˆ†é…æ‹…ä¿ï¼ˆHandle Promotionï¼‰ã€‚åˆ†é…æ‹…ä¿ï¼šå¦‚æœSurvivorç©ºé—´æ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´å­˜æ”¾ä¸Šæ¬¡æ–°ç”Ÿä»£æ”¶é›†ä¸‹æ¥çš„å­˜æ´»å¯¹è±¡ï¼Œè¿™äº›å¯¹è±¡å°†ç›´æ¥é€šè¿‡åˆ†é…æ‹…ä¿æœºåˆ¶è¿›å…¥è€å¹´ä»£ã€‚</p></li><li><p>æ ‡è®°-æ•´ç†ç®—æ³•ï¼šè®©æ‰€æœ‰å­˜æ´»çš„å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç„¶åæ¸…ç†æ‰ç«¯è¾¹ç•Œä»¥å¤–çš„å†…å­˜ã€‚è€å¹´ä»£å¸¸ç”¨çš„ç®—æ³•ã€‚</p></li><li><p>åˆ†ä»£æ”¶é›†ç®—æ³•ï¼š æ ¹æ®å¯¹è±¡çš„å­˜æ´»å‘¨æœŸä¸åŒï¼Œå°†å†…å­˜åˆ’åˆ†ä¸ºå‡ å—ï¼Œæ ¹æ®å„ä¸ªå¹´ä»£çš„ç‰¹ç‚¹è¿›è¡Œåƒåœ¾å›æ”¶ã€‚</p></li></ul><h3 id="1-4-åƒåœ¾æ”¶é›†å™¨"><a href="#1-4-åƒåœ¾æ”¶é›†å™¨" class="headerlink" title="1.4 åƒåœ¾æ”¶é›†å™¨"></a>1.4 åƒåœ¾æ”¶é›†å™¨</h3><p><img src="https://github.com/zhongyp/jekyll.github.io/blob/master/files/gc.jpg?raw=true" alt="åƒåœ¾å›æ”¶å™¨"><br><a href="#åƒåœ¾æ”¶é›†å™¨">å›¾ç‰‡æ¥è‡ªã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹</a><br>å¦‚æœä¸¤ä¸ªæ”¶é›†å™¨ä¹‹é—´å­˜åœ¨è¿çº¿ï¼Œå°±è¯´æ˜ä»–ä»¬å¯ä»¥æ­é…ä½¿ç”¨ã€‚</p><ol><li><p>Serial</p><p> å¤åˆ¶ç®—æ³•ï¼Œæ–°ç”Ÿä»£çš„å•çº¿ç¨‹æ”¶é›†å™¨ï¼Œç®€å•é«˜æ•ˆï¼Œstop the worldã€‚</p></li><li><p>ParNew</p><p> å¤åˆ¶ç®—æ³•ï¼ŒSerialçš„å¤šçº¿ç¨‹ç‰ˆæœ¬ï¼Œstop the worldã€‚é¦–é€‰çš„æ–°ç”Ÿä»£æ”¶é›†å™¨ã€‚</p></li><li><p>Parallel Scavenge</p><p> æ–°ç”Ÿä»£æ”¶é›†å™¨ï¼Œä½¿ç”¨å¤åˆ¶ç®—æ³•ï¼Œå¤šçº¿ç¨‹å¹¶è¡Œ, stop the worldã€‚ç›®æ ‡è¾¾åˆ°å¯æ§åˆ¶çš„ååé‡ã€‚è¿è¡Œç”¨æˆ·ä»£ç æ—¶é—´/CPUæ¶ˆè€—æ€»æ—¶å¸¸=ååé‡ã€‚è¯¥æ”¶é›†å™¨æä¾›ä¸¤ä¸ªå‚æ•°ç”¨äºç²¾ç¡®æ§åˆ¶ååé‡ï¼Œåˆ†åˆ«æ˜¯æ§åˆ¶æœ€å¤§åƒåœ¾æ”¶é›†åœé¡¿æ—¶é—´çš„-XX:MaxGCPauseMillså‚æ•°åŠç›´æ¥è®¾ç½®ååé‡å¤§å°çš„-XX:GCTimeRatioå‚æ•°ã€‚MaxGCPauseMillså‚æ•°å…è®¸çš„å€¼æ˜¯ä¸€ä¸ªå¤§äº0çš„æ¯«ç§’æ•°ï¼Œæ”¶é›†å™¨å°†å°½åŠ›ä¿è¯å†…å­˜å›æ”¶èŠ±è´¹çš„æ—¶é—´ä¸è¶…è¿‡è®¾å®šå€¼ã€‚GCTimeRatioå‚æ•°çš„å€¼åº”è¯¥æ˜¯ä¸€ä¸ªå¤§äº0çš„æ•´æ•°ï¼Œä¹Ÿå°±æ˜¯åƒåœ¾æ”¶é›†æ—¶é—´å æ€»æ—¶é—´çš„æ¯”ç‡ï¼Œç›¸å½“äºååé‡çš„å€’æ•°ã€‚é™¤äº†è¿™ä¸¤ä¸ªå‚æ•°ï¼Œè¿˜æœ‰ä¸€ä¸ª-XX:+UseAdaptiveSizePolicyå€¼å¾—å…³æ³¨ã€‚æ‰“å¼€è¿™ä¸ªå‚æ•°åï¼Œä¸éœ€è¦æ‰‹å·¥æŒ‡å®šæ–°ç”Ÿä»£çš„å¤§å°ï¼ˆ-Xmnï¼‰ã€Edenä¸SurvivoråŒºçš„æ¯”ä¾‹ï¼ˆ-XX:SurvivorRatioï¼‰ã€æ™‹å‡è€å¹´ä»£å¯¹è±¡å¹´é¾„ï¼ˆ-XX:PretenureSizeThresholdï¼‰ç­‰ç»†èŠ‚å‚æ•°ã€‚è™šæ‹Ÿæœºä¼šæ ¹æ®å½“å‰ç³»ç»Ÿçš„è¿è¡Œæƒ…å†µæ”¶é›†æ€§èƒ½ç›‘æ§ä¿¡æ¯ï¼ŒåŠ¨æ€è°ƒæ•´è¿™äº›å‚æ•°ä»¥æä¾›æœ€åˆé€‚çš„åœé¡¿æ—¶é—´æˆ–æœ€å¤§ååé‡è¿™ç§æ–¹å¼ç§°ä¸ºGCè‡ªé€‚åº”çš„è°ƒèŠ‚ç­–ç•¥ï¼ˆGC Ergonomicsï¼‰</p></li><li><p>Serial Old</p><p> Serialæ”¶é›†å™¨çš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œå•çº¿ç¨‹æ”¶é›†å™¨ï¼Œä½¿ç”¨æ ‡è®°-æ•´ç†ç®—æ³•ï¼Œstop the worldã€‚ä¸»è¦æœ‰ä¸¤ä¸ªç”¨é€”ï¼š1. åœ¨JDK1.5åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ä¸Parallel Scavengeæ”¶é›†å™¨æ­é…ä½¿ç”¨ï¼Œå¦å¤–ä¸€ä¸ªå°±æ˜¯ä½œä¸ºCMSæ”¶é›†å™¨çš„åå¤‡é¢„æ¡ˆï¼Œåœ¨å¹¶å‘æ”¶é›†å‘ç”ŸConcurrent Mode Failureçš„æ—¶å€™ç”¨ã€‚</p></li><li><p>Parallel Old</p><p> Parallel Scavengeçš„è€å¹´ä»£ç‰ˆæœ¬ï¼Œæ ‡è®°-æ•´ç†ç®—æ³•ï¼Œstop the worldã€‚</p></li><li><p>CMSï¼ˆConcurrent Mark Sweepï¼‰æ”¶é›†å™¨</p></li></ol><p>æœ€çŸ­å›æ”¶åœé¡¿æ—¶é—´ä¸ºç›®æ ‡çš„æ”¶é›†å™¨ï¼Œé‡è§†æœåŠ¡å“åº”é€Ÿåº¦ï¼Œæ ‡è®°-æ¸…é™¤ç®—æ³•å®ç°ã€‚ç¬¬ä¸€æ¬¾å¹¶å‘æ”¶é›†å™¨ï¼Œå¯ä¸ç”¨æˆ·çº¿ç¨‹å¹¶å‘æ‰§è¡Œã€‚æ‰§è¡Œè¿‡ç¨‹åˆ†ä¸º4ä¸ªæ­¥éª¤ï¼šåˆå§‹æ ‡è®°(CMS initial mark)ã€å¹¶å‘æ ‡è®°(CMS concurrent mark)ã€é‡æ–°æ ‡è®°(CMS remark)ã€å¹¶å‘æ¸…é™¤(CMS concurrent sweep)ã€‚åˆå§‹å’Œé‡æ–°stop the worldã€‚åˆå§‹æ ‡è®°åªæ˜¯æ ‡è®°GCRootsèƒ½ç›´æ¥å…³è”çš„å¯¹è±¡ï¼Œé€Ÿåº¦å¾ˆå¿«ï¼Œå¹¶å‘æ ‡è®°è¿›è¡ŒGCROOTs Tracingçš„è¿‡ç¨‹ã€‚é‡æ–°æ ‡è®°ä¸ºäº†ä¿®å¤å¹¶å‘æ ‡è®°æœŸé—´ï¼Œå› ç”¨æˆ·ç¨‹åºç»§ç»­è¿ä½œè€Œå¯¼è‡´æ ‡è®°äº§ç”Ÿå˜åŠ¨çš„é‚£ä¸€éƒ¨åˆ†å¯¹è±¡çš„æ ‡è®°è®°å½•ã€‚<br>ä¼˜ç‚¹ï¼šå¹¶å‘æ”¶é›†ã€ä½åœé¡¿ã€‚<br>ç¼ºç‚¹ï¼š1. å¯¹CPUèµ„æºéå¸¸æ•æ„Ÿï¼Œè§£å†³æ–¹æ¡ˆï¼Œå‡å°‘GCçº¿ç¨‹çš„ç‹¬å æ—¶é—´ã€‚2. æ— æ³•å¤„ç†æµ®åŠ¨åƒåœ¾ã€‚CMSè¿è¡ŒæœŸé—´ï¼Œç”¨æˆ·çº¿ç¨‹äº§ç”Ÿçš„åƒåœ¾ä¸ºæµ®åŠ¨åƒåœ¾ï¼ŒCMSæ— æ³•åœ¨æœ¬æ¬¡æ”¶é›†ä¸­ä¸ªæ¸…ç†è¿™äº›æµ®åŠ¨åƒåœ¾ã€‚å¦‚æœCMSè¿è¡ŒæœŸé—´ï¼Œå†…å­˜æ— æ³•æ»¡è¶³ç”¨æˆ·çº¿ç¨‹è¦æ±‚ï¼Œå°±ä¼šå‡ºç°Concurrent Mode Failureå¤±è´¥ï¼Œå¯èƒ½å¯¼è‡´å¦ä¸€ä¸ªFullGCäº§ç”Ÿï¼Œå¯åŠ¨é¢„å¤‡æ–¹æ¡ˆ Serial Oldã€‚3. äº§ç”Ÿå¤§é‡çš„ç©ºé—´ç¢ç‰‡ã€‚</p><ol start="7"><li><p>G1æ”¶é›†å™¨</p><p> æ ‡è®°æ•´ç†ç®—æ³•å®ç°ï¼Œç²¾ç¡®çš„æ§åˆ¶åœé¡¿ï¼ŒæŒ‡å®šä¸€ä¸ªé•¿åº¦ä¸ºMæ¯«ç§’çš„æ—¶é—´ç‰‡æ®µå†…ï¼Œæ¶ˆè€—åœ¨åƒåœ¾æ”¶é›†ä¸Šçš„æ—¶é—´ä¸è¶…è¿‡Næ¯«ç§’ã€‚G1å°†æ•´ä¸ªJavaå †ï¼ˆè€å¹´ä»£ï¼Œæ–°ç”Ÿä»£ï¼‰åˆ’åˆ†å¤šä¸ªå¤§å°å›ºå®šçš„ç‹¬ç«‹åŒºåŸŸï¼ˆRegionï¼‰ï¼Œå¹¶ä¸”è¿½è¸ªè¿™äº›åŒºåŸŸé‡Œé¢çš„åƒåœ¾å †ç§¯ç¨‹åº¦ã€‚åœ¨åå°ç»´æŠ¤ä¸€ä¸ªä¼˜å…ˆåˆ—è¡¨ï¼Œæ¯æ¬¡æ ¹æ®å…è®¸çš„æ”¶é›†æ—¶é—´ï¼Œä¼˜å…ˆå›æ”¶åƒåœ¾æœ€å¤šçš„åŒºåŸŸã€‚</p></li></ol><h3 id="1-5-å†…å­˜åˆ†é…ä¸å›æ”¶"><a href="#1-5-å†…å­˜åˆ†é…ä¸å›æ”¶" class="headerlink" title="1.5 å†…å­˜åˆ†é…ä¸å›æ”¶"></a>1.5 å†…å­˜åˆ†é…ä¸å›æ”¶</h3><p>å¯¹è±¡åœ¨Edenä¸­åˆ†é…å†…å­˜ï¼Œæ²¡æœ‰è¶³å¤Ÿçš„ç©ºé—´è¿›è¡Œåƒåœ¾å›æ”¶ã€‚MinorGCã€‚</p><pre><code>MinorGC: æ–°ç”Ÿä»£åƒåœ¾å›æ”¶çš„åŠ¨ä½œï¼Œé¢‘ç¹ä¸”é€Ÿåº¦å¿«ã€‚MajorGCï¼ˆFullGCï¼‰: æŒ‡å‘ç”Ÿåœ¨è€å¹´ä»£çš„GCï¼Œæ…¢ï¼Œæ¸…ç†æ–°ç”Ÿä»£å’Œè€å¹´ä»£ï¼ŒCMS</code></pre><p>å¤§å¯¹è±¡æŒ‡éœ€è¦å¤§é‡è¿ç»­ç©ºé—´çš„Javaå¯¹è±¡ã€‚å…¸å‹å°±æ˜¯å¾ˆé•¿çš„å­—ç¬¦ä¸²å’Œæ•°ç»„ã€‚ç›´æ¥è¿›å…¥è€å¹´ä»£åˆ†é…ï¼Œé¿å…åœ¨EdenåŠSurvivorä¸­å¤§é‡å¤åˆ¶æ‹·è´ã€‚</p><p>é•¿æœŸç”Ÿæ´»çš„å¯¹è±¡è¿›å…¥è€å¹´ä»£ã€‚å¯¹è±¡å¹´é¾„è®¡æ•°å™¨ï¼Œæ¯ä¸€æ¬¡MinorGCå¢é•¿1å²ã€‚é»˜è®¤15å²è¿›å…¥è€å¹´ä»£ã€‚</p><p>åŠ¨æ€å¯¹è±¡å¹´é¾„åˆ¤æ–­ï¼Œå¦‚æœåœ¨Survivorç©ºé—´ä¸­ï¼Œç›¸åŒå¹´é¾„æ‰€æœ‰å¯¹è±¡å¤§å°çš„æ€»å’Œå¤§äºSurvivorç©ºé—´çš„ä¸€åŠï¼Œå¹´é¾„å¤§äºæˆ–ç­‰äºè¯¥å¹´é¾„æ®µçš„å¯¹è±¡ç›´æ¥è¿›å…¥è€å¹´ä»£ã€‚</p><p>ç©ºé—´æ‹…ä¿åˆ†é…ï¼Œæ¯æ¬¡MinorGC,æ£€æµ‹å‡çº§åˆ°è€å¹´ä»£çš„å¤§å°æ˜¯å¦å¤§äºè€å¹´ä»£çš„ç©ºé—´ï¼Œå¦‚æœå¤§äºï¼Œåˆ™è¿›è¡ŒFullGCã€‚</p><h2 id="2-JDKå‘½ä»¤è¡Œå·¥å…·-æ€§èƒ½ç›‘æ§å’Œæ•…éšœå¤„ç†"><a href="#2-JDKå‘½ä»¤è¡Œå·¥å…·-æ€§èƒ½ç›‘æ§å’Œæ•…éšœå¤„ç†" class="headerlink" title="2. JDKå‘½ä»¤è¡Œå·¥å…· æ€§èƒ½ç›‘æ§å’Œæ•…éšœå¤„ç†"></a>2. JDKå‘½ä»¤è¡Œå·¥å…· æ€§èƒ½ç›‘æ§å’Œæ•…éšœå¤„ç†</h2><h3 id="2-1-jps"><a href="#2-1-jps" class="headerlink" title="2.1 jps"></a>2.1 jps</h3><p>è™šæ‹Ÿæœºè¿›ç¨‹çŠ¶å†µå·¥å…·ã€‚ æ˜¾ç¤ºå½“å‰æ‰€æœ‰javaè¿›ç¨‹pidçš„å‘½ä»¤ã€‚</p><p>-l è¾“å‡ºä¸»ç±»çš„å…¨åï¼Œå¦‚æœè¿›ç¨‹æ‰§è¡Œçš„æ˜¯JaråŒ…ï¼Œè¾“å‡ºJarè·¯å¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">C:\Program Files\Java\jdk1.8.0_161\bin&gt;jps -l</span><br><span class="line">5696 com.intellij.rt.execution.application.AppMain</span><br><span class="line">944 org.jetbrains.idea.maven.server.RemoteMavenServer</span><br><span class="line">4488</span><br><span class="line">1900 org.jetbrains.jps.cmdline.Launcher</span><br><span class="line">7244 sun.tools.jps.Jps</span><br></pre></td></tr></table></figure><p>-v è¾“å‡ºè™šæ‹Ÿæœºè¿›ç¨‹å¯åŠ¨æ—¶JVMå‚æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\Java\jdk1.8.0_161\bin&gt;jps -v</span><br><span class="line">5696 AppMain -Didea.launcher.port=7534 -Didea.launcher.bin.path=F:\Program Files\intellij IDEA\bin -Dfile.encoding=UTF-8</span><br><span class="line">944 RemoteMavenServer -Djava.awt.headless=true -Didea.version==2016.2.5 -Xmx768m -Didea.maven.embedder.version=3.0.5 -Dfile.encoding=GBK</span><br><span class="line">1656 Jps -Denv.class.path=.;C:\Program Files\Java\jdk1.8.0_161\lib\dt.jar;C:\Program Files\Java\jdk1.8.0_161\lib\tools.jar; -Dapplication.home=C:\Program Files\Java\jdk1.8.0_161 -Xms8m</span><br><span class="line">4488  -Xms128m -Xmx750m -XX:ReservedCodeCacheSize=240m -XX:+UseConcMarkSweepGC -XX:SoftRefLRUPolicyMSPerMB=50 -ea -Dsun.io.useCanonCaches=false -Djava.net.preferIPv4Stack=true -XX:+HeapDumpOnOutOfMemoryError -XX:-OmitStackTraceInFastThrow -Djb.vmOptionsFile=F:\Program Files\intellij IDEA\bin\idea64.exe.v</span><br><span class="line">moptions -Xbootclasspath/a:F:\Program Files\intellij IDEA\lib\boot.jar -Didea.paths.selector=IntelliJIdea2016.2 -Didea.jre.check=true -XX:ErrorFile=C:\Users\zhongyp\java_error_in_idea_%p.log -XX:HeapDumpPath=C:\Users\zhongyp\java_error_in_idea.hprof</span><br><span class="line">1900 Launcher -Xmx700m -Djava.awt.headless=true -Djava.endorsed.dirs=&quot;&quot; -Djdt.compiler.useSingleThread=true -Dpreload.project.path=E:/demo -Dpreload.config.path=C:/Users/zhongyp/.IntelliJIdea2016.2/config/options -Dcompile.parallel=false -Drebuild.on.dependency.change=true -Djava.net.preferIPv4Stack=true</span><br><span class="line"> -Dio.netty.initialSeedUniquifier=-1505227146882843300 -Dfile.encoding=GBK -Djps.file.types.component.name=FileTypeManager -Duser.language=zh -Duser.country=CN -Didea.paths.selector=IntelliJIdea2016.2 -Didea.home.path=F:\Program Files\intellij IDEA -Didea.config.path=C:\Users\zhongyp\.IntelliJIdea2016.2\</span><br><span class="line">config -Didea.plugins.path=C:\Users\zhongyp\.IntelliJIdea2016.2\config\plugins -Djps.log.dir=C:/Users/zhongyp/.IntelliJIdea2016.2/system/log/build-log -Djps.fallback.jdk.home=C:/Program Files/Java/jdk1.8.0_161/jre -Djps.fallback.jdk.version=1.8.0_161 -Djava.io.tmpdir=C:/Users/zhongyp/.IntelliJIdea2016.2/</span><br><span class="line">system/compile-server/_temp_ -Dkotlin.incremental.compilation.experimental=true -Dkotlin.daemon.enabled -Dkotlin.daemon.cli</span><br></pre></td></tr></table></figure><p>-q åªè¾“å‡ºLVMIDï¼Œçœç•¥ä¸»ç±»çš„åç§°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\Java\jdk1.8.0_161\bin&gt;jps -q</span><br><span class="line">5696</span><br><span class="line">8912</span><br><span class="line">944</span><br><span class="line">4488</span><br><span class="line">1900</span><br></pre></td></tr></table></figure><p>-m è¾“å‡ºè™šæ‹Ÿæœºè¿›ç¨‹å¯åŠ¨æ—¶ä¼ é€’ç»™ä¸»ç±»main()å‡½æ•°çš„å‚æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\Java\jdk1.8.0_161\bin&gt;jps -m</span><br><span class="line">5696 AppMain com.zhongyp.Test</span><br><span class="line">944 RemoteMavenServer</span><br><span class="line">10484 Jps -m</span><br><span class="line">4488</span><br><span class="line">1900 Launcher F:/Program Files/intellij IDEA/lib/log4j.jar;F:/Program Files/intellij IDEA/lib/jps-builders.jar;F:/Program Files/intellij IDEA/lib/netty-all-4.1.1.Final.jar;F:/Program Files/intellij IDEA/lib/annotations.jar;F:/Program Files/intellij IDEA/lib/rt/jps-plugin-system.jar;F:/Program Files/intel</span><br><span class="line">lij IDEA/lib/jgoodies-forms.jar;F:/Program Files/intellij IDEA/lib/util.jar;F:/Program Files/intellij IDEA/lib/trove4j.jar;F:/Program Files/intellij IDEA/lib/jna.jar;F:/Program Files/intellij IDEA/lib/resources_en.jar;F:/Program Files/intellij IDEA/lib/oromatcher.jar;F:/Program Files/intellij IDEA/lib/id</span><br><span class="line">ea_rt.jar;F:/Program Files/intellij IDEA/lib/openapi.jar;F:/Program Files/intellij IDEA/lib/javac2.jar;F:/Program Files/intellij IDEA/lib/snappy-in-java-0.5.1.jar;F:/Program Files/intellij IDEA/lib/jna-platform.jar;F:/Program Files/intellij IDEA/lib/forms_rt.jar;F:/Program Files/intellij IDEA/lib/jdom.ja</span><br><span class="line">r;F:/Program Files/intellij IDEA/lib/asm-all.jar;F:/Program Files/intellij IDEA/lib/jps-</span><br></pre></td></tr></table></figure><h3 id="2-2-jstat"><a href="#2-2-jstat" class="headerlink" title="2.2 jstat"></a>2.2 jstat</h3><p> è™šæ‹Ÿæœºç»Ÿè®¡ä¿¡æ¯ç›‘è§†å·¥å…·ï¼Œç”¨äºç›‘è§†è™šæ‹Ÿæœºå„ç§è¿è¡ŒçŠ¶æ€ä¿¡æ¯çš„å‘½ä»¤ã€‚å¯ä»¥æ˜¾ç¤ºæœ¬åœ°æˆ–è¿œç¨‹è™šæ‹Ÿæœºè¿›ç¨‹ä¸­çš„ç±»åŠ è½½ã€å†…å­˜ã€åƒåœ¾å›æ”¶ã€JITç¼–è¯‘ç­‰è¿è¡Œæ•°æ®ã€‚è¿è¡ŒæœŸå®šä½è™šæ‹Ÿæœºæ€§èƒ½é—®é¢˜çš„é¦–é€‰å·¥å…·ã€‚</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-classï¼šç›‘è§†ç±»è£…è½½ã€å¸è½½æ•°é‡ã€æ€»ç©ºé—´ä»¥åŠç±»è£…è½½æ‰€è€—æ—¶é—´ã€‚</span><br><span class="line"></span><br><span class="line">-gcï¼šç›‘è§†JAVAå †çŠ¶å†µï¼ŒåŒ…æ‹¬EdenåŒºã€ä¸¤ä¸ªSurvivoråŒºã€è€å¹´ä»£ã€æ°¸ä¹…ä»£ç­‰çš„å®¹é‡ã€å·²ç”¨ç©ºé—´ï¼ŒGCå·²ç”¨æ—¶é—´åˆè®¡ç­‰ä¿¡æ¯ï¼›</span><br><span class="line"></span><br><span class="line">-gccapacityï¼šç›‘è§†å†…å®¹ä¸-gcåŸºæœ¬ç›¸åŒï¼Œä½†è¾“å‡ºä¸»è¦å…³æ³¨ javaå †å„ä¸ªåŒºåŸŸä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´ï¼›</span><br><span class="line"></span><br><span class="line">-gcutilï¼šç›‘è§†å†…å®¹ä¸-gcåŸºæœ¬ç›¸åŒï¼Œä¾¿è¾“å‡ºä¸»è¦å…³æ³¨å·²ä½¿ç”¨ç©ºé—´å æ€»ç©ºé—´çš„ç™¾åˆ†æ¯”ï¼›</span><br><span class="line"></span><br><span class="line">-gccauseï¼šä¸-gcutilåŠŸèƒ½ä¸€æ ·ï¼Œä½†æ˜¯ä¼šé¢å¤–è¾“å‡ºå¯¼è‡´ ä¸€æ¬¡GCäº§ç”Ÿçš„åŸå› ï¼›</span><br><span class="line"></span><br><span class="line">-gcnewï¼šç›‘è§†æ–°ç”Ÿä»£GCçŠ¶æ€ï¼›</span><br><span class="line"></span><br><span class="line">-gcnewcapacityï¼šç›‘è§†å†…å®¹ä¸-gcnewåŸºæœ¬ç›¸åŒï¼Œè¾“å‡ºæœ€è¦å…³æ³¨ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´ï¼›</span><br><span class="line"></span><br><span class="line">-gcoldï¼šç›‘è§†è€å¹´ä»£GCçŠ¶å†µï¼›</span><br><span class="line"></span><br><span class="line">-gcoldcapacityï¼šç›‘è§†å†…å®¹ä¸-gcoldåŸºæœ¬ç›¸åŒï¼Œè¾“å‡ºä¸»è¦å…³æ³¨ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´ï¼›</span><br><span class="line"></span><br><span class="line">-gcpermcapacityï¼šç›‘è§†æ°¸ä¹…ä»£ä½¿ç”¨åˆ°çš„æœ€å¤§ã€æœ€å°ç©ºé—´ï¼›</span><br><span class="line"></span><br><span class="line">-compilerï¼šè¾“å…¥JITç¼–è¯‘å™¨ç¼–è¯‘è¿‡çš„æ–¹æ³•ï¼Œè€—æ—¶ç­‰ä¿¡æ¯ï¼›</span><br><span class="line"></span><br><span class="line">-printcompilationï¼šè¾“å‡ºå·²ç»è¢«JITç¼–è¯‘çš„æ–¹æ³•ï¼›</span><br></pre></td></tr></table></figure><h3 id="2-3-jinfo"><a href="#2-3-jinfo" class="headerlink" title="2.3 jinfo"></a>2.3 jinfo</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-flag &lt;name&gt; ï¼šå¯æŸ¥çœ‹è™šæ‹Ÿæœºå¯åŠ¨æ—¶æ˜¾å¼æŒ‡å®šçš„å‚æ•°åˆ—è¡¨ã€‚</span><br><span class="line">-flag [+|-]&lt;name&gt;ï¼šè®¾ç½®æˆ–å–æ¶ˆVMå‚æ•°</span><br><span class="line">-flag &lt;name&gt;=&lt;value&gt;ï¼šç»™VMå‚æ•°è®¾ç½®æ–°å€¼</span><br><span class="line">-flagsï¼šå¯æŸ¥çœ‹æ‰€æœ‰VMå‚æ•°ï¼›</span><br><span class="line">-syspropsï¼šæŸ¥çœ‹javaç³»ç»Ÿå‚æ•°;</span><br><span class="line">&lt;no option&gt;ï¼šè¡¨ç¤ºåœ¨ä¸ç»™å®šä»»ä½•é€‰é¡¹æ—¶ï¼Œæ‰“å°å‡ºä»¥ä¸Šæ‰€æœ‰çš„VMå‚æ•°</span><br></pre></td></tr></table></figure><p> å®æ—¶çš„æŸ¥çœ‹å’Œè°ƒæ•´è™šæ‹Ÿæœºçš„å„é¡¹å‚æ•°ã€‚</p><h3 id="2-4-jmap"><a href="#2-4-jmap" class="headerlink" title="2.4 jmap"></a>2.4 jmap</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">-dumpï¼šç”Ÿæˆjavaå †è½¬å‚¨å¿«ç…§ï¼Œæ ¼å¼ä¸ºï¼š-dump[live, ] format=b, file=&lt;filename&gt;,å…¶ä¸­liveå­å‚æ•°è¯´æ˜æ˜¯å¦åªdumpå‡ºå­˜æ´»å¯¹è±¡ï¼›</span><br><span class="line"></span><br><span class="line">-finalizerinfoï¼šæ˜¾ç¤ºåœ¨F-QueuiK ç­‰å¾…Finalizerçº¿ç¨‹æ‰§è¡Œfinalizeæ–¹æ³•çš„å¯¹è±¡ã€‚åªåœ¨Linux/Solariså¹³å°ä¸‹æœ‰æ•ˆï¼›</span><br><span class="line"></span><br><span class="line">-heapï¼šæ˜¾ç¤ºjavaå †è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ä½¿ç”¨å“ªç§å›æ”¶å™¨ã€å‚æ•°é…ç½®ã€åˆ†ä»£çŠ¶å†µç­‰ã€‚åªåœ¨Linux/Solariså¹³å°ä¸‹æœ‰æ•ˆï¼›</span><br><span class="line"></span><br><span class="line">-histoï¼šæ˜¾ç¤ºå †ä¸­å¯¹è±¡ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç±»ã€å®ä¾‹æ•°é‡ã€åˆè®¡å®¹é‡ï¼›</span><br><span class="line"></span><br><span class="line">-permstatï¼šä»¥ClassLoaderä¸ºç»Ÿè®¡å£å¾„æ˜¾ç¤ºæ°¸ä¹…ä»£å†…å­˜çŠ¶æ€ï¼Œåªåœ¨Linux/Solariså¹³å°æœ‰æ•ˆï¼›</span><br><span class="line"></span><br><span class="line">-Fï¼šå½“è™šæ‹Ÿæœºè¿›ç¨‹å¯¹-dumpé€‰é¡¹æ²¡æœ‰å“åº”æ—¶ï¼Œå¯ä½¿ç”¨è¿™ä¸ªé€‰é¡¹å¼ºåˆ¶ç”Ÿæˆdumpå¿«ç…§ï¼Œåªåœ¨Linux/Solariså¹³å°æœ‰æ•ˆ</span><br></pre></td></tr></table></figure><p> Javaå†…å­˜æ˜ åƒå·¥å…·ã€‚ç”¨äºç”Ÿæˆå †è½¬å‚¨å¿«ç…§ï¼Œè¿˜å¯ä»¥æŸ¥è¯¢finalize()æ‰§è¡Œé˜Ÿåˆ—ï¼ŒJavaå †å’Œæ°¸ä¹…ä»£çš„è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚ç©ºé—´ä½¿ç”¨ç‡ã€å½“å‰ä½¿ç”¨çš„å“ªç§æ”¶é›†å™¨ç­‰ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\Java\jdk1.8.0_161\bin&gt;jmap -dump:format=b,file=D:\test.bin 2768</span><br><span class="line">Dumping heap to D:\test.bin ...</span><br><span class="line">Heap dump file created</span><br></pre></td></tr></table></figure><h3 id="2-5-jhat"><a href="#2-5-jhat" class="headerlink" title="2.5 jhat"></a>2.5 jhat</h3><p><code>jhat D:\test.bin</code></p><p> åˆ†æjmapç”Ÿæˆçš„å †è½¬å‚¨å¿«ç…§ï¼Œåœ¨æµè§ˆå™¨æŸ¥çœ‹ã€‚</p><h3 id="2-6-jstack"><a href="#2-6-jstack" class="headerlink" title="2.6 jstack"></a>2.6 jstack</h3><p> ç”¨äºç”Ÿæˆè™šæ‹Ÿæœºå½“å‰æ—¶åˆ»çš„çº¿ç¨‹å¿«ç…§ã€‚çº¿ç¨‹å¿«ç…§å°±æ˜¯å½“å‰è™šæ‹Ÿæœºå†…æ¯ä¸€æ¡æ­£åœ¨æ‰§è¡Œçš„æ–¹æ³•å †æ ˆçš„é›†åˆï¼Œç”Ÿæˆå¿«ç…§çš„ç›®çš„æ˜¯å®šä½çº¿ç¨‹å‡ºç°é•¿æ—¶é—´åœé¡¿çš„åŸå› ã€‚</p><p>-F    å½“æ­£å¸¸è¾“å‡ºçš„è¯·æ±‚ä¸è¢«å“åº”æ—¶ï¼Œå¼ºåˆ¶è¾“å‡ºçº¿ç¨‹å †æ ˆ</p><p>-l    é™¤å †æ ˆå¤–ï¼Œæ˜¾ç¤ºå…³äºé”çš„é™„åŠ ä¿¡æ¯</p><p>-m    å¦‚æœè°ƒç”¨åˆ°æœ¬åœ°æ–¹æ³•çš„è¯ï¼Œå¯ä»¥æ˜¾ç¤ºc/c++çš„å †æ ˆ</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Test &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line"></span><br><span class="line">//        Thread t1 = new Worker(1);</span><br><span class="line">//</span><br><span class="line">//</span><br><span class="line">//        t1.start();</span><br><span class="line">        final A a = new A();</span><br><span class="line">        final B b = new B();</span><br><span class="line"></span><br><span class="line">        new Thread()&#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    sleep(3000);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                a.getBLock(b);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line"></span><br><span class="line">        new Thread()&#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void run()&#123;</span><br><span class="line">                try &#123;</span><br><span class="line">                    sleep(3000);</span><br><span class="line">                &#125; catch (InterruptedException e) &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                b.getALock(a);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;.start();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class A &#123;</span><br><span class="line"></span><br><span class="line">    public synchronized void getBLock(B b)&#123;</span><br><span class="line"></span><br><span class="line">        b.getALock(this);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class B&#123;</span><br><span class="line"></span><br><span class="line">    public synchronized void getALock(A a)&#123;</span><br><span class="line">        a.getBLock(this);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">C:\Program Files\Java\jdk1.8.0_161\bin&gt;jps -m</span><br><span class="line">1904 AppMain com.zhongyp.Test</span><br><span class="line">944 RemoteMavenServer</span><br><span class="line">11540 Jps -m</span><br><span class="line">13204 Launcher F:/Program Files/intellij IDEA/lib/log4j.jar;F:/Program Files/intellij IDEA/lib/jps-builders.jar;F:/Program Files/intellij IDEA/lib/netty-all-4.1.1.Final.jar;F:/Program Files/intellij IDEA/lib/annotations.jar;F:/Program Files/intellij IDEA/lib/rt/jps-plugin-system.jar;F:/Program Files/inte</span><br><span class="line">llij IDEA/lib/jgoodies-forms.jar;F:/Program Files/intellij IDEA/lib/util.jar;F:/Program Files/intellij IDEA/lib/trove4j.jar;F:/Program Files/intellij IDEA/lib/jna.jar;F:/Program Files/intellij IDEA/lib/resources_en.jar;F:/Program Files/intellij IDEA/lib/oromatcher.jar;F:/Program Files/intellij IDEA/lib/i</span><br><span class="line">dea_rt.jar;F:/Program Files/intellij IDEA/lib/openapi.jar;F:/Program Files/intellij IDEA/lib/javac2.jar;F:/Program Files/intellij IDEA/lib/snappy-in-java-0.5.1.jar;F:/Program Files/intellij IDEA/lib/jna-platform.jar;F:/Program Files/intellij IDEA/lib/forms_rt.jar;F:/Program Files/intellij IDEA/lib/jdom.j</span><br><span class="line">ar;F:/Program Files/intellij IDEA/lib/asm-all.jar;F:/Program Files/intellij IDEA/lib/jps-</span><br><span class="line">4488</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">C:\Program Files\Java\jdk1.8.0_161\bin&gt;jstack -F 1904</span><br><span class="line">Attaching to process ID 1904, please wait...</span><br><span class="line">Debugger attached successfully.</span><br><span class="line">Server compiler detected.</span><br><span class="line">JVM version is 25.161-b12</span><br><span class="line">Deadlock Detection:</span><br><span class="line"></span><br><span class="line">Found one Java-level deadlock:</span><br><span class="line">=============================</span><br><span class="line"></span><br><span class="line">&quot;Thread-0&quot;:</span><br><span class="line">  waiting to lock Monitor@0x00000000193ce108 (Object@0x00000000d6129700, a com/zhongyp/B),</span><br><span class="line">  which is held by &quot;Thread-1&quot;</span><br><span class="line">&quot;Thread-1&quot;:</span><br><span class="line">  waiting to lock Monitor@0x00000000193cb878 (Object@0x00000000d6127d20, a com/zhongyp/A),</span><br><span class="line">  which is held by &quot;Thread-0&quot;</span><br><span class="line"></span><br><span class="line">Found a total of 1 deadlock.</span><br><span class="line"></span><br><span class="line">Thread 1: (state = BLOCKED)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Thread 18: (state = BLOCKED)</span><br><span class="line"> - com.zhongyp.A.getBLock(com.zhongyp.B) @bci=0, line=51 (Interpreted frame)</span><br><span class="line"> - com.zhongyp.B.getALock(com.zhongyp.A) @bci=2, line=59 (Interpreted frame)</span><br><span class="line"> - com.zhongyp.Test$2.run() @bci=18, line=38 (Interpreted frame)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Thread 17: (state = BLOCKED)</span><br><span class="line"> - com.zhongyp.B.getALock(com.zhongyp.A) @bci=0, line=59 (Interpreted frame)</span><br><span class="line"> - com.zhongyp.A.getBLock(com.zhongyp.B) @bci=2, line=51 (Interpreted frame)</span><br><span class="line"> - com.zhongyp.Test$1.run() @bci=18, line=26 (Interpreted frame)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Thread 16: (state = IN_NATIVE)</span><br><span class="line"> - java.net.DualStackPlainSocketImpl.accept0(int, java.net.InetSocketAddress[]) @bci=0 (Interpreted frame)</span><br><span class="line"> - java.net.DualStackPlainSocketImpl.socketAccept(java.net.SocketImpl) @bci=37, line=131 (Interpreted frame)</span><br><span class="line"> - java.net.AbstractPlainSocketImpl.accept(java.net.SocketImpl) @bci=7, line=409 (Interpreted frame)</span><br><span class="line"> - java.net.PlainSocketImpl.accept(java.net.SocketImpl) @bci=42, line=199 (Interpreted frame)</span><br><span class="line"> - java.net.ServerSocket.implAccept(java.net.Socket) @bci=60, line=545 (Interpreted frame)</span><br><span class="line"> - java.net.ServerSocket.accept() @bci=48, line=513 (Interpreted frame)</span><br><span class="line"> - com.intellij.rt.execution.application.AppMain$1.run() @bci=13, line=79 (Interpreted frame)</span><br><span class="line"> - java.lang.Thread.run() @bci=11, line=748 (Interpreted frame)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Thread 10: (state = BLOCKED)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Thread 9: (state = BLOCKED)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Thread 8: (state = BLOCKED)</span><br><span class="line"> - java.lang.Object.wait(long) @bci=0 (Interpreted frame)</span><br><span class="line"> - java.lang.ref.ReferenceQueue.remove(long) @bci=59, line=143 (Interpreted frame)</span><br><span class="line"> - java.lang.ref.ReferenceQueue.remove() @bci=2, line=164 (Interpreted frame)</span><br><span class="line"> - java.lang.ref.Finalizer$FinalizerThread.run() @bci=36, line=209 (Interpreted frame)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Thread 7: (state = BLOCKED)</span><br><span class="line"> - java.lang.Object.wait(long) @bci=0 (Interpreted frame)</span><br><span class="line"> - java.lang.Object.wait() @bci=2, line=502 (Interpreted frame)</span><br><span class="line"> - java.lang.ref.Reference.tryHandlePending(boolean) @bci=54, line=191 (Interpreted frame)</span><br><span class="line"> - java.lang.ref.Reference$ReferenceHandler.run() @bci=1, line=153 (Interpreted frame)</span><br></pre></td></tr></table></figure><h2 id="3-JDKå¯è§†åŒ–å·¥å…·"><a href="#3-JDKå¯è§†åŒ–å·¥å…·" class="headerlink" title="3. JDKå¯è§†åŒ–å·¥å…·"></a>3. JDKå¯è§†åŒ–å·¥å…·</h2><p>JConsole: Javaç›‘è§†ä¸ç®¡ç†æ§åˆ¶å°ã€‚åŸºäºJMXçš„å¯è§†åŒ–ç›‘è§†å’Œç®¡ç†å·¥å…·ã€‚ç›‘è§†Javaå †å’Œæ°¸ä¹…ä»£çš„çš„å˜åŒ–è¶‹åŠ¿ã€‚</p><p>VisualVM: å¤šåˆä¸€æ•…éšœå¤„ç†å·¥å…·ã€‚</p><h2 id="4-JVMè°ƒä¼˜æ¡ˆä¾‹"><a href="#4-JVMè°ƒä¼˜æ¡ˆä¾‹" class="headerlink" title="4. JVMè°ƒä¼˜æ¡ˆä¾‹"></a>4. JVMè°ƒä¼˜æ¡ˆä¾‹</h2><h3 id="4-1-é«˜æ€§èƒ½ç¡¬ä»¶ä¸Šçš„ç¨‹åºéƒ¨ç½²ç­–ç•¥"><a href="#4-1-é«˜æ€§èƒ½ç¡¬ä»¶ä¸Šçš„ç¨‹åºéƒ¨ç½²ç­–ç•¥" class="headerlink" title="4.1 é«˜æ€§èƒ½ç¡¬ä»¶ä¸Šçš„ç¨‹åºéƒ¨ç½²ç­–ç•¥"></a>4.1 é«˜æ€§èƒ½ç¡¬ä»¶ä¸Šçš„ç¨‹åºéƒ¨ç½²ç­–ç•¥</h3><p>ä½¿ç”¨64ä½JDKå¤§å†…å­˜ã€‚</p><p>é—®é¢˜ï¼š1.å†…å­˜å›æ”¶å¯¼è‡´é•¿æ—¶é—´åœé¡¿ã€‚2.64ä½JDKçš„æ€§èƒ½æµ‹è¯•ç»“æœæ™®éä½äº32ä½JDKã€‚3.éœ€è¦ä¿è¯ç¨‹åºè¶³å¤Ÿç¨³å®šï¼Œè¿™ç§åº”ç”¨å¦‚æœäº§ç”Ÿå †æº¢å‡ºå‡ ä¹å°±æ— æ³•äº§ç”Ÿå †è½¬å‚¨å¿«ç…§ã€‚4. ç›¸åŒç¨‹åº64ä½JDKä¸­æ¶ˆè€—å†…å­˜ä¸€èˆ¬æ¯”32ä½å¤§ï¼Œè¿™æ˜¯ç”±äºæŒ‡é’ˆè†¨èƒ€å’Œæ•°æ®ç±»å‹å¯¹å…¶è¡¥ç™½å¯¼è‡´çš„ã€‚</p><p>ä½¿ç”¨è‹¥å¹²ä¸ª32ä½è™šæ‹Ÿæœºå»ºç«‹é€»è¾‘é›†ç¾¤æ¥åˆ©ç”¨é›†ç¾¤èµ„æºã€‚</p><p>é—®é¢˜ï¼š1.å°½é‡é¿å…èŠ‚ç‚¹ç«äº‰å…¨å±€èµ„æºï¼Œå¦‚å¹¶å‘å†™æ“ä½œå¯¼è‡´IOå¼‚å¸¸ã€‚2.å¾ˆéš¾é«˜æ•ˆç‡çš„åˆ©ç”¨æŸäº›èµ„æºæ± ï¼Œæ¯”å¦‚è¿æ¥æ± ï¼Œå¯¼è‡´ä¸€äº›èŠ‚ç‚¹æ»¡äº†ï¼Œå…¶ä»–çš„è¿˜ä¸ºé›¶ã€‚3.å„ä¸ªèŠ‚ç‚¹ä»ç„¶ä¸å¯é¿å…çš„å—åˆ°32ä½çš„é™åˆ¶ï¼ˆ2GBï¼‰ã€‚4.å¤§é‡ä½¿ç”¨æœ¬åœ°ç¼“å­˜çš„åº”ç”¨ï¼Œæ”¹ä¸ºé›†ä¸­å¼çš„ç¼“å­˜ã€‚</p><h3 id="4-2-é›†ç¾¤é—´åŒæ­¥å¯¼è‡´å†…å­˜æº¢å‡º"><a href="#4-2-é›†ç¾¤é—´åŒæ­¥å¯¼è‡´å†…å­˜æº¢å‡º" class="headerlink" title="4.2 é›†ç¾¤é—´åŒæ­¥å¯¼è‡´å†…å­˜æº¢å‡º"></a>4.2 é›†ç¾¤é—´åŒæ­¥å¯¼è‡´å†…å­˜æº¢å‡º</h3><h3 id="4-3-å †å¤–å†…å­˜å¯¼è‡´çš„æº¢å‡ºé”™è¯¯"><a href="#4-3-å †å¤–å†…å­˜å¯¼è‡´çš„æº¢å‡ºé”™è¯¯" class="headerlink" title="4.3 å †å¤–å†…å­˜å¯¼è‡´çš„æº¢å‡ºé”™è¯¯"></a>4.3 å †å¤–å†…å­˜å¯¼è‡´çš„æº¢å‡ºé”™è¯¯</h3><h3 id="4-4-å¤–éƒ¨å‘½ä»¤å¯¼è‡´ç³»ç»Ÿç¼“æ…¢"><a href="#4-4-å¤–éƒ¨å‘½ä»¤å¯¼è‡´ç³»ç»Ÿç¼“æ…¢" class="headerlink" title="4.4 å¤–éƒ¨å‘½ä»¤å¯¼è‡´ç³»ç»Ÿç¼“æ…¢"></a>4.4 å¤–éƒ¨å‘½ä»¤å¯¼è‡´ç³»ç»Ÿç¼“æ…¢</h3><h2 id="5-javaå†…å­˜æ¨¡å‹å’Œçº¿ç¨‹"><a href="#5-javaå†…å­˜æ¨¡å‹å’Œçº¿ç¨‹" class="headerlink" title="5. javaå†…å­˜æ¨¡å‹å’Œçº¿ç¨‹"></a>5. javaå†…å­˜æ¨¡å‹å’Œçº¿ç¨‹</h2><h3 id="5-1-javaå†…å­˜æ¨¡å‹"><a href="#5-1-javaå†…å­˜æ¨¡å‹" class="headerlink" title="5.1 javaå†…å­˜æ¨¡å‹"></a>5.1 javaå†…å­˜æ¨¡å‹</h3><h4 id="5-1-1-ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜"><a href="#5-1-1-ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜" class="headerlink" title="5.1.1 ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜"></a>5.1.1 ä¸»å†…å­˜å’Œå·¥ä½œå†…å­˜</h4><p>Javaå†…å­˜æ¨¡å‹çš„ä¸»è¦ç›®æ ‡æ˜¯å®šä¹‰ç¨‹åºä¸­å„ä¸ªå˜é‡çš„è®¿é—®è§„åˆ™ï¼Œå³åœ¨è™šæ‹Ÿæœºä¸­å°†å˜é‡å­˜å‚¨åˆ°å†…å­˜å’Œä»å†…å­˜ä¸­å–å‡ºå˜é‡è¿™æ ·çš„åº•å±‚ç»†èŠ‚ã€‚</p><p>æ³¨ï¼š è¿™é‡Œè¯´çš„å˜é‡åŒ…æ‹¬äº†å®ä¾‹å˜é‡ã€é™æ€å­—æ®µå’Œæ„æˆæ•°ç»„å¯¹è±¡çš„å…ƒç´ ï¼Œä½†ä¸åŒ…æ‹¬å±€éƒ¨å˜é‡ä¸æ–¹æ³•å‚æ•°ï¼Œå› ä¸ºåè€…æ˜¯çº¿ç¨‹ç§æœ‰ï¼Œä¸ä¼šè¢«å…±äº«ï¼Œè‡ªç„¶å°±ä¸å­˜åœ¨ç«äº‰é—®é¢˜ã€‚</p><h2 id="6-çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–"><a href="#6-çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–" class="headerlink" title="6. çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–"></a>6. çº¿ç¨‹å®‰å…¨ä¸é”ä¼˜åŒ–</h2><p>çº¿ç¨‹å®‰å…¨çš„å®šä¹‰ï¼šå½“å¤šä¸ªçº¿ç¨‹è®¿é—®ä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œå¦‚æœä¸ç”¨è€ƒè™‘è¿™äº›çº¿ç¨‹åœ¨è¿è¡Œæ—¶ç¯å¢ƒä¸‹çš„è°ƒåº¦å’Œäº¤æ›¿æ‰§è¡Œï¼Œä¹Ÿä¸éœ€è¦è¿›è¡Œé¢å¤–çš„åŒæ­¥ï¼Œæˆ–è€…åœ¨è°ƒç”¨æ–¹è¿›è¡Œä»»ä½•å…¶ä»–çš„åè°ƒæ“ä½œï¼Œè°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„è¡Œä¸ºéƒ½å¯ä»¥è·å¾—æ­£ç¡®çš„ç»“æœï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡æ—¶çº¿ç¨‹å®‰å…¨çš„ã€‚</p><h3 id="6-1-çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•"><a href="#6-1-çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•" class="headerlink" title="6.1 çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•"></a>6.1 çº¿ç¨‹å®‰å…¨çš„å®ç°æ–¹æ³•</h3><h4 id="6-1-1-äº’æ–¥åŒæ­¥ï¼ˆé˜»å¡åŒæ­¥ï¼‰"><a href="#6-1-1-äº’æ–¥åŒæ­¥ï¼ˆé˜»å¡åŒæ­¥ï¼‰" class="headerlink" title="6.1.1 äº’æ–¥åŒæ­¥ï¼ˆé˜»å¡åŒæ­¥ï¼‰"></a>6.1.1 äº’æ–¥åŒæ­¥ï¼ˆé˜»å¡åŒæ­¥ï¼‰</h4><p>æ‚²è§‚é”ã€‚</p><p>sychronized å’Œ ReentrantLockã€‚</p><h4 id="6-1-2-éé˜»å¡åŒæ­¥"><a href="#6-1-2-éé˜»å¡åŒæ­¥" class="headerlink" title="6.1.2 éé˜»å¡åŒæ­¥"></a>6.1.2 éé˜»å¡åŒæ­¥</h4><p>ä¹è§‚é”ï¼ŒCASã€‚</p><p>AtomicIntegerç­‰</p><h4 id="6-1-3-æ— åŒæ­¥æ–¹æ¡ˆ"><a href="#6-1-3-æ— åŒæ­¥æ–¹æ¡ˆ" class="headerlink" title="6.1.3 æ— åŒæ­¥æ–¹æ¡ˆ"></a>6.1.3 æ— åŒæ­¥æ–¹æ¡ˆ</h4><ul><li><p>å¯é‡å…¥ä»£ç ï¼šå¯ä»¥åœ¨ä»£ç æ‰§è¡Œçš„ä»»ä½•æ—¶åˆ»ä¸­æ–­å®ƒï¼Œè½¬è€Œå»æ‰§è¡Œå¦å¤–ä¸€æ®µä»£ç ï¼Œè€Œåœ¨æ§åˆ¶æƒè¿”å›åï¼ŒåŸæ¥çš„ç¨‹åºä¸ä¼šå‡ºç°ä»»ä½•é”™è¯¯ã€‚åˆ¤æ–­ä»£ç æ˜¯å¦å…·å¤‡å¯é‡å…¥æ€§ï¼šå¦‚æœä¸€ä¸ªæ–¹æ³•ï¼Œä»–çš„è¿”å›ç»“æœæ˜¯å¯ä»¥é¢„æµ‹çš„ï¼Œåªè¦è¾“å…¥äº†ç›¸åŒçš„æ•°æ®ï¼Œå°±éƒ½èƒ½è¿”å›ç›¸åŒçš„ç»“æœï¼Œé‚£å®ƒå°±æ»¡è¶³å¯é‡å…¥æ€§çš„è¦æ±‚ã€‚</p></li><li><p>çº¿ç¨‹æœ¬åœ°å­˜å‚¨ï¼šå¦‚æœä¸€æ®µä»£ç ä¸­æ‰€éœ€è¦çš„æ•°æ®å¿…é¡»ä¸å…¶ä»–ä»£ç å…±äº«ï¼Œé‚£å°±çœ‹çœ‹è¿™äº›å…±äº«æ•°æ®çš„ä»£ç æ˜¯å¦èƒ½ä¿è¯åœ¨åŒä¸€ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œï¼ŸThreadLocalï¼ˆä¸å…±äº«ï¼‰ã€‚volatile(å…±äº«)ã€‚</p></li></ul><h3 id="6-2-é”ä¼˜åŒ–"><a href="#6-2-é”ä¼˜åŒ–" class="headerlink" title="6.2 é”ä¼˜åŒ–"></a>6.2 é”ä¼˜åŒ–</h3><h4 id="6-2-1-è‡ªæ—‹é”å’Œè‡ªé€‚åº”é”"><a href="#6-2-1-è‡ªæ—‹é”å’Œè‡ªé€‚åº”é”" class="headerlink" title="6.2.1 è‡ªæ—‹é”å’Œè‡ªé€‚åº”é”"></a>6.2.1 è‡ªæ—‹é”å’Œè‡ªé€‚åº”é”</h4><h4 id="6-2-2-é”æ¶ˆé™¤"><a href="#6-2-2-é”æ¶ˆé™¤" class="headerlink" title="6.2.2 é”æ¶ˆé™¤"></a>6.2.2 é”æ¶ˆé™¤</h4><h4 id="6-2-3-é”ç²—åŒ–"><a href="#6-2-3-é”ç²—åŒ–" class="headerlink" title="6.2.3 é”ç²—åŒ–"></a>6.2.3 é”ç²—åŒ–</h4><h4 id="6-2-4-è½»é‡çº§é”"><a href="#6-2-4-è½»é‡çº§é”" class="headerlink" title="6.2.4 è½»é‡çº§é”"></a>6.2.4 è½»é‡çº§é”</h4><h4 id="6-2-5-åå‘é”"><a href="#6-2-5-åå‘é”" class="headerlink" title="6.2.5 åå‘é”"></a>6.2.5 åå‘é”</h4><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;1-JVMçš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶&quot;&gt;&lt;a href=&quot;#1-JVMçš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;1. JVMçš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶&quot;&gt;&lt;/a&gt;1. JVMçš„è‡ªåŠ¨å†…å­˜ç®¡ç†æœºåˆ¶&lt;/h2&gt;&lt;h3 id=&quot;1-1-è¿è¡Œæ—¶æ•°æ®åŒºåŸŸ&quot;&gt;&lt;a
      
    
    </summary>
    
    
      <category term="JVM" scheme="http://zhongyp.me/tags/JVM/"/>
    
  </entry>
  
  <entry>
    <title>çº¿ç¨‹ç®€ä»‹</title>
    <link href="http://zhongyp.me/2018/03/16/concurrent/2017-03-16-thread-brief/"/>
    <id>http://zhongyp.me/2018/03/16/concurrent/2017-03-16-thread-brief/</id>
    <published>2018-03-15T16:00:00.000Z</published>
    <updated>2018-12-04T11:05:36.841Z</updated>
    
    <content type="html"><![CDATA[<h2 id="çº¿ç¨‹ç®€ä»‹"><a href="#çº¿ç¨‹ç®€ä»‹" class="headerlink" title="çº¿ç¨‹ç®€ä»‹"></a>çº¿ç¨‹ç®€ä»‹</h2><h3 id="1-ä»€ä¹ˆæ˜¯çº¿ç¨‹"><a href="#1-ä»€ä¹ˆæ˜¯çº¿ç¨‹" class="headerlink" title="1. ä»€ä¹ˆæ˜¯çº¿ç¨‹"></a>1. ä»€ä¹ˆæ˜¯çº¿ç¨‹</h3><p>ç°ä»£æ“ä½œç³»ç»Ÿåœ¨è¿è¡Œç¨‹åºæ—¶ï¼Œä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªè¿›ç¨‹ã€‚æ¯”å¦‚ä½ ç°åœ¨ç”¨çš„æµè§ˆå™¨ï¼Œç³»ç»Ÿå°±ä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªç”šè‡³å¤šä¸ªè¿›ç¨‹ã€‚<strong><em>å¼•å…¥è¿›ç¨‹çš„ç›®çš„æ˜¯ä¸ºäº†æ›´å¥½çš„ä½¿æ“ä½œç³»ç»Ÿå¹¶å‘æ‰§è¡Œç¨‹åºã€‚æ¥æé«˜èµ„æºåˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡ï¼Œå¢åŠ å¹¶å‘ç¨‹åº¦ã€‚</em></strong><br>çº¿ç¨‹æ˜¯ç°ä»£æ“ä½œç³»ç»Ÿè°ƒåº¦çš„åŸºæœ¬å•å…ƒï¼Œæ˜¯è¿è¡Œåœ¨è¿›ç¨‹ä¸Šä¸‹æ–‡ä¸­çš„é€»è¾‘æµï¼Œæ˜¯ç¨‹åºæ‰§è¡Œæµçš„æœ€å°å•å…ƒï¼Œä¹Ÿå«è½»é‡çº§è¿›ç¨‹ï¼ˆLight Weight Processï¼‰ï¼Œä¹Ÿå¯ä»¥ç§°ä¹‹ä¸ºCPUçš„æ‰§è¡Œå•å…ƒã€‚ä¸€ä¸ªç¨‹åºä½œä¸ºä¸€ä¸ªè¿›ç¨‹æ¥è¿è¡Œï¼Œç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­èƒ½å¤Ÿåˆ›å»ºå¤šä¸ªçº¿ç¨‹ï¼Œè€Œä¸€ä¸ªçº¿ç¨‹åœ¨ä¸€ä¸ªæ—¶åˆ»åªèƒ½è¿è¡Œä¸€ä¸ªå¤„ç†å™¨æ ¸å¿ƒä¸Šã€‚<strong><em>å¼•å…¥çº¿ç¨‹ï¼Œåˆ™æ˜¯ä¸ºäº†å‡å°ç¨‹åºåœ¨å¹¶å‘æ‰§è¡Œæ—¶æ‰€ä»˜å‡ºçš„æ—¶ç©ºå¼€é”€ï¼Œæé«˜æ“ä½œç³»ç»Ÿçš„å¹¶å‘æ€§èƒ½ã€‚çº¿ç¨‹ä¸æ‹¥æœ‰ç³»ç»Ÿèµ„æºï¼ˆä»£ç ï¼Œæ•°æ®ã€å †ã€å…±äº«åº“ã€æ–‡ä»¶ï¼‰ï¼Œåªæ‹¥æœ‰è¿è¡Œä¸­å¿…ä¸å¯å°‘çš„èµ„æºï¼ˆçº¿ç¨‹ID, æ ˆï¼Œæ ˆæŒ‡é’ˆï¼Œç¨‹åºè®¡æ•°å™¨ã€é€šç”¨ç›®çš„å¯„å­˜å™¨å’Œæ¡ä»¶ç ï¼‰ã€‚</em></strong><br>çº¿ç¨‹æ˜¯è°ƒåº¦çš„æŠ½è±¡ã€‚<strong><em>Javaä¸­å°†çº¿ç¨‹çš„æ‰§è¡Œå’Œæ‰§è¡Œå¯¹è±¡æŠ½è±¡å¼€æ¥ï¼ŒJDKåŒ…ä¸­æ‰§è¡Œçš„æœ‰Threadç±»ï¼ŒExecutoræ¡†æ¶ï¼Œå¯æ‰§è¡Œç›®æ ‡æœ‰Runaableï¼ŒCallableã€‚</em></strong></p><h4 id="1-1-çº¿ç¨‹çš„ä¼˜ç‚¹"><a href="#1-1-çº¿ç¨‹çš„ä¼˜ç‚¹" class="headerlink" title="1.1 çº¿ç¨‹çš„ä¼˜ç‚¹"></a>1.1 çº¿ç¨‹çš„ä¼˜ç‚¹</h4><ol><li>å¤šå¤„ç†å™¨ä½¿ç”¨ï¼š æé«˜èµ„æºåˆ©ç”¨ç‡å’Œç³»ç»Ÿååé‡ã€‚</li></ol><h4 id="1-2-çº¿ç¨‹çš„é£é™©"><a href="#1-2-çº¿ç¨‹çš„é£é™©" class="headerlink" title="1.2 çº¿ç¨‹çš„é£é™©"></a>1.2 çº¿ç¨‹çš„é£é™©</h4><ol><li>å®‰å…¨é£é™©ï¼šå¯¹äºå…±äº«å˜é‡çš„è®¿é—®ã€æ“ä½œå®¹æ˜“é€ æˆå®‰å…¨é£é™©ã€‚</li><li>æ´»è·ƒåº¦é£é™©ï¼šæ­»é”å¼•å‘æ´»åŠ¨åº¦å¤±è´¥ã€‚</li><li>æ€§èƒ½é£é™©ï¼šçº¿ç¨‹ä¹‹é—´é¢‘ç¹è°ƒåº¦å¯¼è‡´ä¸Šä¸‹æ–‡åˆ‡æ¢å¯¼è‡´å·¨å¤§çš„ç³»ç»Ÿå¼€é”€ã€‚</li></ol><h3 id="2-çº¿ç¨‹çš„çŠ¶æ€"><a href="#2-çº¿ç¨‹çš„çŠ¶æ€" class="headerlink" title="2. çº¿ç¨‹çš„çŠ¶æ€"></a>2. çº¿ç¨‹çš„çŠ¶æ€</h3><p><img src="/media/ThreadStatus.png" alt="ThreadStatus"><br><a href="#çº¿ç¨‹ç®€ä»‹">å›¾ç‰‡æ¥è‡ªï¼šJavaå¹¶å‘ç¼–ç¨‹çš„è‰ºæœ¯-</a></p><ul><li>æ–°å»º(NEW)ï¼šç”¨newå…³é”®å­—å’ŒThreadç±»æˆ–å…¶å­ç±»å»ºç«‹ä¸€ä¸ªçº¿ç¨‹å¯¹è±¡åï¼Œè¯¥çº¿ç¨‹å¯¹è±¡å°±å¤„äºæ–°ç”ŸçŠ¶æ€ã€‚å¤„äºæ–°ç”ŸçŠ¶æ€çš„çº¿ç¨‹æœ‰è‡ªå·±çš„å†…å­˜ç©ºé—´ï¼Œé€šè¿‡è°ƒç”¨startæ–¹æ³•è¿›å…¥å°±ç»ªçŠ¶æ€ï¼ˆREADYï¼‰ã€‚</li></ul><p><strong><em>æ³¨æ„ï¼šä¸èƒ½å¯¹å·²ç»å¯åŠ¨çš„çº¿ç¨‹å†æ¬¡è°ƒç”¨start()æ–¹æ³•ï¼Œå¦åˆ™ä¼šå‡ºç°Java.lang.IllegalThreadStateExceptionå¼‚å¸¸ã€‚</em></strong></p><ul><li><p>è¿è¡ŒçŠ¶æ€(RUNNABLE)ï¼šJavaçº¿ç¨‹å°†æ“ä½œç³»ç»Ÿä¸­çš„å°±ç»ªå’Œè¿è¡Œä¸¤ç§çŠ¶æ€ç¬¼ç»Ÿçš„ç§°ä½œâ€œè¿è¡Œä¸­â€ã€‚</p></li><li><p>å°±ç»ª(READY)ï¼šå¤„äºå°±ç»ªçŠ¶æ€çš„çº¿ç¨‹å·²ç»å…·å¤‡äº†è¿è¡Œæ¡ä»¶ï¼Œä½†è¿˜æ²¡æœ‰åˆ†é…åˆ°CPUï¼Œå¤„äºçº¿ç¨‹å°±ç»ªé˜Ÿåˆ—ï¼ˆå°½ç®¡æ˜¯é‡‡ç”¨é˜Ÿåˆ—å½¢å¼ï¼Œäº‹å®ä¸Šï¼ŒæŠŠå®ƒç§°ä¸ºå¯è¿è¡Œæ± è€Œä¸æ˜¯å¯è¿è¡Œé˜Ÿåˆ—ã€‚å› ä¸ºcpuçš„è°ƒåº¦ä¸ä¸€å®šæ˜¯æŒ‰ç…§å…ˆè¿›å…ˆå‡ºçš„é¡ºåºæ¥è°ƒåº¦çš„ï¼‰ï¼Œç­‰å¾…ç³»ç»Ÿä¸ºå…¶åˆ†é…CPUã€‚ç­‰å¾…çŠ¶æ€å¹¶ä¸æ˜¯æ‰§è¡ŒçŠ¶æ€ï¼Œå½“ç³»ç»Ÿé€‰å®šä¸€ä¸ªç­‰å¾…æ‰§è¡Œçš„Threadå¯¹è±¡åï¼Œå®ƒå°±ä¼šä»ç­‰å¾…æ‰§è¡ŒçŠ¶æ€è¿›å…¥æ‰§è¡ŒçŠ¶æ€ï¼Œç³»ç»ŸæŒ‘é€‰çš„åŠ¨ä½œç§°ä¹‹ä¸ºâ€œcpuè°ƒåº¦â€ã€‚ä¸€æ—¦è·å¾—CPUï¼Œçº¿ç¨‹å°±è¿›å…¥è¿è¡ŒçŠ¶æ€å¹¶è‡ªåŠ¨è°ƒç”¨è‡ªå·±çš„runæ–¹æ³•ã€‚ä¹Ÿå¯ä»¥å¯¹åœ¨è¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹è°ƒç”¨yield()æ–¹æ³•ï¼Œå®ƒå°±ä¼šè®©å‡ºcpuèµ„æºï¼Œå†æ¬¡å˜ä¸ºå°±ç»ªçŠ¶æ€ã€‚</p></li><li><p>è¿è¡Œ(RUNNING)ï¼šå¤„äºè¿è¡ŒçŠ¶æ€çš„çº¿ç¨‹æœ€ä¸ºå¤æ‚ï¼Œå®ƒå¯ä»¥å˜ä¸ºé˜»å¡çŠ¶æ€ã€å°±ç»ªçŠ¶æ€å’Œæ­»äº¡çŠ¶æ€ã€‚</p></li><li><p>ç­‰å¾…çŠ¶æ€(WAITING)ï¼šè¡¨ç¤ºçº¿ç¨‹è¿›å…¥ç­‰å¾…çŠ¶æ€ï¼Œè¿›å…¥è¯¥çŠ¶æ€è¡¨ç¤ºå½“å‰çº¿ç¨‹éœ€è¦ç­‰å¾…å…¶ä»–çº¿ç¨‹ä½œå‡ºä¸€äº›ç‰¹å®šåŠ¨ä½œï¼ˆé€šçŸ¥æˆ–ä¸­æ–­ï¼‰ã€‚</p></li><li><p>è¶…æ—¶ç­‰å¾…çŠ¶æ€(TIME_WAITING)ï¼šè¯¥çŠ¶æ€ä¸åŒäºWAITINGï¼Œå®ƒæ˜¯å¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´è‡ªè¡Œè¿”å›çš„ã€‚</p></li><li><p>é˜»å¡(BLOCKED)ï¼š<a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.State.html" target="_blank" rel="noopener">javase7 docs</a>å…³äºBLOCKEDçš„æè¿°ï¼šThread state for a thread blocked waiting for a monitor lock. A thread in the blocked state is waiting for a monitor lock to enter a synchronized block/method or reenter a synchronized block/method after calling Object.wait.ç¿»è¯‘ï¼šé˜»å¡çº¿ç¨‹æ˜¯ç­‰å¾…è·å–åŒæ­¥ç›‘è§†å™¨é”çš„çº¿ç¨‹ã€‚çº¿ç¨‹ç­‰å¾…è·å–åŒæ­¥ç›‘è§†å™¨é”è¿›å…¥åŒæ­¥ä»£ç å—/æ–¹æ³•,æˆ–è€…è°ƒç”¨Object.waitæ–¹æ³•å,è¢«å”¤é†’åç­‰å¾…è·å–åŒæ­¥ç›‘è§†å™¨é”,<strong><em>é‡å…¥</em></strong>åŒæ­¥ä»£ç å—/æ–¹æ³•ã€‚</p></li><li><p>æ­»äº¡(DEAD)ï¼šå½“çº¿ç¨‹çš„run()æ–¹æ³•æ‰§è¡Œå®Œï¼Œæˆ–è€…è¢«å¼ºåˆ¶æ€§åœ°ç»ˆæ­¢ï¼Œå°±è®¤ä¸ºå®ƒæ­»å»ã€‚è¿™ä¸ªçº¿ç¨‹å¯¹è±¡ä¹Ÿè®¸æ˜¯æ´»çš„ï¼Œä½†æ˜¯ï¼Œå®ƒå·²ç»ä¸æ˜¯ä¸€ä¸ªå•ç‹¬æ‰§è¡Œçš„çº¿ç¨‹ã€‚çº¿ç¨‹ä¸€æ—¦æ­»äº¡ï¼Œå°±ä¸èƒ½å¤ç”Ÿã€‚ å¦‚æœåœ¨ä¸€ä¸ªæ­»å»çš„çº¿ç¨‹ä¸Šè°ƒç”¨start()æ–¹æ³•ï¼Œä¼šæŠ›å‡ºjava.lang.IllegalThreadStateExceptionå¼‚å¸¸ã€‚</p></li></ul><h3 id="3-çº¿ç¨‹ä¼˜å…ˆçº§"><a href="#3-çº¿ç¨‹ä¼˜å…ˆçº§" class="headerlink" title="3. çº¿ç¨‹ä¼˜å…ˆçº§"></a>3. çº¿ç¨‹ä¼˜å…ˆçº§</h3><p>æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œæ—¶éƒ½æœ‰ä¸€ä¸ªä¼˜å…ˆçº§çš„å±æ€§ï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹å¯ä»¥è·å¾—è¾ƒå¤šçš„æ‰§è¡Œæœºä¼šï¼Œè€Œä¼˜å…ˆçº§ä½çš„çº¿ç¨‹åˆ™è·å¾—è¾ƒå°‘çš„æ‰§è¡Œæœºä¼šã€‚ä¸çº¿ç¨‹ä¼‘çœ ç±»ä¼¼ï¼Œçº¿ç¨‹çš„ä¼˜å…ˆçº§ä»ç„¶æ— æ³•ä¿éšœçº¿ç¨‹çš„æ‰§è¡Œæ¬¡åºã€‚åªä¸è¿‡ï¼Œä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹è·å–CPUèµ„æºçš„æ¦‚ç‡è¾ƒå¤§ï¼Œä¼˜å…ˆçº§ä½çš„ä¹Ÿå¹¶éæ²¡æœºä¼šæ‰§è¡Œã€‚</p><p>æ¯ä¸ªçº¿ç¨‹é»˜è®¤çš„ä¼˜å…ˆçº§éƒ½ä¸åˆ›å»ºå®ƒçš„çˆ¶çº¿ç¨‹å…·æœ‰ç›¸åŒçš„ä¼˜å…ˆçº§ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œmainçº¿ç¨‹å…·æœ‰æ™®é€šä¼˜å…ˆçº§ã€‚</p><p><strong><em>æ³¨ï¼šè™½ç„¶Javaæä¾›äº†10ä¸ªä¼˜å…ˆçº§åˆ«ï¼Œä½†è¿™äº›ä¼˜å…ˆçº§åˆ«éœ€è¦æ“ä½œç³»ç»Ÿçš„æ”¯æŒã€‚ä¸åŒçš„æ“ä½œç³»ç»Ÿçš„ä¼˜å…ˆçº§å¹¶ä¸ç›¸åŒï¼Œè€Œä¸”ä¹Ÿä¸èƒ½å¾ˆå¥½çš„å’ŒJavaçš„10ä¸ªä¼˜å…ˆçº§åˆ«å¯¹åº”ã€‚æ‰€ä»¥æˆ‘ä»¬åº”è¯¥ä½¿ç”¨MAX_PRIORITYã€MIN_PRIORITYå’ŒNORM_PRIORITYä¸‰ä¸ªé™æ€å¸¸é‡æ¥è®¾å®šä¼˜å…ˆçº§ï¼Œè¿™æ ·æ‰èƒ½ä¿è¯ç¨‹åºæœ€å¥½çš„å¯ç§»æ¤æ€§ã€‚</em></strong></p><h3 id="4-Daemonçº¿ç¨‹"><a href="#4-Daemonçº¿ç¨‹" class="headerlink" title="4. Daemonçº¿ç¨‹"></a>4. Daemonçº¿ç¨‹</h3><p>Daemonçº¿ç¨‹æ˜¯ä¸€ç§æ”¯æŒå‹çº¿ç¨‹ï¼Œå› ä¸ºå®ƒä¸»è¦è¢«ç”¨åšç¨‹åºä¸­åå°è°ƒåº¦åŠæ”¯æŒæ€§å·¥ä½œã€‚<br><strong><em> æ³¨æ„ï¼šæ„å»ºDaemonçº¿ç¨‹æ—¶ï¼Œä¸èƒ½ä¾é finallyå—ä¸­çš„å†…å®¹æ¥ç¡®ä¿æ‰§è¡Œå…³é—­æˆ–æ¸…ç†èµ„æºçš„é€»è¾‘ã€‚</em></strong></p><p>å®ˆæŠ¤çº¿ç¨‹ä½¿ç”¨çš„æƒ…å†µè¾ƒå°‘ï¼Œä½†å¹¶éæ— ç”¨ï¼Œä¸¾ä¾‹æ¥è¯´ï¼ŒJVMçš„åƒåœ¾å›æ”¶ã€å†…å­˜ç®¡ç†ç­‰çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹ã€‚è¿˜æœ‰å°±æ˜¯åœ¨åšæ•°æ®åº“åº”ç”¨æ—¶å€™ï¼Œä½¿ç”¨çš„æ•°æ®åº“è¿æ¥æ± ï¼Œè¿æ¥æ± æœ¬èº«ä¹ŸåŒ…å«ç€å¾ˆå¤šåå°çº¿ç¨‹ï¼Œç›‘æ§è¿æ¥ä¸ªæ•°ã€è¶…æ—¶æ—¶é—´ã€çŠ¶æ€ç­‰ç­‰ã€‚è°ƒç”¨çº¿ç¨‹å¯¹è±¡çš„æ–¹æ³•setDaemon(true)ï¼Œåˆ™å¯ä»¥å°†å…¶è®¾ç½®ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚å®ˆæŠ¤çº¿ç¨‹çš„ç”¨é€”ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">â€¢ å®ˆæŠ¤çº¿ç¨‹é€šå¸¸ç”¨äºæ‰§è¡Œä¸€äº›åå°ä½œä¸šï¼Œä¾‹å¦‚åœ¨ä½ çš„åº”ç”¨ç¨‹åºè¿è¡Œæ—¶æ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼Œåœ¨æ–‡å­—ç¼–è¾‘å™¨é‡Œåšè‡ªåŠ¨è¯­æ³•æ£€æŸ¥ã€è‡ªåŠ¨ä¿å­˜ç­‰åŠŸèƒ½ã€‚</span><br><span class="line">â€¢ Javaçš„åƒåœ¾å›æ”¶ä¹Ÿæ˜¯ä¸€ä¸ªå®ˆæŠ¤çº¿ç¨‹ã€‚å®ˆæŠ¤çº¿çš„å¥½å¤„å°±æ˜¯ä½ ä¸éœ€è¦å…³å¿ƒå®ƒçš„ç»“æŸé—®é¢˜ã€‚ä¾‹å¦‚ä½ åœ¨ä½ çš„åº”ç”¨ç¨‹åºè¿è¡Œçš„æ—¶å€™å¸Œæœ›æ’­æ”¾èƒŒæ™¯éŸ³ä¹ï¼Œå¦‚æœå°†è¿™ä¸ªæ’­æ”¾èƒŒæ™¯éŸ³ä¹çš„çº¿ç¨‹è®¾å®šä¸ºéå®ˆæŠ¤çº¿ç¨‹ï¼Œé‚£ä¹ˆåœ¨ç”¨æˆ·è¯·æ±‚é€€å‡ºçš„æ—¶å€™ï¼Œä¸ä»…è¦é€€å‡ºä¸»çº¿ç¨‹ï¼Œè¿˜è¦é€šçŸ¥æ’­æ”¾èƒŒæ™¯éŸ³ä¹çš„çº¿ç¨‹é€€å‡ºï¼›å¦‚æœè®¾å®šä¸ºå®ˆæŠ¤çº¿ç¨‹åˆ™ä¸éœ€è¦äº†ã€‚</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> /**</span><br><span class="line">    * å°†è¯¥çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹æˆ–ç”¨æˆ·çº¿ç¨‹ã€‚å½“æ­£åœ¨è¿è¡Œçš„çº¿ç¨‹éƒ½æ˜¯å®ˆæŠ¤çº¿ç¨‹æ—¶ï¼ŒJava è™šæ‹Ÿæœºé€€å‡ºã€‚</span><br><span class="line">    * è¯¥æ–¹æ³•å¿…é¡»åœ¨å¯åŠ¨çº¿ç¨‹å‰è°ƒç”¨ã€‚</span><br><span class="line">    * è¯¥æ–¹æ³•é¦–å…ˆè°ƒç”¨è¯¥çº¿ç¨‹çš„ checkAccess æ–¹æ³•ï¼Œä¸”ä¸å¸¦ä»»ä½•å‚æ•°ã€‚</span><br><span class="line">    * è¿™å¯èƒ½æŠ›å‡º SecurityExceptionï¼ˆåœ¨å½“å‰çº¿ç¨‹ä¸­ï¼‰ã€‚   </span><br><span class="line">    *   å‚æ•°ï¼š</span><br><span class="line">    *      on - å¦‚æœä¸º trueï¼Œåˆ™å°†è¯¥çº¿ç¨‹æ ‡è®°ä¸ºå®ˆæŠ¤çº¿ç¨‹ã€‚    </span><br><span class="line">    *   æŠ›å‡ºï¼š    </span><br><span class="line">    *     IllegalThreadStateException - å¦‚æœè¯¥çº¿ç¨‹å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚    </span><br><span class="line">    *     SecurityException - å¦‚æœå½“å‰çº¿ç¨‹æ— æ³•ä¿®æ”¹è¯¥çº¿ç¨‹ã€‚</span><br><span class="line">    */</span><br><span class="line">    </span><br><span class="line">public final void setDaemon(boolean on)</span><br></pre></td></tr></table></figure><h3 id="5-å¼•ç”¨"><a href="#5-å¼•ç”¨" class="headerlink" title="5. å¼•ç”¨"></a>5. å¼•ç”¨</h3><p><a href="https://www.cnblogs.com/snow-flower/p/6114765.html" target="_blank" rel="noopener">Javaå¤šçº¿ç¨‹è¯¦è§£</a><br><a href="https://book.douban.com/subject/26591326/" target="_blank" rel="noopener">Javaå¹¶å‘ç¼–ç¨‹è‰ºæœ¯</a><br><a href="https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.State.html" target="_blank" rel="noopener">javase7 docs</a><br><a href="https://my.oschina.net/u/2500836/blog/1538667" target="_blank" rel="noopener">Javaçº¿ç¨‹ï¼ˆ1ï¼‰-è¯»Threadç±»æºç </a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;çº¿ç¨‹ç®€ä»‹&quot;&gt;&lt;a href=&quot;#çº¿ç¨‹ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;çº¿ç¨‹ç®€ä»‹&quot;&gt;&lt;/a&gt;çº¿ç¨‹ç®€ä»‹&lt;/h2&gt;&lt;h3 id=&quot;1-ä»€ä¹ˆæ˜¯çº¿ç¨‹&quot;&gt;&lt;a href=&quot;#1-ä»€ä¹ˆæ˜¯çº¿ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;1. 
      
    
    </summary>
    
    
      <category term="å¹¶å‘" scheme="http://zhongyp.me/tags/%E5%B9%B6%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>ç»å…¸é¢è¯•é¢˜æ•´ç†</title>
    <link href="http://zhongyp.me/2018/03/02/interfaceview/2018-03-02-Classic-Interview-Questions/"/>
    <id>http://zhongyp.me/2018/03/02/interfaceview/2018-03-02-Classic-Interview-Questions/</id>
    <published>2018-03-01T16:00:00.000Z</published>
    <updated>2018-10-02T01:27:53.326Z</updated>
    
    <content type="html"><![CDATA[<h2 id="corejava"><a href="#corejava" class="headerlink" title="corejava"></a>corejava</h2><ol><li><p>hashcode ç›¸ç­‰ä¸¤ä¸ªç±»ä¸€å®šç›¸ç­‰ä¹ˆï¼Ÿequalså‘¢ï¼Ÿç›¸åå‘¢ï¼Ÿ</p></li><li><p>ä»‹ç»ä¸€ä¸‹é›†åˆæ¡†æ¶</p></li><li><p>hashmap hashtable åº•å±‚å®ç°ä»€ä¹ˆåŒºåˆ«ï¼Ÿhashtaleå’Œconcurrenthashmapå‘¢ï¼Ÿ</p></li><li><p>hashmapå’Œtreemap ä»€ä¹ˆåŒºåˆ«ï¼Ÿåº•å±‚æ•°æ®ç»“æ„å‘¢ï¼Ÿ</p></li><li><p>çº¿ç¨‹æ± ç”¨è¿‡ä¹ˆï¼Ÿéƒ½æœ‰ä»€ä¹ˆå‚æ•°ï¼Ÿåº•å±‚å¦‚ä½•å®ç°çš„ï¼Ÿ</p></li><li><p>sychnizedå’ŒLockä»€ä¹ˆåŒºåˆ«ï¼Ÿsychnizeä»€ä¹ˆæƒ…å†µæ˜¯å¯¹è±¡é”ï¼Œä»€ä¹ˆæ—¶å€™æ˜¯å…¨å±€é”ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ</p></li><li><p>ThreadLocal æ˜¯ä»€ä¹ˆï¼Ÿåº•å±‚å¦‚ä½•å®ç°ï¼Ÿå†™ä¸€ä¸ªä¾‹å­ï¼Ÿ</p></li><li><p>volitileçš„å·¥ä½œåŸç†ï¼Ÿ</p></li><li><p>casçŸ¥é“ä¹ˆï¼Ÿå¦‚ä½•å®ç°çš„ï¼Ÿ</p></li><li><p>è¯·ç”¨è‡³å°‘å››ç§å†™æ³•ï¼Ÿå†™ä¸€ä¸ªå•ä¾‹æ¨¡å¼ï¼Ÿ</p></li></ol><h2 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h2><ol><li><p>è¯·ä»‹ç»ä¸€ä¸‹JVMå†…å­˜æ¨¡å‹ï¼Ÿç”¨è¿‡ä»€ä¹ˆåƒåœ¾å›æ”¶å™¨ï¼Œéƒ½è¯´è¯´ï¼Ÿ</p></li><li><p>çº¿ä¸Šå‘é€é¢‘ç¹full gcå¦‚ä½•å¤„ç†ï¼ŸCPUä½¿ç”¨ç‡è¿‡é«˜æ€ä¹ˆåŠï¼Ÿå¦‚ä½•å®šä½é—®é¢˜ï¼Ÿå¦‚ä½•è§£å†³ï¼Ÿè¯´ä¸€ä¸‹è§£å†³æ€è·¯å’Œå¤„ç†æ–¹æ³•ã€‚</p></li><li><p>çŸ¥é“å­—èŠ‚ç ä¹ˆï¼Ÿå­—èŠ‚ç éƒ½æœ‰é‚£äº›ï¼ŸInteger * 5,int y=5, æ¯”è¾ƒx==y éƒ½ç»è¿‡é‚£äº›æ­¥éª¤ï¼Ÿ</p></li><li><p>è®²è®²ç±»åŠ è½½æœºåˆ¶ï¼Ÿéƒ½æœ‰å“ªäº›ç±»åŠ è½½å™¨ï¼Œè¿™äº›ç±»åŠ è½½å™¨éƒ½åŠ è½½å“ªäº›æ–‡ä»¶ï¼Ÿæ‰‹å†™ä¸€ä¸‹ç±»åŠ è½½Demo</p></li><li><p>çŸ¥é“osgiä¹ˆï¼Ÿä»–æ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ</p></li><li><p>è¯·é—®ä½ åšè¿‡å“ªäº›JVMä¼˜åŒ–ï¼Ÿä½¿ç”¨ä»€ä¹ˆæ–¹æ³•ï¼Ÿè¾¾åˆ°ä»€ä¹ˆæ•ˆæœï¼Ÿ</p></li></ol><ol start="7"><li>class.forName(â€œjava.lang.Stringâ€)å’ŒString.class.getClassLoader.loadClass(â€œjava.lang.Stringâ€)ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</li></ol><h2 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h2><ol><li><p>springéƒ½æœ‰å“ªäº›æœºåˆ¶ï¼ŸAOPåº•å±‚å¦‚ä½•å®ç°çš„ï¼ŸIOCï¼Ÿ</p></li><li><p>cglibçŸ¥é“ä¹ˆï¼Ÿå®ƒå’ŒJDKåŠ¨æ€ä»£ç†æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿæ‰‹å†™ä¸€ä¸ªjdkåŠ¨æ€ä»£ç†ï¼Ÿ</p></li></ol><h2 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h2><ol><li><p>ä½¿ç”¨mysqlç´¢å¼•éƒ½æœ‰å“ªäº›åŸåˆ™ï¼Ÿç´¢å¼•ä»€ä¹ˆæ•°æ®ç»“æ„ï¼ŸB+treeå’ŒB treeä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p></li><li><p>mysqlæœ‰å“ªäº›å­˜å‚¨å¼•æ“å•Šï¼Ÿéƒ½æœ‰å•¥åŒºåˆ«ï¼Ÿè¦è¯¦ç»†ï¼Ÿ</p></li><li><p>è®¾è®¡é«˜å¹¶å‘ç³»ç»Ÿæ•°æ®åº“å±‚é¢è¯¥æ€ä¹ˆè®¾è®¡ï¼Ÿæ•°æ®åº“é”æœ‰å“ªäº›ç±»å‹ï¼Ÿå¦‚ä½•å®ç°ï¼Ÿ</p></li><li><p>æ•°æ®åº“äº‹åŠ¡æœ‰å“ªäº›ï¼Ÿ</p></li></ol><h2 id="åˆ†åº“åˆ†è¡¨"><a href="#åˆ†åº“åˆ†è¡¨" class="headerlink" title="åˆ†åº“åˆ†è¡¨"></a>åˆ†åº“åˆ†è¡¨</h2><ol><li><p>å¦‚ä½•è®¾è®¡å¯ä»¥åŠ¨æ€æ‰©å®¹ç¼©å®¹çš„åˆ†åº“åˆ†è¡¨æ–¹æ¡ˆï¼Ÿ</p></li><li><p>ç”¨è¿‡å“ªäº›åˆ†åº“åˆ†è¡¨çš„ä¸­é—´ä»¶ï¼Œæœ‰å•¥ä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Œè®²ä¸€ä¸‹ä½ äº†è§£çš„åˆ†åº“åˆ†è¡¨ä¸­é—´ä»¶çš„åº•å±‚å®ç°åŸç†ã€‚</p></li><li><p>æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªæœªåˆ†åº“åˆ†è¡¨çš„ç³»ç»Ÿï¼Œä»¥åç³»ç»Ÿéœ€è¦åˆ†åº“åˆ†è¡¨ï¼Œå¦‚ä½•è®¾è®¡ï¼Œè®©æœªåˆ†åº“åˆ†è¡¨çš„ç³»ç»ŸåŠ¨æ€åˆ‡æ¢åˆ°åˆ†åº“åˆ†è¡¨ç³»ç»Ÿä¸Šï¼Ÿ</p></li><li><p>åˆ†å¸ƒå¼äº‹åŠ¡çŸ¥é“ä¹ˆï¼Ÿ ä½ ä»¬æ€ä¹ˆè§£å†³çš„ï¼Ÿ TCC?é‚£è‹¥å‡ºç°ç½‘ç»œåŸå› ï¼Œç½‘ç»œè¿ä¸é€šæ€ä¹ˆåŠå•Šï¼Ÿ</p></li><li><p>ä¸ºä»€ä¹ˆåˆ†åº“åˆ†è¡¨ï¼Ÿ</p></li><li><p>åˆ†å¸ƒå¼å¯»å€æ–¹å¼éƒ½æœ‰å“ªäº›ç®—æ³•ï¼ŸçŸ¥é“ä¸€è‡´hashä¹ˆï¼Ÿæ‰‹å†™ä¸€ä¸‹Javaå®ç°ä»£ç ï¼Ÿä½ è‹¥userIdå–æ¨¡åˆ†ç‰‡ï¼Œé‚£æˆ‘è¦æŸ¥ä¸€æ®µè¿ç»­æ—¶é—´é‡Œçš„æ•°æ®æ€ä¹ˆåŠï¼Ÿ</p></li><li><p>å¦‚ä½•è§£å†³åˆ†åº“åˆ†è¡¨ä¸»é”®é—®é¢˜ï¼Ÿæœ‰ä»€ä¹ˆå®ç°æ–¹æ¡ˆï¼Ÿ</p></li></ol><h2 id="åˆ†å¸ƒå¼ç¼“å­˜"><a href="#åˆ†å¸ƒå¼ç¼“å­˜" class="headerlink" title="åˆ†å¸ƒå¼ç¼“å­˜"></a>åˆ†å¸ƒå¼ç¼“å­˜</h2><ol><li><p>rediså’Œmemched ä»€ä¹ˆåŒºåˆ«ï¼Ÿä¸ºä»€ä¹ˆå•çº¿ç¨‹çš„redisæ¯”å¤šçº¿ç¨‹çš„memchedæ•ˆç‡è¦é«˜ï¼Ÿ</p></li><li><p>redisæœ‰ä»€ä¹ˆæ•°æ®ç±»å‹ï¼Ÿéƒ½åœ¨å“ªäº›åœºæ™¯ä¸‹ä½¿ç”¨ï¼Ÿ</p></li><li><p>redisçš„ä¸»ä»å¤åˆ¶æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿredisçš„é›†ç¾¤æ¨¡å¼æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿredisçš„keyæ˜¯å¦‚ä½•å¯»å€çš„ï¼Ÿ</p></li><li><p>ä½¿ç”¨rediså¦‚ä½•è®¾è®¡åˆ†å¸ƒå¼é”ï¼Ÿä½¿ç”¨zkå¯ä»¥ä¹ˆï¼Ÿå¦‚ä½•å®ç°ï¼Ÿè¿™ä¸¤ç§å“ªä¸ªæ•ˆç‡æ›´é«˜ï¼Ÿ</p></li><li><p>çŸ¥é“redisçš„æŒä¹…åŒ–ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿå…·ä½“åº•å±‚å®ç°å‘¢ï¼Ÿ</p></li><li><p>redisè¿‡æœŸç­–ç•¥éƒ½æœ‰å“ªäº›ï¼ŸLRUï¼Ÿå†™ä¸€ä¸‹Javaç‰ˆæœ¬ä»£ç ï¼Ÿ</p></li></ol><h2 id="åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶"><a href="#åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶" class="headerlink" title="åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶"></a>åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶</h2><ol><li><p>è¯´ä¸€ä¸‹dubboçš„å®ç°è¿‡ç¨‹ï¼Œæ³¨å†Œä¸­å¿ƒæŒ‚äº†å¯ä»¥ç»§ç»­é€šä¿¡ä¹ˆï¼Ÿ</p></li><li><p>zkåŸç†çŸ¥é“ä¹ˆï¼Ÿzkéƒ½å¯ä»¥å¹²ä»€ä¹ˆï¼Ÿpaxosç®—æ³•çŸ¥é“ä¹ˆï¼Ÿè¯´ä¸€ä¸‹åŸç†å’Œå®ç°ï¼Ÿ</p></li><li><p>dubboæ”¯æŒå“ªäº›åºåˆ—åŒ–åè®®ï¼Ÿhessianï¼Ÿè¯´ä¸€ä¸‹hessiançš„æ•°æ®ç»“æ„ï¼ŸPBçŸ¥é“ä¹ˆï¼Ÿä¸ºå•¥PBæ•ˆç‡æ˜¯æœ€é«˜çš„ï¼Ÿ</p></li><li><p>çŸ¥é“nettyä¹ˆï¼Ÿnettyå¯ä»¥å¹²å˜›ï¼ŸNIO,BIO,AIOéƒ½æ˜¯ä»€ä¹ˆå•Šï¼Ÿæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</p></li><li><p>dubboå¤åˆ¶å‡è¡¡ç­–ç•¥å’Œé«˜å¯ç”¨ç­–ç•¥éƒ½æœ‰å“ªäº›ï¼ŸåŠ¨æ€ä»£ç†ç­–ç•¥å‘¢ï¼Ÿ</p></li><li><p>ä¸ºä»€ä¹ˆè¦è¿›è¡Œç³»ç»Ÿæ‹†åˆ†å•Šï¼Ÿæ‹†åˆ†ä¸ç”¨dubboå¯ä»¥ä¹ˆï¼Ÿdubboå’Œthriftä»€ä¹ˆåŒºåˆ«å•Šï¼Ÿ</p></li></ol><h2 id="åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—"><a href="#åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—"></a>åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—</h2><ol><li><p>ä¸ºä»€ä¹ˆä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼Ÿæ¶ˆæ¯é˜Ÿåˆ—æœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ</p></li><li><p>å¦‚ä½•ä¿è¯æ¶ˆæ¯é˜Ÿåˆ—çš„é«˜å¯ç”¨ï¼Ÿå¦‚ä½•ä¿è¯æ¶ˆæ¯ä¸è¢«é‡å¤æ¶ˆè´¹ï¼Ÿ</p></li><li><p>kafkaï¼Œactivemqï¼Œrabbitmqï¼Œrocketmqéƒ½æœ‰ä»€ä¹ˆä¼˜ç‚¹å’Œç¼ºç‚¹ï¼Ÿ</p></li><li><p>å¦‚æœè®©ä½ å†™ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ï¼Œè¯¥å¦‚ä½•è¿›è¡Œæ¶æ„è®¾è®¡ï¼Ÿè¯´ä¸€ä¸‹ä½ çš„æ€è·¯ï¼Ÿ</p></li></ol><h2 id="åˆ†å¸ƒå¼æœç´¢å¼•æ“"><a href="#åˆ†å¸ƒå¼æœç´¢å¼•æ“" class="headerlink" title="åˆ†å¸ƒå¼æœç´¢å¼•æ“"></a>åˆ†å¸ƒå¼æœç´¢å¼•æ“</h2><ol><li><p>esçš„å·¥ä½œè¿‡ç¨‹å®ç°æ˜¯å¦‚ä½•çš„ï¼Ÿå¦‚ä½•å®ç°åˆ†å¸ƒå¼çš„å•Šï¼Ÿ</p></li><li><p>esåœ¨æ•°æ®é‡å¾ˆå¤§çš„æƒ…å†µä¸‹ï¼Œå¦‚ä½•æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Ÿ</p></li><li><p>esçš„æŸ¥è¯¢æ˜¯ä¸€ä¸ªæ€ä¹ˆçš„å·¥ä½œè¿‡ç¨‹ï¼Ÿåº•å±‚çš„lucenceä»‹ç»ä¸€ä¸‹ï¼Ÿå€’æ’ç´¢å¼•çŸ¥é“ä¹ˆï¼Ÿeså’Œmongodbä»€ä¹ˆåŒºåˆ«ï¼Ÿéƒ½åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨ï¼Ÿ</p></li></ol><h2 id="é«˜å¹¶å‘é«˜å¯ç”¨æ¶æ„è®¾è®¡"><a href="#é«˜å¹¶å‘é«˜å¯ç”¨æ¶æ„è®¾è®¡" class="headerlink" title="é«˜å¹¶å‘é«˜å¯ç”¨æ¶æ„è®¾è®¡"></a>é«˜å¹¶å‘é«˜å¯ç”¨æ¶æ„è®¾è®¡</h2><ol><li><p>å¦‚ä½•è®¾è®¡ä¸€ä¸ªé«˜å¹¶å‘é«˜å¯ç”¨ç³»ç»Ÿï¼Ÿ</p></li><li><p>å¦‚ä½•é™æµï¼Ÿå·¥ç¨‹ä¸­æ€ä¹ˆåšçš„ï¼Œè¯´ä¸€ä¸‹å…·ä½“å®ç°ï¼Ÿ</p></li><li><p>ç¼“å­˜å¦‚ä½•ä½¿ç”¨çš„ï¼Ÿç¼“å­˜ä½¿ç”¨ä¸ä¼šé€ æˆä»€ä¹ˆåæœï¼Ÿ</p></li><li><p>å¦‚ä½•ç†”æ–­ï¼Ÿç†”æ–­æ¡†æ¶éƒ½æœ‰å“ªäº›ï¼Ÿå…·ä½“å®ç°åŸç†çŸ¥é“ä¹ˆï¼Ÿ</p></li><li><p>å¦‚ä½•é™çº§ï¼Ÿ å¦‚ä½•è¿›è¡Œç³»ç»Ÿæ‹†åˆ†ï¼Ÿå¦‚ä½•æ•°æ®åº“æ‹†åˆ†ï¼Ÿ</p></li></ol><h2 id="é€šä¿¡åè®®"><a href="#é€šä¿¡åè®®" class="headerlink" title="é€šä¿¡åè®®"></a>é€šä¿¡åè®®</h2><ol><li><p>è¯´ä¸€ä¸‹TCP/IP å››å±‚ï¼Ÿ</p></li><li><p>httpçš„å·¥ä½œæµç¨‹ï¼Ÿ http1.0 http1.1 http2.0å…·ä½“å“ªäº›åŒºåˆ«ï¼Ÿ</p></li><li><p>TCPä¸‰æ¬¡æ¡æ‰‹ï¼Œå››å±‚åˆ†æ‰‹çš„å·¥ä½œæµç¨‹ï¼Ÿç”»ä¸€ä¸‹æµç¨‹å›¾ï¼Ÿä¸ºä»€ä¹ˆä¸æ˜¯å››æ¬¡äº”æ¬¡æˆ–è€…ä¸¤æ¬¡ï¼Ÿ</p></li><li><p>ç”»ä¸€ä¸‹httpsçš„å·¥ä½œæµç¨‹ï¼Ÿå…·ä½“å¦‚ä½•å®ç°ï¼Ÿå¦‚ä½•é˜²æ­¢è¢«æŠ“åŒ…ï¼Ÿ</p></li></ol><h2 id="ç®—æ³•"><a href="#ç®—æ³•" class="headerlink" title="ç®—æ³•"></a>ç®—æ³•</h2><ol><li>45äº¿é˜¿æ‹‰ä¼¯æ•°å­—ï¼Œå¦‚ä½•è¿›è¡Œå»é‡ï¼Ÿå¦‚ä½•æ‰¾å‡ºæœ€å¤§çš„é‚£ä¸ªæ•°ï¼Ÿ</li></ol><h2 id="æ•°æ®ç»“æ„"><a href="#æ•°æ®ç»“æ„" class="headerlink" title="æ•°æ®ç»“æ„"></a>æ•°æ®ç»“æ„</h2><ol><li>äºŒå‰æ ‘å’Œçº¢é»‘æ ‘</li></ol><p><a href="https://www.jianshu.com/p/a07d1d4004b0" target="_blank" rel="noopener">åšæ–‡æ¨è</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;corejava&quot;&gt;&lt;a href=&quot;#corejava&quot; class=&quot;headerlink&quot; title=&quot;corejava&quot;&gt;&lt;/a&gt;corejava&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;&lt;p&gt;hashcode ç›¸ç­‰ä¸¤ä¸ªç±»ä¸€å®šç›¸ç­‰ä¹ˆï¼Ÿequalså‘¢ï¼Ÿç›¸åå‘¢ï¼Ÿ&lt;/p&gt;

      
    
    </summary>
    
    
      <category term="Interview" scheme="http://zhongyp.me/tags/Interview/"/>
    
  </entry>
  
  <entry>
    <title>Javaå†…å­˜æ¨¡å‹</title>
    <link href="http://zhongyp.me/2018/01/04/concurrent/2018-03-04-JavaMemModel/"/>
    <id>http://zhongyp.me/2018/01/04/concurrent/2018-03-04-JavaMemModel/</id>
    <published>2018-01-03T16:00:00.000Z</published>
    <updated>2018-12-07T05:51:07.820Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Javaå†…å­˜æ¨¡å‹"><a href="#Javaå†…å­˜æ¨¡å‹" class="headerlink" title="Javaå†…å­˜æ¨¡å‹"></a>Javaå†…å­˜æ¨¡å‹</h1><p>Javaå†…å­˜æ¨¡å‹ï¼ˆç®€ç§°ï¼šJMMï¼‰ï¼Œä¸‹æ–‡ä¸­å¦‚æœæ²¡æœ‰ç‰¹æ®Šè¯´æ˜ï¼ŒJMMå³ä»£è¡¨â€œJavaå†…å­˜æ¨¡å‹â€ã€‚</p><h2 id="1-æ¦‚è¿°"><a href="#1-æ¦‚è¿°" class="headerlink" title="1. æ¦‚è¿°"></a>1. æ¦‚è¿°</h2><p>åœ¨å¹¶å‘ç¼–ç¨‹æ¨¡å‹ä¸­ï¼Œéœ€è¦å¤„ç†ä¸¤ä¸ªå…³é”®çš„é—®é¢˜ï¼šçº¿ç¨‹ä¹‹é—´ä»¥ä½•ç§æœºåˆ¶äº¤æ¢ä¿¡æ¯ï¼ˆé€šä¿¡ï¼‰åŠå¦‚ä½•æ§åˆ¶ä¸åŒçº¿ç¨‹ä¹‹é—´æ“ä½œå‘ç”Ÿç›¸å¯¹é¡ºåºçš„æœºåˆ¶ï¼ˆåŒæ­¥ï¼‰ã€‚<br>çº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æœºåˆ¶æœ‰ä¸¤ç§ï¼šå…±äº«å†…å­˜å’Œæ¶ˆæ¯ä¼ é€’ã€‚<br>å…±äº«å†…å­˜æ¨¡å‹ï¼šçº¿ç¨‹ä¹‹é—´é€šè¿‡è¯»-å†™å†…å­˜ä¸­çš„å…¬å…±çŠ¶æ€è¿›è¡Œéšå¼é€šä¿¡ã€‚<br>æ¶ˆæ¯ä¼ é€’æ¨¡å‹ï¼šçº¿ç¨‹ä¹‹é—´æ²¡æœ‰å…¬å…±çŠ¶æ€ï¼Œçº¿ç¨‹ä¹‹é—´å¿…é¡»é€šè¿‡å‘é€æ¶ˆæ¯æ¥æ˜¾ç¤ºçš„è¿›è¡Œé€šä¿¡ã€‚<br><strong><em>Javaå¹¶å‘é‡‡ç”¨çš„æ˜¯å…±äº«å†…å­˜æ¨¡å‹</em></strong>ã€‚<br>æ³¨ï¼š<br>åŒæ­¥ï¼šæŒ‡ç¨‹åºä¸­ç”¨äºæ§åˆ¶ä¸åŒçº¿ç¨‹é—´æ“ä½œå‘ç”Ÿç›¸å¯¹é¡ºåºçš„æœºåˆ¶ï¼Œæ„å‘³ç€æŸç§å½¢å¼çš„åŸå­æ€§æˆ–è€…äº’æ–¥ã€‚<br>å…±äº«å†…å­˜çš„å¹¶å‘æ¨¡å‹ä¸­ï¼ŒåŒæ­¥æ˜¯æ˜¾å¼ï¼Œç¨‹åºå‘˜å¿…é¡»æ˜¾ç¤ºçš„æŒ‡å®šæŸä¸ªæ–¹æ³•æˆ–æŸæ®µä»£ç éœ€è¦åœ¨çº¿ç¨‹ä¹‹é—´äº’æ–¥æ‰§è¡Œã€‚æ¶ˆæ¯ä¼ é€’çš„å¹¶å‘æ¨¡å‹ä¸­ï¼Œæ¶ˆæ¯çš„å‘é€å¿…é¡»åœ¨æ¶ˆæ¯çš„æ¥æ”¶ä¹‹å‰ï¼Œå› æ­¤åŒæ­¥æ˜¯éšå¼çš„ã€‚</p><h2 id="2-JMMçš„è®¾è®¡"><a href="#2-JMMçš„è®¾è®¡" class="headerlink" title="2. JMMçš„è®¾è®¡"></a>2. JMMçš„è®¾è®¡</h2><h3 id="2-1-Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„"><a href="#2-1-Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„" class="headerlink" title="2.1 Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„"></a>2.1 Javaå†…å­˜æ¨¡å‹çš„æŠ½è±¡ç»“æ„</h3><p><img src="/media/jvm-1.8.png" alt="jmmæŠ½è±¡ç»“æ„"><br>å¯¹äºä¸Šå›¾å„ä¸ªæ¨¡å—ä¸å¤ªç†è§£çš„å¯ä»¥çœ‹ä¸‹<a href="https://zhongyp.me/2018/03/27/jvm/2018-03-27-JVM/">JVM</a>ï¼Œé‡Œé¢æœ‰å¯¹å„ä¸ªæ¨¡å—çš„è®²è§£ã€‚<br>Javaçº¿ç¨‹ä¹‹é—´çš„é€šä¿¡æ˜¯ç”±Javaå†…å­˜æ¨¡å‹ï¼ˆJava Memory Model,ç®€ç§°ï¼šJMMï¼‰æ§åˆ¶ï¼ŒJMMå†³å®šä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«å˜é‡çš„å†™å…¥ä½•æ—¶å¯¹å¦ä¸€ä¸ªçº¿ç¨‹å¯è§ã€‚JMMé€šè¿‡æ§åˆ¶ä¸»å†…å­˜ä¸æ¯ä¸ªçº¿ç¨‹çš„æœ¬åœ°å†…å­˜ä¹‹é—´çš„äº¤äº’ï¼Œæä¾›å†…å­˜å¯è§æ€§ä¿è¯ã€‚JMMå±äºè¯­è¨€çº§åˆ«çš„å†…å­˜æ¨¡å‹ï¼Œç¡®ä¿åœ¨ä¸åŒçš„ç¼–è¯‘å’Œä¸åŒå¤„ç†å™¨å¹³å°ä¸Šï¼Œé€šè¿‡ç¦æ­¢ç‰¹å®šç±»å‹çš„ç¼–è¯‘å™¨é‡æ’åºå’Œå¤„ç†å™¨é‡æ’åºï¼Œæä¾›å†…å­˜å¯è§æ€§ä¿è¯ã€‚</p><h3 id="2-2-ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜"><a href="#2-2-ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜" class="headerlink" title="2.2 ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜"></a>2.2 ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜</h3><p>åœ¨JMMæ¨¡å‹ä¸­ï¼Œå¯¹è±¡é©»ç•™åœ¨å…±äº«å†…å­˜ä¸­ï¼Œæ¯ä¸ªçº¿ç¨‹å…·æœ‰ä¸€ä¸ªç§æœ‰çš„å†…å­˜å·¥ä½œåŒºï¼Œå…¶ä¸­å­˜æ”¾ç€è¯¥çº¿ç¨‹å·²è¯»/å·²å†™çš„åŸŸçš„cacheæ‹·è´ã€‚åœ¨æ²¡æœ‰æ˜¾ç¤ºåŒæ­¥çš„æƒ…å†µä¸‹ï¼Œå¯¹ä¸€ä¸ªåŸŸæ‰§è¡Œäº†å†™æ“ä½œçš„çº¿ç¨‹å¯èƒ½æ²¡æœ‰å°†å®ƒçš„æ›´æ–°ç«‹å³ä¼ é€åˆ°å†…å­˜ä¸­ï¼›å¯¹ä¸€ä¸ªåŸŸæ‰§è¡Œè¯»æ“ä½œçš„çº¿ç¨‹ï¼Œå½“å†…å­˜ä¸­çš„åŸŸçš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶ç›¸åº”çš„å†…å­˜å·¥ä½œåŒºå¯èƒ½è¿˜æ²¡æœ‰è¢«ä¿®æ”¹ã€‚JVMä¸ä¿æŒè¿™ç§cacheçš„ä¸€è‡´æ€§ã€‚</p><p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼šåœ¨javaä¸­ï¼Œæ‰§è¡Œä¸‹é¢è¿™ä¸ªè¯­å¥ï¼š</p><p><code>i  = 10++;</code></p><p>1) æ‰§è¡Œçº¿ç¨‹å¿…é¡»å…ˆåœ¨è‡ªå·±çš„å·¥ä½œçº¿ç¨‹ä¸­å¯¹å˜é‡iæ‰€åœ¨çš„ç¼“å­˜è¡Œè¿›è¡Œèµ‹å€¼æ“ä½œï¼Œç„¶åå†å†™å…¥ä¸»å­˜å½“ä¸­ã€‚è€Œä¸æ˜¯ç›´æ¥å°†æ•°å€¼10å†™å…¥ä¸»å­˜å½“ä¸­ã€‚</p><p>2) æ¯”å¦‚åŒæ—¶æœ‰2ä¸ªçº¿ç¨‹æ‰§è¡Œè¿™æ®µä»£ç ï¼Œå‡å¦‚åˆå§‹æ—¶içš„å€¼ä¸º10ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¸Œæœ›ä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œä¹‹åiçš„å€¼å˜ä¸º12ã€‚ä½†æ˜¯äº‹å®ä¼šæ˜¯è¿™æ ·å—ï¼Ÿ</p><p>3) å¯èƒ½å­˜åœ¨ä¸‹é¢ä¸€ç§æƒ…å†µï¼šåˆå§‹æ—¶ï¼Œä¸¤ä¸ªçº¿ç¨‹åˆ†åˆ«è¯»å–içš„å€¼å­˜å…¥å„è‡ªæ‰€åœ¨çš„å·¥ä½œå†…å­˜å½“ä¸­ï¼Œç„¶åçº¿ç¨‹1è¿›è¡ŒåŠ 1æ“ä½œï¼Œç„¶åæŠŠiçš„æœ€æ–°å€¼11å†™å…¥åˆ°å†…å­˜ã€‚æ­¤æ—¶çº¿ç¨‹2çš„å·¥ä½œå†…å­˜å½“ä¸­içš„å€¼è¿˜æ˜¯10ï¼Œè¿›è¡ŒåŠ 1æ“ä½œä¹‹åï¼Œiçš„å€¼ä¸º11ï¼Œç„¶åçº¿ç¨‹2æŠŠiçš„å€¼å†™å…¥å†…å­˜ã€‚</p><p>4) æœ€ç»ˆç»“æœiçš„å€¼æ˜¯11ï¼Œè€Œä¸æ˜¯12ã€‚è¿™å°±æ˜¯è‘—åçš„ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ã€‚é€šå¸¸ç§°è¿™ç§è¢«å¤šä¸ªçº¿ç¨‹è®¿é—®çš„å˜é‡ä¸ºå…±äº«å˜é‡ã€‚</p><p>ä¸ºäº†è§£å†³ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜ï¼Œéœ€è¦å„ä¸ªå¤„ç†å™¨è®¿é—®ç¼“å­˜æ—¶éµå¾ªä¸€äº›åè®®ï¼ˆMSIã€MESIã€MOSIã€Synapseç­‰ï¼‰ï¼Œåœ¨è¯»å†™æ—¶è¦æ ¹æ®åè®®è¿›è¡Œæ“ä½œã€‚<br><img src="/media/cache-consistency.png" alt="resort"><br>å›¾ç‰‡æ¥è‡ªï¼š<a href="#æŒ‡ä»¤åºåˆ—çš„é‡æ’åº">ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹</a></p><h3 id="2-3-æŒ‡ä»¤åºåˆ—çš„é‡æ’åº"><a href="#2-3-æŒ‡ä»¤åºåˆ—çš„é‡æ’åº" class="headerlink" title="2.3 æŒ‡ä»¤åºåˆ—çš„é‡æ’åº"></a>2.3 æŒ‡ä»¤åºåˆ—çš„é‡æ’åº</h3><p>é™¤äº†ä¸Šè¿°çš„ç¼“å­˜ä¸€è‡´æ€§é—®é¢˜å¤–ï¼Œåœ¨æ‰§è¡Œç¨‹åºæ—¶ï¼Œä¸ºäº†æé«˜ç¨‹åºçš„æ€§èƒ½ï¼Œä½¿å¾—å¤„ç†å™¨å†…éƒ¨çš„è¿ç®—å•å…ƒè¢«å……åˆ†åˆ©ç”¨ï¼Œç¼–è¯‘å™¨å’Œå¤„ç†å™¨å¸¸å¸¸ä¼šå¯¹æŒ‡ä»¤åšé‡æ’åºã€‚é‡æ’åºä¹Ÿä¼šå¯¼è‡´å¤šçº¿ç¨‹åŒæ­¥çš„é—®é¢˜ã€‚<br>é‡æ’åºåˆ†ç±»ï¼š</p><ol><li>ç¼–è¯‘å™¨é‡æ’åºã€‚ç¼–è¯‘å™¨ä¸æ”¹å˜å•çº¿ç¨‹è¯­ä¹‰çš„å‰æä¸‹ï¼Œå¯ä»¥é‡æ–°å®‰æ’è¯­å¥çš„æ‰§è¡Œé¡ºåºã€‚</li><li>æŒ‡ä»¤çº§é‡æ’åºã€‚ç°ä»£å¤„ç†å™¨é‡‡ç”¨æŒ‡ä»¤çº§å¹¶è¡ŒæŠ€æœ¯å°†å¤šæ¡æŒ‡ä»¤é‡å æ‰§è¡Œã€‚<strong><em>å¦‚æœä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§ï¼Œå¤„ç†å™¨å¯ä»¥æ”¹å˜è¯­å¥å¯¹åº”æœºå™¨æŒ‡ä»¤çš„æ‰§è¡Œé¡ºåºã€‚</em></strong></li><li>å†…å­˜ç³»ç»Ÿçš„é‡æ’åºã€‚ç”±äºå¤„ç†å™¨ä½¿ç”¨ç¼“å­˜å’Œè¯»/å†™ç¼“å†²åŒºï¼Œä½¿å¾—åŠ è½½å’Œå­˜å‚¨æ“ä½œçœ‹ä¸Šå»å¯èƒ½æ˜¯åœ¨ä¹±åºæ‰§è¡Œã€‚</li></ol><p>æ³¨ï¼š<br>æ•°æ®ä¾èµ–æ€§ï¼šç¼–è¯‘å™¨å’Œå¤„ç†å™¨ä¸ä¼šæ”¹å˜å­˜åœ¨æ•°æ®ä»¥æ¥å…³ç³»çš„ä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œé¡ºåºã€‚æ•°æ®ä¾èµ–æ€§ä»…é’ˆå¯¹å•ä¸ªå¤„ç†å™¨ä¸­æ‰§è¡Œçš„æŒ‡ä»¤åºåˆ—å’Œå•ä¸ªçº¿ç¨‹ä¸­æ‰§è¡Œçš„æ“ä½œï¼Œä¸åŒå¤„ç†å™¨ä¹‹é—´å’Œä¸åŒçº¿ç¨‹ä¹‹é—´çš„æ•°æ®ä¾èµ–æ€§ä¸è¢«ç¼–è¯‘å™¨å’Œå¤„ç†å™¨è€ƒè™‘ã€‚<br>as-if-serialï¼šä¸ç®¡å¦‚ä½•çš„é‡æ’åºï¼Œå•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œç»“æœä¸èƒ½è¢«æ”¹å˜ã€‚ç¼–è¯‘å™¨ã€runtimeå’Œå¤„ç†å™¨éƒ½å¿…é¡»éµå®ˆas-if-serialè¯­ä¹‰ã€‚</p><p><img src="/media/resort.png" alt="resort"></p><p>å›¾ä¸­çš„1ã€2ã€3é‡æ’åºå¯èƒ½ä¼šå¯¼è‡´å¤šçº¿ç¨‹çš„å†…å­˜å¯è§æ€§é—®é¢˜ã€‚è¿™ä¸ç°ä»£å¤„ç†å™¨ä½¿ç”¨å†™ç¼“å†²åŒºæœ‰å…³ã€‚æˆ‘ä»¬çŸ¥é“cpuå¤„ç†å’Œå†…å­˜è¯»å†™çš„å¤„ç†é€Ÿåº¦å·®è·å¤ªå¤§ï¼Œä¸ºäº†å‡å°‘cpuç­‰å¾…è¯»/å†™å†…å­˜äº§ç”Ÿçš„å»¶è¿Ÿï¼Œcpuä½¿ç”¨äº†å†™ç¼“å­˜åŒºã€‚å†™ç¼“å†²åŒºå¯ä»¥ä¿è¯æŒ‡ä»¤æµæ°´çº¿æŒç»­è¿è¡Œï¼Œé€šè¿‡æ‰¹å¤„ç†çš„æ–¹å¼åˆ·æ–°å†™ç¼“å†²ï¼Œä»¥åŠåˆå¹¶å†™ç¼“å†²ä¸­å¯¹åŒä¸€å†…å­˜åœ°å€çš„å¤šæ¬¡å†™ï¼Œå‡å°‘å¯¹å†…å­˜æ€»çº¿çš„å ç”¨ã€‚<br>ä¾‹å¦‚ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * è¿™æ®µä»£ç ç”¨æ¥æ ¡éªŒcpuå¯¹å†…å­˜çš„è¯»/å†™æ“ä½œï¼Œä¸ä¸€å®šä¸å†…å­˜å®é™…å‘ç”Ÿçš„è¯»/å†™é¡ºåºä¸€è‡´ã€‚</span><br><span class="line"> */</span><br><span class="line">    //åˆå§‹çŠ¶æ€ a=b=0</span><br><span class="line">  </span><br><span class="line">    //çº¿ç¨‹1</span><br><span class="line">        a = 1; // A1</span><br><span class="line">        x = b; // A2</span><br><span class="line">   </span><br><span class="line">    // çº¿ç¨‹2</span><br><span class="line">        b=2; // B1</span><br><span class="line">        y=a; // B2</span><br></pre></td></tr></table></figure></p><p>è¿™ä¸ªç¨‹åºçš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ï¼Œæœ‰å¯èƒ½æ˜¯x=y=0ã€‚çº¿ç¨‹1å’Œçº¿ç¨‹2åŒæ—¶æŠŠå…±äº«å˜é‡aã€bå†™å…¥è‡ªå·±çš„å†™ç¼“å†²åŒºï¼Œç„¶åä»å†…å­˜ä¸­è¯»å–å¦ä¸€ä¸ªå…±äº«å˜é‡aã€bçš„å€¼å¤åˆ¶ç»™xã€yï¼Œæœ€åå†æŠŠæ‰€æœ‰çš„æ•°æ®åˆ·å…¥å†…å­˜ã€‚è¿™ç§æƒ…å†µä¸‹x=y=0ã€‚<br><img src="/media/cpustore.png" alt="cpu-mem"><br>ä¸Šè¿°è¿™ç§æƒ…å†µå°±æ˜¯é‡æ’åºå¯¹å¤šçº¿ç¨‹çš„å½±å“ã€‚</p><h3 id="2-4-happens-before"><a href="#2-4-happens-before" class="headerlink" title="2.4 happens-before"></a>2.4 happens-before</h3><p>Javaè™šæ‹Ÿæœºè¯•å›¾å®šä¹‰ä¸€ç§Javaå†…å­˜æ¨¡å‹æ¥å±è”½æ‰å„ç§ç¡¬ä»¶å’Œæ“ä½œç³»ç»Ÿçš„å†…å­˜è®¿é—®å·®å¼‚ï¼Œä¸”èƒ½å¤Ÿæœ‰è¶³å¤Ÿçš„è‡ªç”±ç©ºé—´åŒºåˆ©ç”¨ç¡¬ä»¶çš„å„ç§ç‰¹æ€§æ¥è·å–ä¸ªå¥½çš„æ‰§è¡Œé€Ÿåº¦ï¼Œä»JDK5å¼€å§‹ï¼ŒJavaä½¿ç”¨JSR-133å†…å­˜æ¨¡å‹ã€‚JSR-133ä½¿ç”¨happens-beforeæ¦‚å¿µä¿è¯å†…å­˜çš„å¯è§æ€§ã€‚å¦å¤–ï¼ŒJavaå†…å­˜æ¨¡å‹å…·å¤‡ä¸€äº›å…ˆå¤©çš„â€œæœ‰åºæ€§â€ï¼Œå³ä¸éœ€è¦é€šè¿‡ä»»ä½•æ‰‹æ®µå°±èƒ½å¤Ÿå¾—åˆ°ä¿è¯çš„æœ‰åºæ€§ï¼Œè¿™ä¸ªé€šå¸¸ä¹Ÿç§°ä¸º happens-before åŸåˆ™ã€‚å¦‚æœä¸¤ä¸ªæ“ä½œçš„æ‰§è¡Œæ¬¡åºæ— æ³•ä»happens-beforeåŸåˆ™æ¨å¯¼å‡ºæ¥ï¼Œé‚£ä¹ˆå®ƒä»¬å°±ä¸èƒ½ä¿è¯å®ƒä»¬çš„æœ‰åºæ€§ï¼Œè™šæ‹Ÿæœºå¯ä»¥éšæ„åœ°å¯¹å®ƒä»¬è¿›è¡Œé‡æ’åºã€‚</p><p>ä¸‹é¢å°±æ¥å…·ä½“ä»‹ç»ä¸‹happens-beforeåŸåˆ™ï¼ˆå…ˆè¡Œå‘ç”ŸåŸåˆ™ï¼‰ï¼š</p><ol><li><p><strong><em>ç¨‹åºæ¬¡åºè§„åˆ™ï¼šä¸€ä¸ªçº¿ç¨‹ä¸­çš„æ¯ä¸ªæ“ä½œï¼Œhappens-beforeäºè¯¥çº¿ç¨‹ä¸­çš„ä»»æ„åç»­æ“ä½œã€‚</em></strong></p></li><li><p><strong><em>ç›‘è§†å™¨é”è§„åˆ™ï¼šä¸€ä¸ªunLockæ“ä½œå…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹åŒä¸€ä¸ªé”çš„lockæ“ä½œã€‚</em></strong></p></li><li><p><strong><em>volatileå˜é‡è§„åˆ™ï¼šå¯¹ä¸€ä¸ªvolatileå˜é‡çš„å†™æ“ä½œï¼Œhappens-beforeäºåç»­å¯¹è¿™ä¸ªvolatileå˜é‡çš„è¯»æ“ä½œã€‚</em></strong></p></li><li><p><strong><em>ä¼ é€’è§„åˆ™ï¼šå¦‚æœæ“ä½œA happens-beforeæ“ä½œBï¼Œè€Œæ“ä½œB happens-beforeæ“ä½œCï¼Œåˆ™å¯ä»¥å¾—å‡ºæ“ä½œA happens-beforeæ“ä½œCã€‚</em></strong></p></li><li><p>start()è§„åˆ™ï¼šThreadå¯¹è±¡çš„start()æ–¹æ³•happens-beforeæ­¤çº¿ç¨‹çš„æ¯ä¸ªä¸€ä¸ªåŠ¨ä½œ</p></li><li><p>join()è§„åˆ™ï¼šå¦‚æœçº¿ç¨‹Aæ‰§è¡Œæ“ä½œThreadB.join()å¹¶æˆåŠŸè¿”å›ï¼Œé‚£ä¹ˆçº¿ç¨‹Bä¸­çš„ä»»æ„æ“ä½œhappens-beforeäºçº¿ç¨‹Aä»ThreadB.join()æ“ä½œæˆåŠŸè¿”å›ã€‚</p></li><li><p>çº¿ç¨‹ç»ˆç»“è§„åˆ™ï¼šçº¿ç¨‹ä¸­æ‰€æœ‰çš„æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºçº¿ç¨‹çš„ç»ˆæ­¢æ£€æµ‹ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡Thread.join()æ–¹æ³•ç»“æŸã€Thread.isAlive()çš„è¿”å›å€¼æ‰‹æ®µæ£€æµ‹åˆ°çº¿ç¨‹å·²ç»ç»ˆæ­¢æ‰§è¡Œ</p></li><li><p>å¯¹è±¡ç»ˆç»“è§„åˆ™ï¼šä¸€ä¸ªå¯¹è±¡çš„åˆå§‹åŒ–å®Œæˆå…ˆè¡Œå‘ç”Ÿäºä»–çš„finalize()æ–¹æ³•çš„å¼€å§‹</p></li></ol><p>å¯¹äºç¨‹åºæ¬¡åºè§„åˆ™æ¥è¯´ï¼Œå°±æ˜¯ä¸€æ®µç¨‹åºä»£ç çš„æ‰§è¡Œåœ¨å•ä¸ªçº¿ç¨‹ä¸­<strong><em>çœ‹èµ·æ¥</em></strong>æ˜¯æœ‰åºçš„ã€‚ç¨‹åºçœ‹èµ·æ¥æ‰§è¡Œçš„é¡ºåºæ˜¯æŒ‰ç…§ä»£ç é¡ºåºæ‰§è¡Œçš„ï¼Œä½†æ˜¯è™šæ‹Ÿæœºå¯èƒ½ä¼šå¯¹ç¨‹åºä»£ç è¿›è¡ŒæŒ‡ä»¤é‡æ’åºã€‚è™½ç„¶è¿›è¡Œé‡æ’åºï¼Œä½†æ˜¯æœ€ç»ˆæ‰§è¡Œçš„ç»“æœæ˜¯ä¸ç¨‹åºé¡ºåºæ‰§è¡Œçš„ç»“æœä¸€è‡´çš„ï¼Œå®ƒåªä¼šå¯¹ä¸å­˜åœ¨æ•°æ®ä¾èµ–æ€§çš„æŒ‡ä»¤è¿›è¡Œé‡æ’åºã€‚å› æ­¤ï¼Œåœ¨å•ä¸ªçº¿ç¨‹ä¸­ï¼Œç¨‹åºæ‰§è¡Œçœ‹èµ·æ¥æ˜¯æœ‰åºæ‰§è¡Œçš„ï¼Œè¿™ä¸€ç‚¹è¦æ³¨æ„ç†è§£ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªè§„åˆ™æ˜¯ç”¨æ¥ä¿è¯ç¨‹åºåœ¨<strong><em>å•çº¿ç¨‹ä¸­æ‰§è¡Œç»“æœçš„æ­£ç¡®æ€§ï¼Œä½†æ— æ³•ä¿è¯ç¨‹åºåœ¨å¤šçº¿ç¨‹ä¸­æ‰§è¡Œçš„æ­£ç¡®æ€§ã€‚</em></strong><br>æ³¨æ„ï¼š<strong><em>ä¸¤ä¸ªæ“ä½œä¹‹é—´å…·æœ‰çš„happens-beforeå…³ç³»ï¼Œå¹¶ä¸æ˜¯æ„å‘³ç€å‰ä¸€ä¸ªæ“ä½œå¿…é¡»åœ¨åä¸€ä¸ªæ“ä½œä¹‹å‰æ‰§è¡Œï¼Œä»…ä»…è¦æ±‚å‰ä¸€ä¸ªæ“ä½œæ‰§è¡Œç»“æœå¯¹åä¸€ä¸ªæ“ä½œå¯è§ã€‚</em></strong></p><p><img src="/media/happens-before-design.png" alt="happens-before-design"><br>JMMè®¾è®¡å›¾ï¼Œå›¾ç‰‡æ¥è‡ª<a href="#2-4-happens-before">Javaå¹¶å‘ç¼–ç¨‹è‰ºæœ¯</a></p><h2 id="JMMæ€»ç»“"><a href="#JMMæ€»ç»“" class="headerlink" title="JMMæ€»ç»“"></a>JMMæ€»ç»“</h2><p>JMMåœ¨è®¾è®¡ä¸Šè€ƒè™‘ä¸¤ä¸ªå…³é”®å› ç´ ï¼š</p><ol><li>è¦ä¸ºç¨‹åºå‘˜æä¾›è¶³å¤Ÿå¼ºçš„å†…å­˜å¯è§æ€§ä¿è¯ã€‚</li><li>å¯¹ç¼–è¯‘å™¨å’Œå¤„ç†å™¨çš„é™åˆ¶å°½å¯èƒ½çš„æ”¾æ¾ï¼Œæé«˜ç¨‹åºçš„è¿è¡Œæ€§èƒ½ï¼ŒåŒæ—¶è§£å†³é‡æ’åºå¯¼è‡´çš„å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ã€‚<br>æ€»çš„æ¥è¯´JMMåœ¨è®¾è®¡ä¸Šå®Œæˆäº†å¦‚ä¸‹çš„ç»“æœï¼š</li></ol><ul><li>å•çº¿ç¨‹ç¨‹åºã€‚<strong><em>å•çº¿ç¨‹ç¨‹åºä¸ä¼šå‡ºç°å†…å­˜å¯è§æ€§é—®é¢˜ã€‚</em></strong>ç¼–è¯‘å™¨ã€runtimeå’Œå¤„ç†å™¨ä¼šå…±åŒç¡®ä¿å•çº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¯¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§æ¨¡å‹ä¸­çš„æ‰§è¡Œç»“æœç›¸åŒã€‚</li><li>æ­£ç¡®<strong><em>åŒæ­¥</em></strong>çš„å¤šçº¿ç¨‹ç¨‹åºã€‚æ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºçš„æ‰§è¡Œå°†å…·æœ‰é¡ºåºä¸€è‡´æ€§ï¼ˆç¨‹åºçš„æ‰§è¡Œç»“æœä¸è¯¥ç¨‹åºåœ¨é¡ºåºä¸€è‡´æ€§å†…å­˜æ¨¡å‹ä¸­çš„æ‰§è¡Œç»“æœç›¸åŒï¼‰ã€‚<strong><em>JMMé€šè¿‡é™åˆ¶ç¼–è¯‘å™¨å’Œå¤„ç†å™¨çš„é‡æ’åºæ¥ä¸ºç¨‹åºå‘˜æä¾›å†…å­˜å¯è§æ€§ä¿è¯ã€‚ï¼ˆè¿™å¥è¯è§£å†³äº†æœ¬æ–‡ä¸­çš„ä¸¤ä¸ªé—®é¢˜ï¼Œç¼“å­˜ä¸€è‡´æ€§ä¸é‡æ’åºå¼•èµ·çš„å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œæˆ‘ä¼šåœ¨<a href="https://zhongyp.me/2018/12/06/concurrent/2018-12-06-thread-communication/">çº¿ç¨‹é€šä¿¡</a>çš„å…±äº«å˜é‡å°èŠ‚ä¸­è®²è§£ç¼“å­˜ä¸€è‡´æ€§çš„è§£å†³æ–¹æ¡ˆï¼Œåœ¨<a href="https://zhongyp.me/2018/12/06/concurrent/2018-12-06-thread-security/">çº¿ç¨‹å®‰å…¨</a>ä¸€ç« ä¸­è®²è§£é‡æ’åºå¼•èµ·çš„å¤šçº¿ç¨‹åŒæ­¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼‰</em></strong></li><li>æœªåŒæ­¥/æœªæ­£ç¡®åŒæ­¥çš„å¤šçº¿ç¨‹ç¨‹åºã€‚JMMä¸ºä»–ä»¬æä¾›æœ€å°çš„å®‰å…¨æ€§ä¿éšœï¼šçº¿ç¨‹æ‰§è¡Œæ—¶è¯»å–åˆ°çš„å€¼ï¼Œè¦ä¹ˆæ˜¯ä¹‹å‰æŸä¸ªçº¿ç¨‹å†™å…¥çš„å€¼ï¼Œè¦ä¹ˆæ—¶é»˜è®¤å€¼ï¼ˆ0ã€nullã€falseï¼‰ã€‚</li></ul><h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><p><a href="http://www.importnew.com/24082.html" target="_blank" rel="noopener">ä½ çœŸçš„äº†è§£volatileå…³é”®å­—å—ï¼Ÿ</a></p><p><a href="https://www.cnblogs.com/zhengbin/p/5654805.html" target="_blank" rel="noopener">Javaä¸­Volatileå…³é”®å­—è¯¦è§£</a></p><p><a href="">Javaå¹¶å‘ç¼–ç¨‹è‰ºæœ¯</a></p><p><a href="">æ·±å…¥ç†è§£Javaè™šæ‹Ÿæœº-JVMé«˜çº§ç‰¹æ€§ä¸æœ€ä½³å®è·µ</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;Javaå†…å­˜æ¨¡å‹&quot;&gt;&lt;a href=&quot;#Javaå†…å­˜æ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;Javaå†…å­˜æ¨¡å‹&quot;&gt;&lt;/a&gt;Javaå†…å­˜æ¨¡å‹&lt;/h1&gt;&lt;p&gt;Javaå†…å­˜æ¨¡å‹ï¼ˆç®€ç§°ï¼šJMMï¼‰ï¼Œä¸‹æ–‡ä¸­å¦‚æœæ²¡æœ‰ç‰¹æ®Šè¯´æ˜ï¼ŒJMMå³ä»£è¡¨â€œJavaå†…å­˜æ¨¡å‹â€ã€‚
      
    
    </summary>
    
    
      <category term="å¹¶å‘" scheme="http://zhongyp.me/tags/%E5%B9%B6%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>æ—…è¡Œ</title>
    <link href="http://zhongyp.me/2017/07/05/life/2017-7-5-Journey/"/>
    <id>http://zhongyp.me/2017/07/05/life/2017-7-5-Journey/</id>
    <published>2017-07-04T16:00:00.000Z</published>
    <updated>2018-10-27T03:29:27.247Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ—…è¡Œ"><a href="#æ—…è¡Œ" class="headerlink" title="æ—…è¡Œ"></a>æ—…è¡Œ</h2><p>æ—…è¡Œè®©æˆ‘èƒ½æœ›å¾—è¾½è¿œï¼Œæƒ³å¾—ç»†å¯†ï¼Œç†è§£äººç”Ÿçš„é—æ†¾ï¼Œä¸è¿™ä¸–ç•Œçš„å¥½å¤„ã€‚</p><h2 id="ç”Ÿæ´»çš„åŸå¸‚"><a href="#ç”Ÿæ´»çš„åŸå¸‚" class="headerlink" title="ç”Ÿæ´»çš„åŸå¸‚"></a>ç”Ÿæ´»çš„åŸå¸‚</h2><ul><li><p><a href="#æ»•å·2013-9">æ»•å·ï¼ˆ~2013-9ï¼‰</a></p></li><li><p><a href="#çƒŸå°2013-92016-7">çƒŸå°ï¼ˆ2013-9~2016-7ï¼‰</a></p></li><li><p><a href="#åŒ—äº¬2016-7">åŒ—äº¬ï¼ˆ2016-7~ï¼‰</a></p></li></ul><h2 id="é‚£äº›å€¼å¾—çºªå¿µçš„åœ°æ–¹"><a href="#é‚£äº›å€¼å¾—çºªå¿µçš„åœ°æ–¹" class="headerlink" title="é‚£äº›å€¼å¾—çºªå¿µçš„åœ°æ–¹"></a>é‚£äº›å€¼å¾—çºªå¿µçš„åœ°æ–¹</h2><ul><li><p><a href="#æ—¥ç…§2010-8">æ—¥ç…§ï¼ˆ2010-8ï¼‰</a></p></li><li><p><a href="#å»ŠåŠ2012-7">å»ŠåŠï¼ˆ2012-7ï¼‰</a></p></li><li><p><a href="#è“¬è±2013-10">è“¬è±ï¼ˆ2013-10ï¼‰</a></p></li><li><p><a href="#å¨æµ·2015-10">å¨æµ·ï¼ˆ2015-10ï¼‰</a></p></li><li><p><a href="#é•¿å²›2017-5">é•¿å²›ï¼ˆ2017-5ï¼‰</a></p></li><li><p><a href="#ä¹Œå…°å¸ƒç»Ÿ2017-7">ä¹Œå…°å¸ƒç»Ÿï¼ˆ2017-7ï¼‰</a></p></li></ul><h3 id="ç”Ÿæ´»çš„åŸå¸‚-1"><a href="#ç”Ÿæ´»çš„åŸå¸‚-1" class="headerlink" title="ç”Ÿæ´»çš„åŸå¸‚"></a>ç”Ÿæ´»çš„åŸå¸‚</h3><h3 id="æ»•å·ï¼ˆ-2013-9ï¼‰"><a href="#æ»•å·ï¼ˆ-2013-9ï¼‰" class="headerlink" title="æ»•å·ï¼ˆ~2013-9ï¼‰"></a>æ»•å·ï¼ˆ~2013-9ï¼‰</h3><h3 id="çƒŸå°ï¼ˆ2013-9-2016-7ï¼‰"><a href="#çƒŸå°ï¼ˆ2013-9-2016-7ï¼‰" class="headerlink" title="çƒŸå°ï¼ˆ2013-9~2016-7ï¼‰"></a>çƒŸå°ï¼ˆ2013-9~2016-7ï¼‰</h3><p>å¤§å­¦å››å¹´ï¼ˆå…¶å®åªå‘†è¿‡ä¸‰å¹´ï¼‰ç”Ÿæ´»çš„åœ°æ–¹ã€‚å››å¹´ä¹Ÿæ²¡å»è¿‡å¤šå°‘åœ°æ–¹ï¼Œå¤§éƒ½æ—¶é—´éƒ½åœ¨çå¿™ï¼Œç­‰è¿‡äº†æœ€é—²æš‡çš„æ—¶å…‰ï¼Œæ‰çŸ¥é“è‡ªå·±é”™è¿‡å¤ªå¤šã€‚</p><h3 id="åŒ—äº¬ï¼ˆ2016-7-ï¼‰"><a href="#åŒ—äº¬ï¼ˆ2016-7-ï¼‰" class="headerlink" title="åŒ—äº¬ï¼ˆ2016-7~ï¼‰"></a>åŒ—äº¬ï¼ˆ2016-7~ï¼‰</h3><h3 id="é‚£äº›å€¼å¾—çºªå¿µçš„åœ°æ–¹-1"><a href="#é‚£äº›å€¼å¾—çºªå¿µçš„åœ°æ–¹-1" class="headerlink" title="é‚£äº›å€¼å¾—çºªå¿µçš„åœ°æ–¹"></a>é‚£äº›å€¼å¾—çºªå¿µçš„åœ°æ–¹</h3><h3 id="æ—¥ç…§ï¼ˆ2010-8ï¼‰"><a href="#æ—¥ç…§ï¼ˆ2010-8ï¼‰" class="headerlink" title="æ—¥ç…§ï¼ˆ2010-8ï¼‰"></a>æ—¥ç…§ï¼ˆ2010-8ï¼‰</h3><h3 id="å»ŠåŠï¼ˆ2012-7ï¼‰"><a href="#å»ŠåŠï¼ˆ2012-7ï¼‰" class="headerlink" title="å»ŠåŠï¼ˆ2012-7ï¼‰"></a>å»ŠåŠï¼ˆ2012-7ï¼‰</h3><h3 id="è“¬è±ï¼ˆ2013-10ï¼‰"><a href="#è“¬è±ï¼ˆ2013-10ï¼‰" class="headerlink" title="è“¬è±ï¼ˆ2013-10ï¼‰"></a>è“¬è±ï¼ˆ2013-10ï¼‰</h3><h3 id="å¨æµ·ï¼ˆ2015-10ï¼‰"><a href="#å¨æµ·ï¼ˆ2015-10ï¼‰" class="headerlink" title="å¨æµ·ï¼ˆ2015-10ï¼‰"></a>å¨æµ·ï¼ˆ2015-10ï¼‰</h3><h3 id="é•¿å²›ï¼ˆ2017-5ï¼‰"><a href="#é•¿å²›ï¼ˆ2017-5ï¼‰" class="headerlink" title="é•¿å²›ï¼ˆ2017-5ï¼‰"></a>é•¿å²›ï¼ˆ2017-5ï¼‰</h3><h3 id="ä¹Œå…°å¸ƒç»Ÿï¼ˆ2017-7ï¼‰"><a href="#ä¹Œå…°å¸ƒç»Ÿï¼ˆ2017-7ï¼‰" class="headerlink" title="ä¹Œå…°å¸ƒç»Ÿï¼ˆ2017-7ï¼‰"></a>ä¹Œå…°å¸ƒç»Ÿï¼ˆ2017-7ï¼‰</h3>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;æ—…è¡Œ&quot;&gt;&lt;a href=&quot;#æ—…è¡Œ&quot; class=&quot;headerlink&quot; title=&quot;æ—…è¡Œ&quot;&gt;&lt;/a&gt;æ—…è¡Œ&lt;/h2&gt;&lt;p&gt;æ—…è¡Œè®©æˆ‘èƒ½æœ›å¾—è¾½è¿œï¼Œæƒ³å¾—ç»†å¯†ï¼Œç†è§£äººç”Ÿçš„é—æ†¾ï¼Œä¸è¿™ä¸–ç•Œçš„å¥½å¤„ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç”Ÿæ´»çš„åŸå¸‚&quot;&gt;&lt;a href=&quot;#ç”Ÿæ´»çš„åŸå¸‚&quot; cl
      
    
    </summary>
    
    
      <category term="ç”Ÿæ´»" scheme="http://zhongyp.me/tags/%E7%94%9F%E6%B4%BB/"/>
    
  </entry>
  
  <entry>
    <title>2017ä¹¦å•</title>
    <link href="http://zhongyp.me/2017/01/01/life/2017-1-1-books/"/>
    <id>http://zhongyp.me/2017/01/01/life/2017-1-1-books/</id>
    <published>2016-12-31T16:00:00.000Z</published>
    <updated>2018-10-27T03:29:23.183Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¹¦æ¶"><a href="#ä¹¦æ¶" class="headerlink" title="ä¹¦æ¶"></a>ä¹¦æ¶</h2><p>â€“2017ä¹¦å•</p><h2 id="greate-mindsï¼šsource"><a href="#greate-mindsï¼šsource" class="headerlink" title="greate mindsï¼šsource"></a>greate mindsï¼š<a href="https://github.com/camda/mybook/tree/master/minds" target="_blank" rel="noopener">source</a></h2><pre><code>+ æ·±å…¥æµ…å‡ºè®¾è®¡æ¨¡å¼+ äººæœˆç¥è¯+ ä»£ç æ•´æ´ä¹‹é“+ ç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“+ ç¼–ç¨‹ä¹‹ç¾ï¼šå¾®è½¯æŠ€æœ¯é¢è¯•å¿ƒå¾—+ ç¼–ç¨‹ç ç‘+ ç¼–ç¨‹ç ç‘ï¼ˆç»­ï¼‰+ è®¾è®¡æ¨¡å¼+ Javaç¨‹åºå‘˜ä¿®ç‚¼ä¹‹é“+ ç®—æ³•å¯¼è®º3</code></pre><h2 id="javaï¼šsource"><a href="#javaï¼šsource" class="headerlink" title="javaï¼šsource"></a>javaï¼š<a href="https://github.com/camda/mybook/tree/master/java" target="_blank" rel="noopener">source</a></h2><pre><code>+ Java_TCPIP_Socketç½‘ç»œç¼–ç¨‹</code></pre><h2 id="smartï¼šsource"><a href="#smartï¼šsource" class="headerlink" title="smartï¼šsource"></a>smartï¼š<a href="https://github.com/camda/mybook/tree/master/smart" target="_blank" rel="noopener">source</a></h2><pre><code>+ å‘¨å¿—å-æœºå™¨å­¦ä¹ + å‘¨å¿—å-æ•°æ®æŒ–æ˜ä¸æœºå™¨å­¦ä¹ </code></pre><h2 id="frameworkï¼šsource"><a href="#frameworkï¼šsource" class="headerlink" title="frameworkï¼šsource"></a>frameworkï¼š<a href="https://github.com/camda/mybook/tree/master/framework" target="_blank" rel="noopener">source</a></h2><pre><code>+ Hibernateå¼€å‘æŒ‡å—+ SpringGuide+ Springæºç æ·±åº¦è§£æ+ dubboæºç è§£æ2.0+ ZooKeeper</code></pre><h2 id="other-source"><a href="#other-source" class="headerlink" title="other: source"></a>other: <a href="https://github.com/camda/mybook/tree/master/other" target="_blank" rel="noopener">source</a></h2><pre><code>+ äº§å“ç»ç†æ‰‹å†Œ+ ç»æµå­¦åŸç†+ ä½ è¦å¦‚ä½•è¡¡é‡ä½ çš„äººç”Ÿ+ ç‰›æ´¥é€šè¯†ç²¾é€‰+ ä¸‰ä½“2 é»‘æš—æ£®æ—+ æ‰‹æŠŠæ‰‹æ•™ä½ è¯»è´¢æŠ¥+ More Effective C++</code></pre>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;ä¹¦æ¶&quot;&gt;&lt;a href=&quot;#ä¹¦æ¶&quot; class=&quot;headerlink&quot; title=&quot;ä¹¦æ¶&quot;&gt;&lt;/a&gt;ä¹¦æ¶&lt;/h2&gt;&lt;p&gt;â€“2017ä¹¦å•&lt;/p&gt;
&lt;h2 id=&quot;greate-mindsï¼šsource&quot;&gt;&lt;a href=&quot;#greate-mindsï¼šsource
      
    
    </summary>
    
    
      <category term="ä¹¦å•" scheme="http://zhongyp.me/tags/%E4%B9%A6%E5%8D%95/"/>
    
  </entry>
  
</feed>
